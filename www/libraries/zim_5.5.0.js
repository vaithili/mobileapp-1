// ZIM js Interactive Media framework http://zimjs.com by Dan Zen http://danzen.com (c) 2017
// Also see http://zimjs.com/code/distill to minify only the functions in your app
// free to use - donations welcome of course! http://zimjs.com/donate

function zid(e){return z_d("1"),document.getElementById(e)}function zss(e){if(z_d("2"),document.getElementById(e))return document.getElementById(e).style;zon&&zog("zim wrap - zss(): id not found")}function zgo(e,t,o,n,i,a){if(z_d("3"),!(zot(t)&&""!=t||"_self"==t)){var r="";return o&&(r+="width="+o+","),n&&(r+="height="+n+","),i&&(r+="fullscreen=yes,"),a&&(r+="modal=yes,alwaysRaised=yes"),window.open(e,t,r)}window.location.href=e}function zum(e){if(z_d("4"),!zot(e))return Number(String(e).replace(/[^\d\.\-]/g,""))}function zot(e){return null==e}function zop(e){z_d("5"),zot(e)||(e.stopImmediatePropagation&&e.stopImmediatePropagation(),window.event&&(window.event.cancelBubble=!0))}function zil(){z_d("6");var e=function(e){e||(e=event),e.keyCode&&e.keyCode>=32&&e.keyCode<=40&&e.preventDefault()},t=function(e){e||(e=event),e.preventDefault()},o=t;return window.addEventListener("keydown",e),window.addEventListener("mousewheel",t),window.addEventListener("DOMMouseScroll",o),[e,t,o]}function zet(e){return z_d("6.1"),new function(){var t=this;this.on=function(o,n){if(!(zot(e)||zot(o)||zot(n)))for(var i=t.tags,a=0;a<i.length;a++)i[a].addEventListener(o,n)},this.off=function(o,n){if(!(zot(e)||zot(o)||zot(n)))for(var i=t.tags,a=0;a<i.length;a++)i[a].removeEventListener(o,n)},Object.defineProperty(t,"tags",{get:function(){return zot(e)?[]:"string"==typeof e||e instanceof String?document.querySelectorAll(e):"string"==typeof e.innerHTML?[e]:[]},set:function(e){}}),this.css=function(e,o){for(var n=t.tags,i=0;i<n.length;i++)if(1==arguments.length&&arguments[0].constructor==={}.constructor)for(var a in e)n[i].style[a]=e[a];else{if(1==arguments.length)return t.tags[0].style[e];n[i].style[e]=o}},this.prop=function(e,o){if(!zot(e)){for(var n=t.tags,i=[],a=0;a<n.length;a++)if(zot(o))if(e.constructor==={}.constructor)for(var r in e)n[a][r]=e[r];else i.push(n[a][e]);else n[a][e]=o;return zot(o)?i:void 0}}}}function isDUO(e){return 1==e.length&&e[0].constructor==={}.constructor}function zob(e,t,o,n){if(isDUO(t)){z_d("7");var i,a,r=t[0],s=zot(o)?e.toString().split(/\n/,1)[0].match(/\((.*)\)/)[1].replace(/\s+/g,"").split(","):o.replace(/\s+/g,"").split(","),l=[];for(i=0;i<s.length;i++)a=s[i].split("=")[0],s[i]=a,l.push(r[a]);for(i in r)s.indexOf(i)<0&&zon&&zog(e,"bad argument "+i);var d;return!(d=e.prototype.isPrototypeOf(n)?new(e.bind.apply(e,[null].concat(l))):e.apply(null,l))||d}}function zik(e){if(z_d("7.5"),!zot(e)){if(e.constructor==={}.constructor||Array.isArray(e)||"function"==typeof e){if(Array.isArray(e))return zik(t=e[Math.floor(Math.random()*e.length)]);if(e.constructor==={}.constructor){if(zot(e.max))return e;zot(e.integer)&&(e.integer=!1);var t=zim.rand(e.min,e.max,e.integer,e.negative);return t}if("function"==typeof e)return zik(e())}return e}}function z_d(e){zim&&zim.DISTILL&&zim.distillery.push(e)}function zimify(e,t){z_d("83.3");var o={drag:function(e,t,o,n,i,a,r,s,l,d,c,u,h){return isDUO(arguments)?(arguments[0].obj=this,zim.drag(arguments[0])):zim.drag(this,e,t,o,n,i,a,r,s,l,d,c,u,h)},noDrag:function(){return zim.noDrag(this)},dragRect:function(e){return zim.dragRect(this,e)},setSwipe:function(e){return zim.setSwipe(this,e)},gesture:function(e,t,o,n,i,a,r,s,l){return isDUO(arguments)?(arguments[0].obj=this,zim.gesture(arguments[0])):zim.gesture(this,e,t,o,n,i,a,r,s,l)},noGesture:function(e,t,o){if(isDUO(arguments))return arguments[0].obj=this,zim.noGesture(arguments[0]);zim.noGesture(this,e,t,o)},gestureRect:function(e){return zim.gestureRect(this,e)},hitTestPoint:function(e,t){return zim.hitTestPoint(this,e,t)},hitTestReg:function(e){return zim.hitTestReg(this,e)},hitTestRect:function(e,t){return zim.hitTestRect(this,e,t)},hitTestCircle:function(e,t){return zim.hitTestCircle(this,e,t)},hitTestBounds:function(e,t){return zim.hitTestBounds(this,e,t)},boundsToGlobal:function(e,t){return zim.boundsToGlobal(this,e,t)},hitTestGrid:function(e,t,o,n,i,a,r,s,l,d,c,u){return zim.hitTestGrid(this,e,t,o,n,i,a,r,s,l,d,c,u)},move:function(e,t,o,n,i,a,r,s,l,d,c,u,h,f,g,p,m,z,v,b,y,w,x,C,T,S,k,M,j,P,E){return isDUO(arguments)?(arguments[0].target=this,zim.move(arguments[0])):zim.move(this,e,t,o,n,i,a,r,s,l,d,c,u,h,f,g,p,m,z,v,b,y,w,x,C,T,S,k,M,j,P,E)},animate:function(e,t,o,n,i,a,r,s,l,d,c,u,h,f,g,p,m,z,v,b,y,w,x,C,T,S,k,M,j,P,E){return isDUO(arguments)?(arguments[0].target=this,zim.animate(arguments[0])):zim.animate(this,e,t,o,n,i,a,r,s,l,d,c,u,h,f,g,p,m,z,v,b,y,w,x,C,T,S,k,M,j,P,E)},pauseZimAnimate:function(){},stopZimAnimate:function(){},wiggle:function(e,t,o,n,i,a,r,s,l,d){return isDUO(arguments)?(arguments[0].target=this,zim.wiggle(arguments[0])):zim.wiggle(this,e,t,o,n,i,a,r,s,l,d)},loop:function(e,t,o,n,i){return zim.loop(this,e,t,o,n,i)},copyMatrix:function(e){return zim.copyMatrix(this,e)},pos:function(e,t){return zim.pos(this,e,t)},mov:function(e,t){return zim.mov(this,e,t)},alp:function(e){return zim.alp(this,e)},rot:function(e){return zim.rot(this,e)},siz:function(e,t,o){return zim.siz(this,e,t,o)},ske:function(e,t){return zim.ske(this,e,t)},reg:function(e,t){return zim.reg(this,e,t)},sca:function(e,t){return zim.sca(this,e,t)},scale:function(e,t){return zim.scale(this,e,t)},scaleTo:function(e,t,o,n,i){return isDUO(arguments)?(arguments[0].obj=this,zim.scaleTo(arguments[0])):zim.scaleTo(this,e,t,o,n,i)},fit:function(e,t,o,n,i){return isDUO(arguments)?(arguments[0].obj=this,zim.fit(arguments[0])):zim.fit(this,e,t,o,n,i)},outline:function(e,t){return isDUO(arguments)?(arguments[0].obj=this,zim.outline(arguments[0])):zim.outline(this,e,t)},addTo:function(e,t){return zim.addTo(this,e,t)},removeFrom:function(e){return zim.removeFrom(this,e)},added:function(e,t,o){return zim.added(this,e,t,o)},centerReg:function(e,t,o){return isDUO(arguments)?(arguments[0].obj=this,zim.centerReg(arguments[0])):zim.centerReg(this,e,t,o)},center:function(e,t,o){return isDUO(arguments)?(arguments[0].obj=this,zim.center(arguments[0])):zim.center(this,e,t,o)},place:function(e){return zim.place(this,e)},placeReg:function(e){return zim.placeReg(this,e)},expand:function(e,t){return zim.expand(this,e,t)},setMask:function(e){return zim.setMask(this,e)},cloneProps:function(e){return e.alpha=this.alpha,e.rotation=this.rotation,e.mouseEnabled=this.mouseEnabled,e.tickEnabled=this.tickEnabled,e.name=this.name,e.regX=this.regX,e.regY=this.regY,e.visible=this.visible,e.shadow=this.shadow,zim.copyMatrix(e,this),e.compositeOperation=this.compositeOperation,e.snapToPixel=this.snapToPixel,e.filters=null==this.filters?null:this.filters.slice(0),e.mask=this.mask,e.hitArea=this.hitArea,e.cursor=this.cursor,e._bounds=this._bounds,e},cloneChildren:function(e){e.children.length&&e.removeAllChildren();for(var t=e.children,o=0,n=this.children.length;o<n;o++){var i=this.children[o].clone();i.parent=e,t.push(i)}return e}};if(!zot(t)){var t=[];for(var n in o)t.push(n);return t}for(var i in o)o.hasOwnProperty(i)&&(e[i]=o[i]);return Object.defineProperty(e,"width",{enumerable:!0,get:function(){var e=this.getBounds();return zot(e)?null:e.width*this.scaleX},set:function(e){var t=this.getBounds();if(zot(t)||0==t.width)zog("width needs bounds set with setBounds()");else{var o=e/t.width;this.scaleX=this.scaleY=o}}}),Object.defineProperty(e,"height",{enumerable:!0,get:function(){var e=this.getBounds();return zot(e)?null:e.height*this.scaleY},set:function(e){var t=this.getBounds();if(zot(t)||0==t.height)zog("height needs bounds set with setBounds()");else{var o=e/t.height;this.scaleX=this.scaleY=o}}}),Object.defineProperty(e,"widthOnly",{enumerable:!0,get:function(){var e=this.getBounds();return zot(e)?null:e.width*this.scaleX},set:function(e){var t=this.getBounds();if(zot(t)||0==t.width)zog("widthOnly needs bounds set with setBounds()");else{var o=e/t.width;this.scaleX=o}}}),Object.defineProperty(e,"heightOnly",{enumerable:!0,get:function(){var e=this.getBounds();return zot(e)?null:e.height*this.scaleY},set:function(e){var t=this.getBounds();if(zot(t)||0==t.height)zog("heightOnly needs bounds set with setBounds()");else{var o=e/t.height;this.scaleY=o}}}),Object.defineProperty(e,"blendMode",{enumerable:!0,get:function(){return this.compositeOperation},set:function(e){this.compositeOperation=e}}),e}function zimplify(e){z_d("83.35"),zot(e)&&(e=[]),Array.isArray(e)||(e=[e]);var t=zimify(null,!0),o=["loop","stopZimAnimate","pauseZimAnimate","animate"];for(var n in zim)(-1==t.indexOf(n)||o.indexOf(n)>=0)&&-1==e.indexOf(n)&&(window[n]=zim[n])}"undefined"==typeof zon&&(zon=!1);var zog=console.log.bind(console),zim=function(e){return e.Wonder=function(t,o,n,i,a){function r(){u.length>0&&(e.async(a+"?wonder="+JSON.stringify(u)),u=[],f++)}function s(e,t){return zot(e)?(zog("zim.Wonder "+t+" - please provide a keyword"),!1):!d[t+"sOff"][e]}var l;if(l=zob(e.Wonder,arguments,"wid, client, app, notes, server",this))return l;if(z_d("82"),zot(t))zog("zim.Wonder() - please provide Wonder ID (see http://zimjs.com/code/wonder/)");else{zot(a)&&(a="http://54.237.229.197:3001/wonder");var d=this;zot(e.wonderSession)&&(e.wonderSession="W"+e.rand(1e5,999999));var c,u=[],h=setInterval(r,1e3),f=0,g=setInterval(function(){f>28&&(u.push({id:t,c:o,a:n,n:i,k:c,t:"e",v:"frequency max - terminated",s:e.wonderSession}),zog("zim.Wonder() - frequency max - terminated"),d.dispose()),f=0},3e4);this.countsOff={},this.timesOff={},this.ordersOff={},this.count=function(a){s(a,"count")&&(c=a,u.push({id:t,c:o,a:n,n:i,k:a,t:"c",v:1,s:e.wonderSession}))};var p={};this.timeStart=function(e){s(e,"time")&&(d.timeEnd(e),c=e,p[e]=(new Date).getTime())};var m={};this.timePause=function(e){s(e,"time")&&(m[e]||(m[e]=(new Date).getTime()))},this.timeUnpause=function(e){if(s(e,"time")&&m[e]){var t=(new Date).getTime()-m[e];p[e]&&(p[e]+=t),delete m[e]}},this.timeEnd=function(a){if(s(a,"time")&&p[a]){var r=m[a]?m[a]:(new Date).getTime(),l=Math.round((r-p[a])/1e3);delete m[a],delete p[a],u.push({id:t,c:o,a:n,n:i,k:a,t:"t",v:l,s:e.wonderSession})}},this.order=function(a,r){s(a,"order")&&(c=a,zot(r)?zog("zim.Wonder order() - please provide an item"):u.push({id:t,c:o,a:n,n:i,k:a,t:"o",v:r,s:e.wonderSession}))},this.countOff=function(e){d.countsOff[e]=1},this.countOn=function(e){delete d.countOff[e]},this.timeOff=function(e){d.timesOff[e]=1},this.timeOn=function(e){delete d.timesOff[e]},this.orderOff=function(e){d.ordersOff[e]=1},this.orderOn=function(e){delete d.ordersOff[e]},this.dispose=function(){r(),clearInterval(h),clearInterval(g)}}},e}((zim=function(e){function t(e,t){t?(e.mouseChildren=!0,e.mouseEnabled=!0,e._enabled=!0):(e.mouseChildren=!1,e.mouseEnabled=!1,e._enabled=!1)}if(e.shuffle=function(e){if(z_d("8"),!zot(e)){var t,o,n=e.length;if(0==n)return e;for(;--n;)t=Math.floor(Math.random()*(n+1)),o=e[n],e[n]=e[t],e[t]=o;return e}},e.rand=function(e,t,o,n){if(z_d("9"),zot(e)&&zot(t))return Math.random();(zot(e)||isNaN(e))&&(e=0),(zot(t)||isNaN(t))&&(t=0),e%1==0&&t%1==0||(o=!1),zot(o)&&(o=!0),n&&Math.random()>.5&&(e*=-1,t*=-1),o&&(e>t?e++:t>e&&t++);var i;return 0==e&&0==t?0:(i=0==t?Math.random()*e:Math.min(e,t)+Math.random()*(Math.max(e,t)-Math.min(e,t)),o?Math.floor(i):i)},e.loop=function(t,o,n,i,a,r){function s(e){return zot(a)&&(a=n?e:0),zot(r)&&(r=n?0:e),n&&r>a||!n&&a>r?0:(a<0&&r)<0||a>e&&r>e?0:(a=Math.max(0,Math.min(a,e)),r=Math.max(0,Math.min(r,e)),Math.floor((n?a-r:r-a)/i)+1)}var l;if(l=zob(e.loop,arguments,"obj, call, reverse, step, start, end"))return l;if(z_d("9.5"),!zot(t)&&!zot(o)){zot(n)&&(n=!1),(zot(i)||i<=0)&&(i=1);var d="number"==typeof t?"number":t.constructor===Array?"array":t.constructor==={}.constructor?"object":"invalid";if("invalid"!=d)if("number"==d||"array"==d){if(0==(g=s((u="number"==d?t:t.length)-1)))return;if(n)for(f=a;f>=r;f-=i){if("number"==d)c=o(f,g,a,r,t);else c=o(t[f],f,g,a,r,t);if(void 0!==c)return c}else for(f=a;f<=r;f+=i){if("number"==d)c=o(f,g,a,r,t);else var c=o(t[f],f,g,a,r,t);if(void 0!==c)return c}}else if("object"==d){var u=0,h=[];for(var f in t)u++,h.push(f);var g=s(u-1);if(0==g)return;if(n){for(f=a;f>=r;f-=i)if(void 0!==(c=o(h[f],t[h[f]],f,g,a,r,t)))return c}else for(f=a;f<=r;f+=i)if(void 0!==(c=o(h[f],t[h[f]],f,g,a,r,t)))return c}}},e.timeout=function(e,t){function o(){var a=Date.now();if(n.time+=a-i,i=a,n.time>=e)return t(n),void n.clear();n.rid=requestAnimationFrame(o)}if(z_d("9.7"),!zot(t)&&"function"==typeof t){zot(e)&&(e=1e3),e=zik(e);var n={startTime:Date.now(),time:0,paused:!1},i=n.startTime;return n.pause=function(e){zot(e)&&(e=!0),e?cancelAnimationFrame(n.rid):(i=Date.now(),o()),n.paused=e},n.clear=function(){n&&cancelAnimationFrame(n.rid);for(var e in n)delete n[e];n.pause=function(){},n.clear=function(){}},o(),n}},e.interval=function(e,t,o,n){function i(){r.startTime=Date.now(),r.interval=zik(r.time),r.id=setTimeout(function(){r.paused||r.active&&(r.rid=requestAnimationFrame(i),r.count++,t(r),a())},r.interval)}function a(){-1!=o&&r.count>=(n?r.total-1:r.total)&&r.clear()}if(z_d("9.8"),!zot(t)&&"function"==typeof t&&(zot(e)&&(e=1e3),zot(n)&&(n=!1),zot(o)||!(isNaN(o)||o<=0))){zot(o)&&(o=-1);var r={count:0,total:o,paused:!1,time:e,active:!0};n&&setTimeout(function(){t(r),a()},10);var s;return r.pause=function(e,o){zot(e)&&(e=!0),e?(clearTimeout(s),clearTimeout(r.id),cancelAnimationFrame(r.rid),r.pauseTimeLeft=r.interval-(Date.now()-r.startTime)):(s=setTimeout(function(){r.count++,t(r),i(),a()},o?0:r.pauseTimeLeft),r.pauseTimeLeft=null),r.paused=e},r.clear=function(){r.active=!1,clearTimeout(s),cancelAnimationFrame(r.rid),clearTimeout(r.id);var e=r.count;for(var t in r)delete r[t];r.active=!1,r.count=e,r.pause=function(){},r.clear=function(){}},i(),r}},e.copy=function(t,o){if(z_d("10"),zot(o)&&(o=!1),null==t||!(t instanceof Array||t.constructor=={}.constructor))return o&&t.clone?t.clone():t;if(t instanceof Array){for(var n=[],i=0;i<t.length;i++)n[i]=e.copy(t[i],o);return n}if(t.constructor=={}.constructor){var a={};for(var r in t){var s=e.copy(t[r],o);t.hasOwnProperty(r)&&(a[r]=s)}return a}},e.arraysEqual=function(t,o,n){if(z_d("11"),zot(t)||zot(o))return!1;if(zot(n)&&(n=!0),t.length!=o.length)return!1;for(var i=0;i<t.length;i++)if(t[i]instanceof Array&&o[i]instanceof Array){if(!e.arraysEqual(t[i],o[i],n))return!1}else{if(n&&t[i]!=o[i])return!1;if(!n)return e.arraysEqual(t.sort(),o.sort(),!0)}return!0},e.isEmpty=function(e){if(z_d("11.5"),!zot(e)){var t=0;for(var o in e){t++;break}return 0==t}},e.merge=function(){z_d("12");var e,t,o={};for(e=0;e<arguments.length;e++)for(t in arguments[e])arguments[e].hasOwnProperty(t)&&(o[t]=arguments[e][t]);return o},e.zut=function(e){if(zot(e)||"object"==typeof e)return!0},e.decimals=function(t,o,n,i,a,r,s){if(z_d("13"),zot(t))return 0;zot(o)&&(o=1),zot(n)&&(n=0),zot(i)&&(i=0),zot(i)&&(i=0),zot(a)&&(a=!0),zot(r)&&(r=!1);var l=Math.round(t*Math.pow(10,o))/Math.pow(10,o),d=e.sign(l);if(n>0){var c=String(l).indexOf("."),u=String(l).length;c<0&&(c=u++,l+=".");for(f=0;f<n-(u-c-1);f++)l+="0"}if(i>0){-1==d&&(l=l.substr(1,l.length-1));for(var c=String(l).indexOf("."),u=String(l).length,h=c<0?u:c,f=0;f<i-h;f++)l="0"+l;-1==d&&(l="-"+l)}return n+i>0&&!a&&0==Number(l)&&(l=0),r&&(l=String(l).replace(".",":")),e.zut(s)?l:null},e.sign=function(e){return z_d("13.1"),e?e<0?-1:1:0},e.constrain=function(e,t,o,n){if(z_d("13.2"),!zot(e))return zot(t)&&(t=0),zot(o)&&(o=Number.MAX_VALUE),o<t&&(max2=t,o=t,t=max2),zot(n)&&(n=!1),n&&e<0?Math.max(-o,Math.min(e,-t)):Math.max(t,Math.min(e,o))},e.dist=function(e,t,o,n){if(z_d("13.3"),!zot(e)&&!zot(t))return zot(o)&&(o=0),zot(n)&&(n=0),Math.sqrt(Math.pow(o-e,2)+Math.pow(n-t,2))},e.angle=function(e,t,o,n){if(z_d("13.4"),!zot(e)&&!zot(t))return zot(o)&&(o=e,e=0),zot(n)&&(n=t,t=0),(180*Math.atan2(n-t,o-e)/Math.PI+360)%360},e.makeID=function(e,t,o){z_d("13.5"),zot(e)&&(e="mixed"),zot(t)&&(t=5),zot(o)&&(o="uppercase");var n,i=[2,3,4,5,6,7,8,9],a="abcdefghjkmnpqrstuvwxyz".split("");n=e.constructor===Array?e:"numbers"==e?i:"letters"==e?a:i.concat(a);for(var r,s,l="",d=0;d<t;d++)r=n[Math.floor(Math.random()*t)],s=Math.random(),"uppercase"==o||"mixed"==o&&s>.5?r.toUpperCase&&(r=r.toUpperCase()):r.toLowerCase&&(r=r.toLowerCase()),l+=String(r);return l},e.Damp=function(t,o){z_d("14");var n;if(n=zob(e.Damp,arguments,"startValue, damp",this))return n;this.lastValue=zot(t)?0:t,this.damp=zot(o)?.1:o},e.Damp.prototype.convert=function(e){return this.lastValue=this.lastValue+(e-this.lastValue)*this.damp},e.Damp.prototype.immediate=function(e){return this.lastValue=e,this},e.Proportion=function(t,o,n,i,a,r){var s;if(s=zob(e.Proportion,arguments,"baseMin, baseMax, targetMin, targetMax, factor, targetRound",this))return s;z_d("15"),zot(n)&&(n=0),zot(i)&&(i=1),zot(a)&&(a=1),zot(r)&&(r=!1);var l,d;this.convert=function(e){if(!isNaN(e))return e=Math.max(e,t),e=Math.min(e,o),l=(e-t)/(o-t),d=a>0?n+(i-n)*l:i-(i-n)*l,r&&(d=Math.round(d)),d}},e.ProportionDamp=function(t,o,n,i,a,r,s){function l(){isNaN(c)||(c=Math.max(c,t),c=Math.min(c,o),u=(c-t)/(o-t),h=i-n,z+=(g=(m=f=r>0?n+h*u:i-h*u)-z)*p.damp)}var d;if(d=zob(e.ProportionDamp,arguments,"baseMin, baseMax, targetMin, targetMax, damp, factor, targetRound",this))return d;z_d("16"),zot(n)&&(n=0),zot(i)&&(i=1),zot(a)&&(a=.1),zot(r)&&(r=1),zot(s)&&(s=!1),this.damp=a;var c,u,h,f,g,p=this,m=0,z=0;c=t,z=n;var v=setInterval(l,20);this.immediate=function(e){return p.convert(e),l(),z=f,s&&(z=Math.round(z)),p},this.convert=function(e){return c=e,s?Math.round(z):z},this.dispose=function(){return clearInterval(v),!0}},e.Dictionary=function(e){z_d("17"),this.length=0,this.unique=e;var t=this.objects=[],o=this.values=[];this.add=function(e,n){zot(e)||(zot(n)&&(n=!0),this.unique&&this.remove(e),t.push(e),o.push(n),this.length++)},this.at=function(e){if(!zot(e)){var n=t.indexOf(e);return n>-1?o[n]:null}},this.remove=function(e){if(!zot(e)){var n=t.indexOf(e);n>-1&&(t.splice(n,1),o.splice(n,1),this.length--)}},this.dispose=function(){return t=null,o=null,this.length=null,!0}},e.swapProperties=function(e,t,o){if(z_d("17.1"),zot(t)||zot(o)||zot(t[e])||zot(o[e]))return!1;var n=o[e];return o[e]=t[e],t[e]=n,!0},e.swapHTML=function(t,o){return z_d("17.2"),e.swapProperties("innerHTML",zid(t),zid(o))},e.scrollX=function(t,o){return z_d("18"),e.abstractScroll("X","Left",t,o)},e.scrollY=function(t,o){return z_d("19"),e.abstractScroll("Y","Top",t,o)},e.abstractScroll=function(t,o,n,i){z_d("20");var a="X"==t?"Y":"X";if(zot(n)){var r=0,s=navigator.appName;if(-1!=navigator.userAgent.indexOf("Safari")||"Safari"==s)r=1;return r||"CSS1Compat"!=document.compatMode?document.body["scroll"+o]:document.documentElement["scroll"+o]}if(zot(i))window.scrollTo(e["scroll"+a](),n);else{i<50&&(i=50);var l=i/50,d=e["scroll"+t](),c=(n-d)/l,u=0,h=setInterval(function(){u++,d+=c,window.scrollTo(e["scroll"+a](),d),u>=l&&(window.scrollTo(e["scroll"+a](),n),clearInterval(h))},50)}return n},e.windowWidth=function(){return z_d("21"),isNaN(window.innerWidth)?window.clientWidth:window.innerWidth},e.windowHeight=function(){return z_d("22"),isNaN(window.innerHeight)?window.clientHeight:window.innerHeight},e.urlEncode=function(e){z_d("23");var e=(e+"").toString();return encodeURIComponent(e).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A").replace(/%20/g,"+")},e.urlDecode=function(e){return z_d("24"),decodeURIComponent((e+"").replace(/\+/g,"%20"))},e.setCookie=function(e,t,o){if(z_d("25"),!zot(e)&&!zot(t)){if(o){var n=new Date;n.setTime(n.getTime()+24*o*60*60*1e3);i="; expires="+n.toGMTString()}else var i="";return document.cookie=e+"="+escape(t)+i+"; path=/",!0}},e.getCookie=function(e){z_d("26");var t,o=document.cookie.split(/;\s*/),i=new Array;for(n=0;n<o.length;n++)i[(t=o[n].split("="))[0]]=t[1];if(void 0!==i[e])return unescape(i[e])},e.deleteCookie=function(t){return z_d("27"),!zot(e.getCookie(t))&&(e.setCookie(t,"",-1),!0)},e.convertColor=function(e,t){if(zot(t)&&(t=!1),t)3==(e=e.replace("#","")).length&&(e=e.charAt(0)+e.charAt(0)+e.charAt(1)+e.charAt(1)+e.charAt(2)+e.charAt(2));else if("#"==e.charAt(0))return e;var o=["black","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgrey","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgrey","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],n=["000000","f0f8ff","faebd7","00ffff","7fffd4","f0ffff","f5f5dc","ffe4c4","ffebcd","0000ff","8a2be2","a52a2a","deb887","5f9ea0","7fff00","d2691e","ff7f50","6495ed","fff8dc","dc143c","00ffff","00008b","008b8b","b8860b","a9a9a9","a9a9a9","006400","bdb76b","8b008b","556b2f","ff8c00","9932cc","8b0000","e9967a","8fbc8f","483d8b","2f4f4f","2f4f4f","00ced1","9400d3","ff1493","00bfff","696969","696969","1e90ff","b22222","fffaf0","228b22","ff00ff","dcdcdc","f8f8ff","ffd700","daa520","808080","808080","008000","adff2f","f0fff0","ff69b4","cd5c5c","4b0082","fffff0","f0e68c","e6e6fa","fff0f5","7cfc00","fffacd","add8e6","f08080","e0ffff","fafad2","d3d3d3","d3d3d3","90ee90","ffb6c1","ffa07a","20b2aa","87cefa","778899","778899","b0c4de","ffffe0","00ff00","32cd32","faf0e6","ff00ff","800000","66cdaa","0000cd","ba55d3","9370db","3cb371","7b68ee","00fa9a","48d1cc","c71585","191970","f5fffa","ffe4e1","ffe4b5","ffdead","000080","fdf5e6","808000","6b8e23","ffa500","ff4500","da70d6","eee8aa","98fb98","afeeee","db7093","ffefd5","ffdab9","cd853f","ffc0cb","dda0dd","b0e0e6","800080","663399","ff0000","bc8f8f","4169e1","8b4513","fa8072","f4a460","2e8b57","fff5ee","a0522d","c0c0c0","87ceeb","6a5acd","708090","708090","fffafa","00ff7f","4682b4","d2b48c","008080","d8bfd8","ff6347","40e0d0","ee82ee","f5deb3","ffffff","f5f5f5","ffff00","9acd32"];return t?o[-1!=n.indexOf(e.toLowerCase())?n.indexOf(e):0]:"#"+n[-1!=o.indexOf(e.toLowerCase())?o.indexOf(e):0]},e.mobile=function(e){return z_d("28"),zot(e)&&(e=!0),/ip(hone|od|ad)/i.test(navigator.userAgent)?"ios":/android|nexus/i.test(navigator.userAgent)?"android":/blackberry/i.test(navigator.userAgent)?"blackberry":/nokia|phone|mobile/i.test(navigator.userAgent)?"windows":/opera mini|webos/i.test(navigator.userAgent)?"other":!(!e||void 0===window.orientation)},e.async=function(t,o){if(z_d("29"),!zot(t)){var n=document.createElement("script");if(o){var i=o.toString().split(/\n/,1)[0].match(/^function\s?([^\s(]*)/)[1];e.async[i]=function(){var e=n;return function(t){e&&e.parentNode.removeChild(e),e=null,o(t)}}()}else e.async.z_s&&e.async.z_s.parentNode&&e.async.z_s.parentNode.removeChild(e.async.z_s),e.async.z_s=n;t.match(/\?/)||(t+="?"),n.setAttribute("src",t+"&r="+Math.random()),document.getElementsByTagName("head")[0].appendChild(n)}},e.extend=function(t,o,n,i,a){function r(){this.constructor=t}var s;if(s=zob(e.extend,arguments,"subclass, superclass, override, prefix, prototype"))return s;if(!zot(t)&&!zot(o)||!zon){zot(i)&&(i="super"),zot(n)&&(n=[]),Array.isArray(n)||(n=[n]),zot(a)&&(a=!0);var l={};for(var d in t.prototype)Object.defineProperty(l,d,Object.getOwnPropertyDescriptor(t.prototype,d));r.prototype=o.prototype,t.prototype=new r;for(d in l)Object.defineProperty(t.prototype,d,Object.getOwnPropertyDescriptor(l,d));var c=t.prototype,u=Object.getPrototypeOf&&Object.getPrototypeOf(c)||c.__proto__;if(u){c[(i+="_")+"constructor"]=u.constructor;for(var h,f=0;f<n.length;f++)"function"==typeof u[h=n[f]]&&(c[i+h]=u[h]);if(a)for(h in u)c.hasOwnProperty(h)&&"function"==typeof u[h]&&(c[i+h]=u[h])}return t}zog("zim.extend() - please supply a class and its superclass")},"undefined"==typeof createjs)return zon&&zog("ZIM >= 4.3.0 requires createjs namespace to be loaded (import createjs before zim)"),e;e.Container=function(t,o,n,i){if(z_d("50.5"),this.cjsContainer_constructor(),zot(n))var a=0,r=t,s=0,l=o;else var a=t,r=n,s=o,l=i;zot(l)&&(l=r),zot(t)||this.setBounds(a,s,r,l),this.clone=function(){return this.cloneChildren(this.cloneProps(new e.Container(a,s,r,l)))}},zimify(e.Container.prototype),e.extend(e.Container,createjs.Container,"clone","cjsContainer",!1),e.Shape=function(t,o,n,i,a){z_d("50.6"),this.cjsShape_constructor(a);var r=this;if(zot(n))var s=0,l=t,d=0,c=o;else var s=t,l=n,d=o,c=i;zot(c)&&(c=l),zot(t)||this.setBounds(s,d,l,c),this.clone=function(t){zot(t)&&(t=!0);var o=r.cloneProps(new e.Shape(l,c,s,d,a));return o.graphics=t?r.graphics.clone():r.graphics,o}},e.extend(e.Shape,createjs.Shape,"clone","cjsShape",!1),zimify(e.Shape.prototype),e.Bitmap=function(t,o){z_d("50.7"),this.cjsBitmap_constructor(t),this.id=o,this.clone=function(){return this.cloneProps(new e.Bitmap(t,o))}},e.extend(e.Bitmap,createjs.Bitmap,"clone","cjsBitmap",!1),zimify(e.Bitmap.prototype),e.Sprite=function(t,o,n,i,a,r,s,l,d,c,u,h,f,g,p){var m;if(m=zob(e.Sprite,arguments,"image, cols, rows, count, offsetX, offsetY, spacingX, spacingY, width, height, animations, json, id, globalControl, spriteSheet",this))return m;z_d("50.8");var z,v=this;if(zot(h)&&!zot(t)){zot(o)&&(o=1),zot(n)&&(n=1),zot(i)&&(i=o*n),zot(a)&&(a=0),zot(r)&&(r=0),zot(s)&&(s=0),zot(l)&&(l=0),zot(d)&&(d=t.width),zot(c)&&(c=t.height);var b=(d-a+s)/o-s,y=(c-r+l)/n-l,w=[],x=0;e:for(var C=0;C<n;C++)for(var T=0;T<o;T++){if(++x>i)break e;w.push([a+T*(b+s),r+C*(y+l),b,y])}var S={images:[t.image],frames:w,animations:u};z=new createjs.SpriteSheet(S)}else p?u=(z=p).animations:(u=h.animations,z=new createjs.SpriteSheet(h));this.animations=u,this.cjsSprite_constructor(z),zot(f)&&(f=e.makeID()),this.id=f,zot(g)&&(g=!0),v.globalControl=g,this.parseFrames=function(e,t,o){function n(e){Array.isArray(e)?i(e):e.constructor=={}.constructor?a(e):isNaN(e)||s.push({f:Math.floor(e),s:1})}function i(e){r(e[0],e[1],e[3]),e[2]&&!zot(v.animations[e[2]])&&n(v.animations[e[2]])}function a(e){if(!zot(e.frames)){zot(e.speed)&&(e.speed=1);for(var t=0;t<e.frames.length;t++)s.push({f:e.frames[t],s:e.speed});e.next&&!zot(v.animations[e.next])&&n(v.animations[e.next])}}function r(e,t,o){zot(o)&&(o=1);for(var n=e;n<=t;n++)s.push({f:n,s:o})}var s=[];if(zot(e))zot(t)&&(t=0),zot(o)&&(o=v.totalFrames-1),r(t,o);else{if(zot(v.animations)||zot(v.animations[e]))return[];n(v.animations[e])}return s},this.run=function(t,o,n,i,a,r,s,l,d,c,h,f,g,p,m,b,y,w,x,C,T,S,k,M,j){function P(e){function t(e){"number"==typeof e?T=S=e:e.constructor=={}.constructor?(zot(e.frames)?(zon&&zog("zim.Sprite() - run() does not support nested labels - see docs"),T=0,S=z.getNumFrames()-1):t(e.frames),T=e.frames):(T=e[0],S=e[e.length-1])}return t(u[e]),[T,S]}var E;if(E=zob(this.run,arguments,"time, label, call, params, wait, waitedCall, waitedParams, loop, loopCount, loopWait, loopCall, loopParams, loopWaitCall, loopWaitParams, rewind, rewindWait, rewindCall, rewindParams, rewindWaitCall, rewindWaitParams, startFrame, endFrame, tweek, id, globalControl"))return E;var B;if(zot(k)&&(k=1),zot(M)||(v.id=M),zot(j)||(v.globalControl=j),Array.isArray(o)){var O,A;B=[];for(var I,D=0,X=0;X<o.length;X++){if(O=o[X],zot(O.label)||zot(u)||zot(u[O.label])){if(zot(O.startFrame)&&zot(O.endFrame)){zon&&zog("zim.Sprite - run() - bad multiple label format - see docs");continue}zot(O.endFrame)&&(O.endFrame=z.getNumFrames()-1),zot(O.startFrame)&&(O.startFrame=0),T=O.startFrame,S=O.endFrame}else{_=P(O.label);T=_[0],S=_[1]}delete O.startFrame,delete O.endFrame,O.obj=e.merge(O.obj,{frame:S}),O.set=e.merge(O.set,{frame:T}),zot(O.wait)&&(O.wait=D*k),A=O.label,delete O.label,B.push(O),D=0;var L=zot(O.time)?t:O.time;S-T>0&&(D=L/(S-T)/2),0==X&&(I=T)}if(T=I,0==B.length)return this;1==B.length&&(t=B[0].time,o=A,B=null)}if(!Array.isArray(o)){if(zot(o)||zot(u)||zot(u[o]))o=null,zot(T)&&(T=0),zot(S)&&(S=z.getNumFrames()-1);else{var _=P(o);T=_[0],S=_[1]}B={frame:S},{frame:T}}if(zot(t)&&(t=1e3),v.running&&v.stopZimAnimate(v.id),v.running=!0,!Array.isArray(B)){D=0;S-T>0&&(D=t/(S-T)/2),zot(c)&&(c=D*k),zot(b)&&(b=D*k)}v.frame=T;return e.animate({target:v,obj:B,time:t,ease:"linear",call:function(){n&&"function"==typeof n&&n(i),v.running=!1},params:i,wait:a,wait:r,wait:s,loop:l,loopCount:d,loopWait:c,loopCall:h,loopParams:f,loopWaitCall:g,loopWaitParams:p,rewind:m,rewindWait:b,rewindCall:y,rewindParams:w,rewindWaitCall:x,rewindWaitParams:C,override:!1,id:v.id}),v.runPaused=!1,v},this.runPaused=!0,this.pauseRun=function(t){zot(t)&&(t=!0),v.runPaused=t,v.globalControl?e.pauseZimAnimate(t,v.id):v.pauseZimAnimate(t,v.id)},this.stopRun=function(){v.runPaused=!0,v.running=!1,v.globalControl?e.stopZimAnimate(v.id):v.stopZimAnimate(v.id)},Object.defineProperty(this,"frame",{get:function(){return this.currentFrame},set:function(e){zot(e)&&(e=0),e=Math.round(e),this.paused?this.gotoAndStop(e):this.gotoAndPlay(e)}}),Object.defineProperty(this,"totalFrames",{get:function(){return z.getNumFrames()},set:function(e){zog("zim.Sprite - totalFrames is read only")}}),this.clone=function(){return this.cloneProps(new e.Sprite(t,o,n,i,a,r,s,l,d,c,u,h,f,g,p))}},e.extend(e.Sprite,createjs.Sprite,"clone","cjsSprite",!1),zimify(e.Sprite.prototype),e.MovieClip=function(t,o,n,i){var a;if(a=zob(e.MovieClip,arguments,"mode, startPosition, loop, labels",this))return a;z_d("50.9"),this.cjsMovieClip_constructor(t,o,n,i),this.clone=function(){return this.cloneProps(new e.MovieClip(t,o,n,i))}},e.extend(e.MovieClip,createjs.MovieClip,"clone","cjsMovieClip",!1),zimify(e.MovieClip.prototype),e.Circle=function(t,o,n,i,a){function r(){v.c(),g=v.f(c).command,(zot(h)||h>0)&&(zot(u)&&zot(h)||(zot(u)&&(u="black"),p=v.s(u).command,m=v.ss(h).command,a&&(z=v.sd([10,10],5).command))),v.dc(0,0,d),l.setBounds(-d,-d,2*d,2*d)}var s;if(s=zob(e.Circle,arguments,"radius, color, borderColor, borderWidth, dashed",this))return s;z_d("51"),this.zimContainer_constructor(),zot(t)&&(t=50),zot(a)&&(a=!1),!zot(n)&&zot(i)?i=1:!zot(i)&&zot(n)&&(n="black"),zot(o)&&(o=i>0?"rgba(0,0,0,0)":"black");var l=this,d=t,c=o,u=n,h=i;this.mouseChildren=!1;var f=this.shape=new createjs.Shape;this.addChild(f);var g,p,m,z,v=f.graphics;r(),Object.defineProperty(l,"color",{get:function(){return c},set:function(e){zot(e)&&(e="black"),c=e,g.style=c}}),Object.defineProperty(l,"borderColor",{get:function(){return u},set:function(e){u=e,p?p.style=u:r()}}),Object.defineProperty(l,"borderWidth",{get:function(){return h},set:function(e){e>0||(e=0),h=e,m&&0!=h?(m.width=h,a&&(z.segments=[20,10],z.offset=5)):r()}}),Object.defineProperty(l,"radius",{get:function(){return d},set:function(e){d=e,r()}}),this.clone=function(){return l.cloneProps(new e.Circle(l.radius,l.color,l.borderColor,l.borderWidth,a))}},e.extend(e.Circle,e.Container,"clone","zimContainer",!1),e.Rectangle=function(t,o,n,i,a,r,s,l){function d(){b.c(),m=b.f(h).command,(zot(g)||g>0)&&(zot(f)&&zot(g)||(zot(f)&&(f="black"),z=b.s(f).command,v=b.ss(g).command,l&&(borderDashedObj=b.sd([10,10],5).command))),r>0?s?b.rc(0,0,t,o,r,r,0,0):b.rr(0,0,t,o,r):b.r(0,0,t,o),u.setBounds(0,0,t,o)}var c;if(c=zob(e.Rectangle,arguments,"width, height, color, borderColor, borderWidth, corner, flatBottom, dashed",this))return c;z_d("52"),this.zimContainer_constructor(),zot(t)&&(t=100),zot(o)&&(o=100),zot(r)&&(r=0),zot(s)&&(s=!1),zot(l)&&(l=!1),!zot(i)&&zot(a)?a=1:!zot(a)&&zot(i)&&(i="black"),zot(n)&&(n=a>0?"rgba(0,0,0,0)":"black");var u=this,h=n,f=i,g=a;this.mouseChildren=!1;var p=this.shape=new createjs.Shape;this.addChild(p);var m,z,v,b=p.graphics;d(),Object.defineProperty(u,"color",{get:function(){return h},set:function(e){zot(e)&&(e="black"),h=e,m.style=h}}),Object.defineProperty(u,"borderColor",{get:function(){return f},set:function(e){f=e,z?z.style=f:d()}}),Object.defineProperty(u,"borderWidth",{get:function(){return g},set:function(e){e>0||(e=0),g=e,v&&0!=g?(v.width=g,l&&(borderDashedObj.segments=[20,10],borderDashedObj.offset=5)):d()}}),this.clone=function(){return u.cloneProps(new e.Rectangle(t,o,u.color,u.borderColor,u.borderWidth,r,s,l))}},e.extend(e.Rectangle,e.Container,"clone","zimContainer",!1),e.Triangle=function(t,o,n,i,a,r,s,l,d){function c(){x.c(),b=x.f(f).command,(zot(p)||p>0)&&(zot(g)&&zot(p)||(zot(g)&&(g="black"),y=x.s(g).command,w=x.ss(p).command,d&&(borderDashedObj=x.sd([10,10],5).command))),x.mt(0,0),h.one={x:0,y:0},x.lt(t,0),h.two={x:t,y:0};var e=180*Math.acos((Math.pow(bb,2)+Math.pow(cc,2)-Math.pow(aa,2))/(2*bb*cc))/Math.PI,n=180*Math.asin(bb*Math.sin(e*Math.PI/180)/aa)/Math.PI,i=[e,n,180-e-n];h.angles=[i[z[1]],i[z[2]],i[z[0]]];var a=h.angles[1],r=Math.cos(a*Math.PI/180)*o,c=Math.sin(a*Math.PI/180)*o,u=Math.max(t,t-r),m=c;h.setBounds(0,0,u,m),v.y=m,x.lt(t-r,0-c),h.three={x:t-r,y:0-c},x.cp(),s&&(h.regX=u/2,h.regY=m/2),l&&(h.shape.y+=l)}var u;if(u=zob(e.Triangle,arguments,"a, b, c, color, borderColor, borderWidth, center, adjust, dashed",this))return u;z_d("53"),this.zimContainer_constructor(),zot(t)&&(t=100),zot(o)&&(o=t),zot(n)&&(n=o),-1==n&&(n=Math.sqrt(Math.pow(t,2)+Math.pow(o,2))),zot(s)&&(s=!0),zot(l)&&(l=0),!zot(a)&&zot(r)?r=1:!zot(r)&&zot(a)&&(a="black"),zot(i)&&(i=r>0?"rgba(0,0,0,0)":"black");var h=this,f=i,g=a,p=r;this.mouseChildren=!1;var m=[t,o,n];m.sort(function(e,t){return t-e}),aa=m[0],bb=m[1],cc=m[2];var z=[m.indexOf(t),m.indexOf(o),m.indexOf(n)];if(aa>bb+cc)zog("zim build - Triangle(): invalid triangle lengths");else{var v=this.shape=new createjs.Shape;this.addChild(v);var b,y,w,x=v.graphics;c(),Object.defineProperty(h,"color",{get:function(){return f},set:function(e){zot(e)&&(e="black"),f=e,b.style=f}}),Object.defineProperty(h,"borderColor",{get:function(){return g},set:function(e){g=e,y?y.style=g:c()}}),Object.defineProperty(h,"borderWidth",{get:function(){return p},set:function(e){e>0||(e=0),p=e,w&&0!=p?(w.width=p,d&&(borderDashedObj.segments=[20,10],borderDashedObj.offset=5)):c()}}),this.clone=function(){return h.cloneProps(new e.Triangle(t,o,n,h.color,h.borderColor,h.borderWidth,s,l,d))}}},e.extend(e.Triangle,e.Container,"clone","zimContainer"),e.Blob=function(t,o,n,i,a,r,s,l,d,c,u,h,f,g){function p(e){var t={mirror:frame.purple,free:frame.yellow,none:frame.blue};return t[e]?t[e]:frame.pink}function m(){S.c(),colorObj=S.f(y).command,(zot(x)||x>0)&&(zot(w)&&zot(x)||(zot(w)&&(w="black"),borderColorObj=S.s(w).command,borderWidthObj=S.ss(x).command,g&&(borderDashedObj=S.sd([10,10],5).command)));f=(n=b.points[0][0]).localToLocal(b.points[0][3].x,b.points[0][3].y,C);S.mt(f.x,f.y),k.c().s(frame.darker).ss(1);for(var e=0;e<b.points.length;e++){var t=e,o=(e+1)%b.points.length,n=b.points[t][0],i=b.points[t][3],a=b.points[t][1],r=b.points[t][2],s=b.points[o][0],l=b.points[o][3],d=b.points[o][1],c=(b.points[o][2],n.localToLocal(r.x,r.y,C)),u=s.localToLocal(d.x,d.y,C),h=s.localToLocal(l.x,l.y,C);S.bt(c.x,c.y,u.x,u.y,h.x,h.y);var f=n.localToLocal(i.x,i.y,C),p=n.localToLocal(a.x,a.y,C);k.mt(f.x,f.y).lt(p.x,p.y),k.mt(f.x,f.y).lt(c.x,c.y)}}var z;if(z=zob(e.Blob,arguments,"color, borderColor, borderWidth, points, radius, controlLength, controlType, lockControlType, showControls, lockControls, dblclick, dblclickDrag, ctrlclick, dashed",this))return z;z_d("53.5"),zot(a)&&(a=100),this.zimContainer_constructor(-a,-a,2*a,2*a),zot(g)&&(g=!1),!zot(o)&&zot(n)?n=1:!zot(n)&&zot(o)&&(o="black"),zot(t)&&(t=n>0?"rgba(0,0,0,0)":frame.green),zot(i)&&(i=4);var v="number"==typeof i?i:i.length;zot(r)&&(r=4*a/v),zot(s)&&(s="straight"),zot(l)&&(l=!1),zot(d)&&(d=!0),zot(c)&&(c=!1),zot(u)&&(u=!1),zot(h)&&(h=!0),zot(f)&&(f=!1),this.dblclick=u,this.dblclickDrag=h,this.lockControlType=l,this.ctrlclick=f;var b=this,y=(this.types=["mirror","straight","free","none"],t),w=o,x=n,C=this.shape=(new e.Shape).addTo(this),T=this.sticks=(new e.Shape).addTo(this),S=C.graphics,k=T.graphics,M=this.sets=(new e.Container).addTo(this).drag();this.points=[];for(var j,P,E,B,O,A,I,D,X=0;X<v;X++){if(E=(new e.Container).addTo(M),"number"==typeof i){var L=zik(r);(P=new e.Container(L,a).reg(L/2,a).addTo(this)).rotation=X/v*360,A=new e.Circle(8,frame.light,frame.dark,2).centerReg(P).pos(L/2,0),B=new e.Rectangle(10,10,p(s),frame.dark,2).centerReg(P).pos(0,0),O=new e.Rectangle(10,10,p(s),frame.dark,2).centerReg(P).pos(L,0);var _=P.localToLocal(A.x,A.y,M);A.x=_.x,A.y=_.y,A.addTo(E);var Y=P.localToLocal(B.x,B.y,M);B.x="none"==s?0:Y.x-A.x,B.y="none"==s?0:Y.y-A.y,B.addTo(E);var R=P.localToLocal(O.x,O.y,M);O.x="none"==s?0:R.x-A.x,O.y="none"==s?0:R.y-A.y,O.addTo(E),E.pos(A.x,A.y),A.x=0,A.y=0,"none"==s&&A.addTo(E)}else I=(D=i[X])[8]?D[8]:s,E=(new e.Container).addTo(M).pos(D[0],D[1]),A=new e.Circle(8,frame.light,frame.dark,2).centerReg(E).pos(D[6],D[7]),B=new e.Rectangle(10,10,p(I),frame.dark,2).centerReg(E,0).pos(D[2],D[3]),O=new e.Rectangle(10,10,p(I),frame.dark,2).centerReg(E,0).pos(D[4],D[5]);A.set=E,A.rect1=B,A.rect2=O,A.index=X,A.on("dblclick",function(e){if(!b.lockControlType){var t=e.target,o=b.points[t.index][4]?b.points[t.index][4]:s;Math.abs(t.rect1.x)<=2&&Math.abs(t.rect1.y)<=2&&Math.abs(t.rect2.x)<=2&&Math.abs(t.rect2.y)<=2&&(o="none"),"none"==o&&t.parent.addChildAt(t,0),"none"==(o=b.types[(b.types.indexOf(o)+(frame.shiftKey?-1:1)+b.types.length)%b.types.length])&&(t.rect1.x=t.rect1.y=t.rect2.x=t.rect2.y=0,t.parent.addChild(t)),b.points[t.index][4]=o,t.rect1.color=p(o),t.rect2.color=p(o),m(),t.getStage().update()}}),B.ball=A,B.other=O,O.ball=A,O.other=B,e.mobile()&&(A.expand(),B.expand(),O.expand()),j=[E,B,O,A,D?D[8]:s],b.points.push(j)}m(),M.on("mousedown",function(e){if(!b.lockControls)if(e.target.rect1)(o=e.target).startX=o.x,o.startY=o.y,o.rect1.startX=o.rect1.x,o.rect1.startY=o.rect1.y,o.rect2.startX=o.rect2.x,o.rect2.startY=o.rect2.y;else{var t=e.target,o=t.ball,n=o.index,i=s;if(zot(b.points[n][4])||(i=b.points[n][4]),"straight"==i){var a=t.other,r=a.x-o.x,l=a.y-o.y;a.stickLength=Math.sqrt(Math.pow(r,2)+Math.pow(l,2))}}}),M.on("pressmove",function(e){if(!b.lockControls){if(e.target.rect1){var t=(a=e.target).x-a.startX,o=a.y-a.startY;a.rect1.x=a.rect1.startX+t,a.rect1.y=a.rect1.startY+o,a.rect2.x=a.rect2.startX+t,a.rect2.y=a.rect2.startY+o}else{var n=e.target,i=n.other,a=n.ball,r=a.index,l=s;if(zot(b.points[r][4])||(l=b.points[r][4]),"straight"==l||"mirror"==l){var d=n.x-a.x,c=n.y-a.y;if("mirror"==l)i.x=a.x-d,i.y=a.y-c;else{var u=Math.atan2(c,d),h=-i.stickLength*Math.cos(u+Math.PI),f=-i.stickLength*Math.sin(u+Math.PI);i.x=a.x-h,i.y=a.y-f}}}m()}}),M.on("pressup",function(e){if(!b.lockControls){if(e.target.rect1){var t=e.target,o=t.set,n=t.rect1,i=t.rect2;n.x-=t.x,n.y-=t.y,i.x-=t.x,i.y-=t.y,o.x+=t.x,o.y+=t.y,t.x=0,t.y=0}b.dispatchEvent("change")}}),this.changeControl=function(e,t,o,n,i,a,r,s){var l;if(l=zob(b.changeControl,arguments,"index, type, rect1X, rect1Y, rect2X, rect2Y, circleX, circleY"))return l;if(zot(e))for(var d=0;d<b.points.length;d++)b.changeControl(d,t,o,n,i,a,r,s);else{var c=b.points[e];c[4]=t,"none"==t?(zot(r)||(c[3].x=r),zot(s)||(c[3].y=s),c[1].pos(c[3].x,c[3].y),c[2].pos(c[3].x,c[3].y),c[3].parent.addChild(c[3])):(zot(o)||(c[1].x=o),zot(n)||(c[1].y=n),zot(i)||(c[2].x=i),zot(a)||(c[2].y=a),zot(r)||(c[3].x=r),zot(s)||(c[3].y=s),c[3].parent.addChildAt(c[3],0)),b.getStage()&&b.getStage().update()}},this.update=function(){return m(),b},C.on("dblclick",function(){b.dblclick&&(b.controls=!b.controls,b.dblclickDrag&&(b.controls?b.noDrag():b.drag({currentTarget:!0})))}),b.controls=d,b.dblclick&&b.dblclickDrag&&!b.controls&&b.drag({currentTarget:!0}),this.on("click",function(){b.ctrlclick&&zimDefaultFrame.ctrlKey&&(b.clone().addTo(b.getStage().stage).mov(100),b.getStage().stage.update())}),this.hideControls=function(){return M.visible=!1,T.visible=!1,W=!1,b.getStage()&&b.getStage().update(),b},d||this.hideControls(),this.showControls=function(){return M.visible=!0,T.visible=!0,W=!0,M.pos(C.x,C.y),T.pos(C.x,C.y),b.addChildAt(C,0),b.getStage()&&b.getStage().update(),b},this.record=function(t){zot(t)&&(t=!1);for(var o,n,i=[],a=0;a<b.points.length;a++)n=b.points[a],o=[e.decimals(n[0].x),e.decimals(n[0].y),e.decimals(n[1].x),e.decimals(n[1].y),e.decimals(n[2].x),e.decimals(n[2].y),e.decimals(n[3].x),e.decimals(n[3].y)],n[4]&&"straight"!==n[4]&&o.push(n[4]),i.push(o);if(t){if(!r){var r=new e.Pane({container:b.getStage(),width:500,height:500,drag:!0}),s=new e.TextArea(frame,400,400);s.centerReg(r)}s.text=JSON.stringify(i),r.show()}return i};var W=d;Object.defineProperty(b,"controls",{get:function(){return W},set:function(e){W=e,e?b.showControls():b.hideControls()}});var N=c;Object.defineProperty(b,"lockControls",{get:function(){return N},set:function(e){N=e,e?(b.sets.mouseChildren=!1,b.sets.mouseEnabled=!1):(b.sets.mouseChildren=!0,b.sets.mouseEnabled=!0)}}),this.lockControls=N,Object.defineProperty(b,"color",{get:function(){return y},set:function(e){zot(e)&&(e="black"),y=e,colorObj.style=y}}),Object.defineProperty(b,"borderColor",{get:function(){return w},set:function(e){w=e,borderColorObj?borderColorObj.style=w:m()}}),Object.defineProperty(b,"borderWidth",{get:function(){return x},set:function(e){e>0||(e=0),x=e,borderWidthObj&&0!=x?(borderWidthObj.width=x,g&&(borderDashedObj.segments=[20,10],borderDashedObj.offset=5)):m()}}),this.clone=function(){return b.cloneProps(new e.Blob(b.color,b.borderColor,b.borderWidth,b.record(),a,r,s,l,M.visible,c,b.dblclick,b.dblclickDrag,b.ctrlclick,g))},this.dispose=function(){for(var e=0;e<b.points.length;e++)b.points[e][1].removeAllEventListeners();M.removeAllEventListeners(),b.removeAllEventListeners()}},e.extend(e.Blob,e.Container,"clone","zimContainer",!1),e.Label=function(o,n,i,a,r,s,l,d,c,u,h,f,g,p,m){function z(){var t,o=y.getBounds();if("top"==c?(y.y=n-n/6,w&&(w.y=n-n/6),t=0):"center"==c||"middle"==c?(t=-o.height/2,y.y=.3*n,w&&(w.y=.3*n)):t=-o.height,g){var i=g.getBounds();b.setBounds(i.x,i.y,i.width,i.height)}else b.setBounds(o.x,t,o.width,o.height),x.graphics.c().f("black").r(b.getBounds().x,b.getBounds().y,b.getBounds().width,b.getBounds().height);e.center(y,b),y.y+=n/32,w&&(e.center(w,b,0),w.y+=n/32)}var v;if(v=zob(e.Label,arguments,"text, size, font, color, rollColor, shadowColor, shadowBlur, align, valign, lineWidth, lineHeight, fontOptions, backing, outlineColor, outlineWidth",this))return v;z_d("54"),this.zimContainer_constructor(),zot(o)&&(o="LABEL"),""===o&&(o=" "),zot(n)&&(n=36),zot(i)&&(i="arial"),zot(a)&&(a="black"),zot(r)&&(r=a),zot(s)&&(s=-1),zot(l)&&(l=14),zot(d)&&(d="left"),zot(c)&&(c="top"),zot(f)&&(f=""),!zot(p)&&zot(m)&&(m=Math.round(.2*n)),!zot(m)&&zot(p)&&(p="#000000"),zot(m)&&(m=0);var b=this;this.mouseChildren=!1;var y=this.label=new createjs.Text(String(o),f+" "+n+"px "+i,a);if(y.textAlign=d,y.lineWidth=u,y.lineHeight=h,y.textBaseline="alphabetic",m>0){var w=this.outlineLabel=y.clone();w.color=p,w.outline=m,this.addChild(w)}if(-1!=s&&l>0&&(y.shadow=new createjs.Shadow(s,3,3,l)),this.addChild(y),zot(g)){var x=new createjs.Shape;b.hitArea=x}z(),zot(g)||(this.backing=g,e.center(g,this,0)),Object.defineProperty(b,"text",{get:function(){return" "==y.text?"":y.text},set:function(e){(zot(e)||""===e)&&(e=" "),y.text=String(e),w&&(w.text=String(e)),z()}}),Object.defineProperty(b,"color",{get:function(){return a},set:function(t){r==a&&(r=t),a=t,y.color=a,!e.OPTIMIZE&&b.getStage()&&b.getStage().update()}}),Object.defineProperty(b,"outlineColor",{get:function(){return p},set:function(t){p=t,w&&(w.color=p),!e.OPTIMIZE&&b.getStage()&&b.getStage().update()}}),Object.defineProperty(b,"rollColor",{get:function(){return r},set:function(e){r=e}}),this._enabled=!0,Object.defineProperty(b,"enabled",{get:function(){return b._enabled},set:function(o){t(b,o),y.color=a,b.mouseChildren=!1,!e.OPTIMIZE&&b.getStage()&&b.getStage().update()}}),this.showRollColor=function(e){zot(e)&&(e=!0),y.color=e?r:a,b.getStage()&&b.getStage().update()},this.on("mouseover",function(e){b.showRollColor()}),this.on("mouseout",function(e){b.showRollColor(!1)}),this.clone=function(){return b.cloneProps(new e.Label(b.text,n,i,a,r,s,l,d,c,u,h,f,zot(g)?null:g.clone(),p,m))},this.dispose=function(){return b.removeAllEventListeners(),!0}},e.extend(e.Label,e.Container,"clone","zimContainer"),e.Button=function(o,n,i,a,r,s,l,d,c,u,h,f,g,p,m,z,v,b,y,w,x,C,T){function S(e){L=!1,E.off("mouseout",S),E.rollPersist?X||k():k()}function k(){zot(m)?B.color=a:zot(z)||(zot(b)&&E.toggled?(E.removeChild(x),E.addChildAt(w,0)):(E.removeChild(z),E.addChildAt(m,0))),zot(y)||(E.toggled?(E.removeChild(x),E.addChild(w)):(E.removeChild(y),E.addChild(b))),E.label.showRollColor(!1),E.getStage()&&E.getStage().update()}function M(){"string"==typeof w?(E.text=E.toggled?w:_,!e.OPTIMIZE&&E.getStage()&&E.getStage().update()):zot(b)?E.setBackings(E.toggled?w:m,E.toggled?x:z):E.setIcons(E.toggled?w:b,E.toggled?x:y)}function j(t,i,a,r,s){E.contains(E[t])?(E.removeChild(E[t]),E.addChildAt(a,s)):E.contains(E[i])&&(E.removeChild(E[i]),E.addChildAt(r,s)),E[t]=a,E[i]=r,E[t]&&(E[t].x=o/2,E[t].y=n/2),E[i]&&(E[i].x=o/2,E[i].y=n/2),!e.OPTIMIZE&&E.getStage()&&E.getStage().update()}var P;if(P=zob(e.Button,arguments,"width, height, label, color, rollColor, borderColor, borderWidth, corner, shadowColor, shadowBlur, hitPadding, gradient, gloss, flatBottom, backing, rollBacking, rollPersist, icon, rollIcon, toggle, rollToggle, toggleEvent, dashed",this))return P;z_d("55"),this.zimContainer_constructor(),zot(o)&&(o=200),zot(n)&&(n=60),zot(a)&&(a="#C60"),zot(r)&&(r="#F93"),zot(s)&&(s=null),zot(l)&&(l=null),zot(d)&&(d=20),zot(c)&&(c="rgba(0,0,0,.3)"),zot(u)&&(u=14),zot(h)&&(h=0),zot(f)&&(f=0),zot(g)&&(g=0),zot(p)&&(p=!1),zot(i)&&(i=zot(b)?"PRESS":""),!zot(w)&&zot(C)&&(C=e.mobile()?"mousedown":"click"),"string"!=typeof i&&"number"!=typeof i||(i=new e.Label(i,36,"arial","white",null,null,null,"center","middle")),zot(v)&&(v=!1),this.rollPersist=v,zot(T)&&(T=!1);var E=this;this.mouseChildren=!1,this.cursor="pointer",E.focus=!1;var B;zot(m)?B=new e.Rectangle(o,n,a,s,l,d,p,T):((B=m).x=o/2,B.y=n/2,zot(z)||(z.x=o/2,z.y=n/2,this.rollBacking=z)),this.addChild(B),this.backing=B,zot(b)||(this.addChild(b),b.x=o/2,b.y=n/2,this.icon=b),zot(y)||(this.rollIcon=y,y.x=o/2,y.y=n/2);var O=p?0:d;if(f>0&&zot(m)){var A=new createjs.Shape;A.graphics.lf(["rgba(255,255,255,"+f+")","rgba(0,0,0,"+f+")"],[0,1],0,0,0,n-l),A.graphics.rc(l/2,l/2,o-l,n-l,d,d,O,O),B.addChild(A)}if(g>0&&zot(m)){var I=new createjs.Shape;I.graphics.f("rgba(255,255,255,"+g+")"),I.graphics.rc(l/2,l/2,o-l,(n-l)/2,d,d,0,0),I.graphics.f("rgba(0,0,0,"+g+")"),I.graphics.rc(l/2,n/2,o-l,(n-l)/2,0,0,O,O),B.addChild(I)}if(h>0){var D=new createjs.Shape;D.graphics.f("#000").r(-h,-h,o+2*h,n+2*h),this.hitArea=D}-1!=c&&u>0&&(B.shadow=new createjs.Shadow(c,3,3,u),zot(z)||(z.shadow=new createjs.Shadow(c,3,3,u))),this.setBounds(0,0,o,n),this.addChild(i),i.center(this),i.y+=1,this.label=i;var X=!1;this.on("mousedown",function(){X=!0}),this.on("pressup",function(){X=!1,E.rollPersist&&!L&&k()});var L=!1;this.on("mouseover",function(e){L=!0,zot(m)?B.color=r:zot(z)||(zot(b)&&E.toggled?(E.removeChild(w),E.addChildAt(x,0)):(E.removeChild(m),E.addChildAt(z,0))),zot(y)||(E.toggled?(E.removeChild(w),E.addChild(x)):(E.removeChild(b),E.addChild(y))),E.label.showRollColor(),E.getStage()&&E.getStage().update()}),this.on("mouseout",S),this.toggled=!1,this.toggleObj=w,this.rollToggle=x;var _=i.text;zot(w)||this.on(C,function(){E.toggled=!E.toggled,M(E.toggled)}),Object.defineProperty(E,"text",{get:function(){return" "==i.text?"":i.text},set:function(e){i.text=e,i.center(this),i.y+=1}}),Object.defineProperty(E,"color",{get:function(){return a},set:function(t){a=t,B.color?B.color=a:zon&&zog("zim.Button - backing has no color property"),!e.OPTIMIZE&&E.getStage()&&E.getStage().update()}}),Object.defineProperty(E,"rollColor",{get:function(){return r},set:function(e){r=e}}),this._enabled=!0,Object.defineProperty(E,"enabled",{get:function(){return E._enabled},set:function(o){t(E,o),E.mouseChildren=!1,i.color=i.color,!e.OPTIMIZE&&E.getStage()&&E.getStage().update()}}),this.setBackings=function(e,t){j("backing","rollBacking",e,t,0)},this.setIcons=function(e,t){j("icon","rollIcon",e,t,E.numChildren-1)},this.toggle=function(e){zot(e)?E.toggled=!E.toggled:E.toggled=e,M()},this.clone=function(){var t=new e.Button(o,n,i.clone(),a,r,s,l,d,c,u,h,f,g,p,zot(m)?null:m.clone(),zot(z)?null:z.clone(),v,zot(b)?null:b.clone(),zot(y)?null:y.clone(),zot(w)?null:"string"==typeof w?w:w.clone(),zot(x)?null:x.clone(),C,T);return E.cloneProps(t)},this.dispose=function(){return E.removeAllEventListeners(),E.removeChild(B),E.removeChild(z),E.removeChild(b),E.removeChild(E.label),E.label&&E.label.dispose(),B=null,z=null,b=null,E.label=null,!0}},e.extend(e.Button,e.Container,"clone","zimContainer",!1),e.CheckBox=function(o,n,i,a,r,s){var l;if(l=zob(e.CheckBox,arguments,"size, label, startChecked, color, margin, type",this))return l;z_d("56"),this.zimContainer_constructor(),zot(o)&&(o=60),zot(n)&&(n=null),"string"!=typeof n&&"number"!=typeof n||(n=new e.Label(n,5*o/6,"arial",a));var d=!zot(i)&&i;zot(a)&&(a="#111"),zot(r)&&(r=10),"box"!=s&&"square"!=s&&"x"!=s&&(s="check"),this.setBounds(-r,-r,o+2*r,o+2*r);var c=this;this.cursor="pointer";var u=new createjs.Shape,h=u.graphics;h.f("rgba(255,255,255,.5)").r(0,0,o,o),h.s(a).ss(o/10).r(o/7,o/7,o-o/7*2,o-o/7*2),this.addChild(u);var f=o;n&&(this.addChild(n),n.x=1.3*o+r,n.y=o/8,this.label=n,this.setBounds(-r,-r,o+3*r+n.getBounds().width,Math.max(o+2*r,n.getBounds().height)),f=n.x+n.width);var g=new createjs.Shape;(h=g.graphics).f("rgba(0,0,0,.01)").r(this.getBounds().x,this.getBounds().y,f+2*r,this.getBounds().height),this.hitArea=g;var p=new createjs.Shape,m=p.graphics,z="#000";"check"==s?m.f(z).p("AnQAdICBiaIEEDZIF8nfICfB4In/KPg"):"box"==s||"square"==s?m.f(z).dr(-35,-35,70,70):m.f(z).p("AmJEVIEUkTIkXkWIB4h5IEWEYIETkTIB4B3IkTESIEQERIh4B4IkRkRIkSEVg");p.setBounds(-47.5,-47.5,95,95);var v=o/161;p.scaleX=p.scaleY=v,p.alpha=.9,p.x=o/2,p.y=o/2,d&&this.addChild(p),this.on("mousedown"==e.ACTIONEVENT?"mousedown":"click",function(e){d=!d,c.setChecked(d),c.dispatchEvent("change")}),Object.defineProperty(c,"checked",{get:function(){return d},set:function(e){c.setChecked(e)}}),Object.defineProperty(c,"text",{get:function(){if(n)return n.text},set:function(t){n&&(n.text=t,!e.OPTIMIZE&&c.getStage()&&c.getStage().update())}}),Object.defineProperty(p,"color",{get:function(){return z},set:function(t){d&&c.removeChild(p),p=new createjs.Shape,m=p.graphics,z=t,m.f(z).p("AnQAdICBiaIEEDZIF8nfICfB4In/KPg"),p.scaleX=p.scaleY=v,p.alpha=.9,p.x=o/2,p.y=o/2,d&&c.addChild(p),!e.OPTIMIZE&&c.getStage()&&c.getStage().update()}}),Object.defineProperty(c,"check",{get:function(){return p},set:function(e){zog("ZIM CheckBox - check is read only")}}),this._enabled=!0,Object.defineProperty(c,"enabled",{get:function(){return c._enabled},set:function(e){t(c,e)}}),this.setChecked=function(t){zot(t)&&(t=!0),(d=t)?c.addChild(p):c.removeChild(p),!e.OPTIMIZE&&c.getStage()&&c.getStage().update()},this.clone=function(){return c.cloneProps(new e.CheckBox(o,n.clone(),i,a,r,s))},this.dispose=function(){return c.removeAllEventListeners(),!0}},e.extend(e.CheckBox,e.Container,"clone","zimContainer",!1),e.RadioButtons=function(o,n,i,a,r,s,l){function d(t,n){var i=new e.Container;i.mouseChildren=!1,i.setBounds(-s,-s,o+2*s,o+2*s);var r=new createjs.Shape,l=r.graphics;l.f("rgba(255,255,255,.5)").dc(o/2,o/2,o/1.85),l.s(a).ss(o/9).dc(o/2,o/2,o/2-o/2/5),i.addChild(r);var d=i.check=new e.Circle(o/5.2,"rgba(0,0,0,.7)");u.dots.push(d),d.mouseEnabled=!1,d.alpha=.95,d.regX=d.regY=-o/2;var c=o;n&&(i.addChild(n),n.x=i.getBounds().width,n.y=o/8,i.setBounds(-s,-s,o+2*s+n.getBounds().width,Math.max(o+2*s,n.getBounds().height)),c=n.x+n.width),t&&(i.addChild(d),u.label=n,u.label&&(u.text=n.text));var h=new createjs.Shape;return(l=h.graphics).f("rgba(0,0,0,.01)").r(i.getBounds().x,i.getBounds().y,c+2*s,i.getBounds().height),i.hitArea=h,i}var c;if(c=zob(e.RadioButtons,arguments,"size, buttons, vertical, color, spacing, margin, always",this))return c;z_d("57"),this.zimContainer_constructor(),zot(o)&&(o=60),o=Math.max(5,o),zot(n)&&(n=["A","B","C"]),zot(i)&&(i=!0),zot(a)&&(a="#111"),zot(r)&&(r=i?.2*o:o),zot(s)&&(s=o/5);var u=this;this.cursor="pointer",this.labels=[],this.dots=[];var h;if("string"==typeof n){var f=n;n=[];for(var g=0;g<f.length;g++)n.push({label:f[g]})}var p=new e.Container;this.addChild(p),p.on("mousedown"==e.ACTIONEVENT?"mousedown":"click",function(e){var t=p.getChildIndex(e.target);l&&u.selectedIndex==t||(u.setSelected(t),u.dispatchEvent("change"))}),function(){for(var t,s=!1,l=n.length-1;l>=0;l--)(t=n[l]).selected&&!0===t.selected&&(s?t.selected="false":(s=!0,u.id=t.id));p.removeAllChildren();for(var c,f=0,l=0;l<n.length;l++)"string"!=typeof(t=n[l])&&"number"!=typeof t||(t={selected:!1,label:new e.Label(t,5*o/6,"arial",a)}),(t.label&&"string"==typeof t.label||"number"==typeof t.label)&&(t.label=new e.Label(t.label,5*o/6,"arial",a)),u.labels.push(t.label),t.index=l,n[l]=t,(c=d(t.selected,t.label)).obj=t,t.selected&&(h=c.obj),p.addChild(c),i?(c.y=f,f+=c.getBounds().height+r):(c.x=f,f+=c.getBounds().width+r)}();this.getBounds()||this.setBounds(0,0,o,o),this.setBounds(-s,-s,this.getBounds().width+s,this.getBounds().height+s),this.setSelected=function(t){if(zot(t)&&(t=-1),-1==t||p.getChildAt(t)){for(var o,n=0;n<p.getNumChildren();n++)(o=p.getChildAt(n)).removeChild(o.check);if(t>=0){o=p.getChildAt(t);var i=-2;h&&(i=h.index),h=o.obj}-1==t||i==h.index?(h=null,u.id=null,u.label=null,u.text=""):(o.addChild(o.check),u.id=h.id,u.label=h.label,u.label&&(u.text=u.label.text)),!e.OPTIMIZE&&u.getStage()&&u.getStage().update()}},Object.defineProperty(u,"selected",{get:function(){return h},set:function(e){zog("ZIM RadioButton - selected is read only")}}),Object.defineProperty(u,"selectedIndex",{get:function(){return h?h.index:-1},set:function(e){var t=e;l&&u.selectedIndex==t||u.setSelected(t)}}),this._enabled=!0,Object.defineProperty(u,"enabled",{get:function(){return u._enabled},set:function(e){t(u,e)}}),this.clone=function(){for(var t=e.copy(n),d=0;d<t.length;d++)t[d].label=t[d].label.clone();return u.cloneProps(new e.RadioButtons(o,t,i,a,r,s,l))},this.dispose=function(){return u.removeAllEventListeners(),!0}},e.extend(e.RadioButtons,e.Container,"clone","zimContainer",!1),e.Pane=function(t,o,n,i,a,r,s,l,d,c,u,h,f,g,p,m){function z(e){v(),t.getStage().update(),T.dispatchEvent("close"),e.stopImmediatePropagation()}function v(){function o(){t.removeChild(T);for(var o,n=0;n<T.numChildren;n++)if((o=T.getChildAt(n)).constructor==e.TextArea||o.constructor==e.Loader){var i={obj:o,depth:T.getChildIndex(o)};S.add(o,i),T.removeChild(o)}e.OPTIMIZE||t.getStage().update(),s&&(isNaN(T.resetX)||(T.x=T.resetX),isNaN(T.resetY)||(T.y=T.resetY))}m>0?T.animate({obj:{alpha:0},time:m,call:o}):o()}function b(e,i){return e=Math.max(o/2,Math.min(t.getBounds().width-o/2,e)),i=Math.max(n/2,Math.min(t.getBounds().height-n/2,i)),{x:e,y:i}}var y;if(y=zob(e.Pane,arguments,"container, width, height, label, color, drag, resets, modal, corner, backingAlpha, shadowColor, shadowBlur, center, displayClose, backing, fadeTime",this))return y;z_d("58"),this.zimContainer_constructor();var w="zim build - Pane(): Please pass in a reference to a container with bounds set as first parameter";if(zot(t)){if(!zimDefaultFrame)return void zog(w);t=zimDefaultFrame.stage}else{if(!t.getBounds)return void zog(w);if(zot(t.getStage))return void zog("zim build - Pane(): The container must have a stage property")}zot(o)&&(o=200),zot(n)&&(n=200),zot(i)&&(i=null),"string"!=typeof i&&"number"!=typeof i||(i=new e.Label(i,40,"arial","black")),zot(a)&&(a="white"),zot(r)&&(r=!1),zot(s)&&(s=!0),zot(l)&&(l=!0),zot(d)&&(d=20),zot(c)&&(c=.14),zot(u)&&(u="rgba(0,0,0,.3)"),zot(h)&&(h=20),zot(f)&&(f=!0),zot(g)&&(g=!0),r&&(g=!1),zot(m)&&(m=0);var x=this.backdrop=new createjs.Shape,C=x.graphics;C.f("black"),C.drawRect(-5e3,-5e3,1e4,1e4),this.setBounds(-o/2,-n/2,o,n),x.alpha=c;var T=this;x.on("mousedown"==e.ACTIONEVENT?"mousedown":"click",z);var S=new e.Dictionary(!0);x.on("mousedown",function(e){e.stopImmediatePropagation()}),l&&this.addChild(x);var k;if(zot(p)?((C=(k=this.display=new createjs.Shape).graphics).f(a),C.rr(0,0,o,n,d),k.setBounds(0,0,o,n),k.regX=o/2,k.regY=n/2):k=p,g&&(k.cursor="pointer",k.on("mousedown"==e.ACTIONEVENT?"mousedown":"click",z)),-1!=u&&h>0&&(k.shadow=new createjs.Shadow(u,8,8,h)),k.on("click",function(e){e.stopImmediatePropagation()}),this.resetX,this.resetY,r){k.cursor="pointer";var M,j;k.on("mousedown",function(e){isNaN(T.resetX)&&(T.resetX=T.x),isNaN(T.resetY)&&(T.resetY=T.y),M=e.stageX-T.x,j=e.stageY-T.y,k.cursor="pointer"}),k.on("pressmove",function(o){var n=b(o.stageX-M,o.stageY-j);T.x=n.x,T.y=n.y;for(var i,a=0;a<T.numChildren;a++)(i=T.getChildAt(a)).constructor!=e.TextArea&&i.constructor!=e.Loader||i.resize();t.getStage().update()}),this.on("pressup",function(e){k.cursor="pointer",t.getStage().update()})}this.addChild(k),i&&(this.addChild(i),e.center(i,this),this.label=i,this.text=i.text,i.mouseEnabled=!1),Object.defineProperty(T,"text",{get:function(){return" "==i.text?"":i.text},set:function(e){i.text=e}}),this.hide=function(){v()},this.show=function(){f&&isNaN(T.resetX)&&(T.x=t.getBounds().width/2,T.y=t.getBounds().height/2),t.addChild(T);for(var e=0;e<S.length;e++)T.addChildAt(S.objects[e].obj,S.objects[e].depth);return m>0?(T.alpha=0,T.animate({alpha:1},m)):t.getStage()&&t.getStage().update(),T},this.toggle=function(){return t.contains(T)?T.hide():T.show(),T},this.clone=function(){var z=i.x,v=i.y,b=T.cloneProps(new e.Pane(t,o,n,i.clone(),a,r,s,l,d,c,u,h,f,g,zot(p)?p.clone():null,m));return b.label.x=z,b.label.y=v,b},this.dispose=function(){return k.removeAllEventListeners(),T.removeChild(k),k=null,!0}},e.extend(e.Pane,e.Container,"clone","zimContainer",!1),e.Window=function(t,o,n,i,a,r,s,l,d,c,u,h,f,g,p,m,z,v,b,y,w,x,C){function T(){A.setBounds(0,0,t,o),I.graphics.f(n).rr(0,0,t,o,s),-1!=v&&b>0&&(I.shadow=new createjs.Shadow(v,8,8,b)),a>0&&Y.graphics.c().s(i).ss(a).rr(0,0,t,o,s)}function S(){e.dragRect(L,new createjs.Rectangle(0,0,U?-A.scrollXMax:0,q?-A.scrollYMax:0))}function k(){ge=L.y,C&&pe.immediate(ge),d&&M()}function M(){_&&(_.x=-L.x,_.y=-L.y),U&&d&&(W.x=Z.convert(L.x)),q&&d&&(F.y=H.convert(L.y))}function j(t){e.Ticker.remove(k),te=!1,U&&f&&e.animate(W,{alpha:0},R.fadeTime),q&&f&&e.animate(F,{alpha:0},R.fadeTime)}function P(){Math.abs(ae-L.stage.mouseX)>ce||Math.abs(re-L.stage.mouseY)>ce?(ue||(A.dispatchEvent("hoverout"),ue=!0),ie=Date.now(),ae=L.stage.mouseX,re=L.stage.mouseY):Date.now()-ie>de&&((Math.abs(se-L.stage.mouseX)>ce||Math.abs(le-L.stage.mouseY)>ce)&&(A.contentMouse=L.globalToLocal(L.stage.mouseX,L.stage.mouseY),A.dispatchEvent("hoverover"),se=L.stage.mouseX,le=L.stage.mouseY,ue=!1),ie=Date.now())}function E(e){if(q&&A.getStage()&&A.hitTestPoint(A.getStage().mouseX,A.getStage().mouseY)){zot(e)&&(e=event);var t=e.detail?-19*e.detail:e.wheelDelta;ge+=t,ge=Math.max(-A.scrollYMax,Math.min(0,ge)),C||(A.scrollY=ge,L.stage.update())}}function B(t){C&&!me&&t.getStage()&&(me=!0,pe=new e.Damp(A.scrollY,C),e.Ticker.add(function(){te||zot(ge)||(A.scrollY=pe.convert(ge))},t.getStage()))}var O;if(O=zob(e.Window,arguments,"width, height, color, borderColor, borderWidth, padding, corner, swipe, indicatorActive, indicatorDrag, indicatorColor, indicatorAlpha, indicatorFade, slide, slideDamp, slideSnap, interactive, shadowColor, shadowBlur, paddingHorizontal, paddingVertical, scrollWheel, damp",this))return O;z_d("58.1"),this.zimContainer_constructor(),zot(t)&&(t=300),zot(o)&&(o=200),zot(n)&&(n="#333"),zot(i)&&(i="#999"),zot(a)&&(a=1),zot(r)&&(r=10),zot(s)&&(s=0),zot(l)&&(l=!0),zot(d)&&(d=!0),zot(c)&&(c=!1),zot(u)&&(u=i),zot(h)&&(h=.3),zot(f)&&(f=!0),c&&(f=!1),zot(g)&&(g=!0),zot(p)&&(p=.6),zot(m)&&(m="vertical"),zot(z)&&(z=!0),zot(v)&&(v="rgba(0,0,0,.3)"),zot(b)&&(b=20),zot(w)&&(w=r),zot(y)&&(y=r),zot(x)&&(x=!0);var A=this;this.scrollX=this.scrollY=this.scrollXMax=this.scrollYMax=0;var I=this.backing=new createjs.Shape;this.addChild(I);var D=new createjs.Shape,X=D.graphics;this.addChild(D);var L=this.content=new e.Container;if(this.addChild(L),L.mask=D,!z)var _=new createjs.Shape;if(a>0){var Y=new createjs.Shape;this.addChild(Y)}T();var R=this.indicator={};if(R.size=6,R.minSize=2*R.size,R.spacing=3.5+a/2,R.margin=0,R.corner=R.size/2,R.showTime=500,R.fadeTime=3e3,d){var W=this.hIndicator=new e.Shape,N=W.graphics;W.alpha=h,this.addChild(W),c&&W.drag({localBounds:!0});var F=this.vIndicator=new e.Shape,G=F.graphics;F.alpha=h,this.addChild(F),c&&F.drag({localBounds:!0})}var Z,H,U,q,V,K,Q,J,$,ee;this.update=function(){d&&(N.clear(),G.clear()),V=d?R.size+2*R.spacing:0,K=L.getBounds().width,Q=L.getBounds().height,U=K>t-y&&(!0===l||"auto"==l||"horizontal"==l),q=Q>o-w&&(!0===l||"auto"==l||"vertical"==l),A.scrollXMax=K+2*y-t+(q?V+R.margin:0),A.scrollYMax=Q+2*w-o+(U?V+R.margin:0),X.clear();var n=a/2,i=a/2,r=t-(q&&d?R.size+2*R.spacing:0)-(q?0:a),h=o-(U&&d?R.size+2*R.spacing:0)-(U?0:a);X.f("rgba(0,0,0,.01)").rr(n,i,r,h,s),z||(_.graphics.c().f("red").dr(n,i,r,h),L.hitArea=_);var f=Math.max(s,Math.min(R.corner,R.spacing)),g=f+a/2,p=f+(q?V:0)+a/2,m=f+a/2,v=f+(U?V:0)+a/2;if(U&&d&&(indicatorLength=Math.max(R.minSize,(t-g-p)*(t-g-p)/(K+y+R.margin)),N.f(u).rr(0,0,indicatorLength,R.size,R.corner),W.x=g,W.y=o-R.size-R.spacing,Z=new e.Proportion(-A.scrollXMax,0,g,t-indicatorLength-p,-1),c)){W.setBounds(0,0,indicatorLength,R.size);b=new createjs.Rectangle(g,W.y,t-indicatorLength-g-p,0);W.dragRect(b),W.proportion=new e.Proportion(b.x,b.x+b.width,0,-A.scrollXMax),W.off("pressmove",J),J=W.on("pressmove",function(){L.x=W.proportion.convert(W.x)})}if(q&&d&&(indicatorLength=Math.max(R.minSize,(o-m-v)*(o-m-v)/(Q+w+R.margin)),G.f(u).rr(0,0,R.size,indicatorLength,R.corner),F.x=t-R.size-R.spacing,F.y=m,H=new e.Proportion(-A.scrollYMax,0,m,o-indicatorLength-v,-1),c)){F.setBounds(0,0,R.size,indicatorLength);var b=new createjs.Rectangle(F.x,m,0,o-indicatorLength-m-v);F.dragRect(b),F.proportion=new e.Proportion(b.y,b.y+b.height,0,-A.scrollYMax),F.off("pressmove",$),$=F.on("pressmove",function(){ge=L.y=F.proportion.convert(F.y)})}M(),clearTimeout(ee),ee=setTimeout(function(){S()},300)},this.resize=function(e,n){zot(e)&&(e=t),zot(n)&&(n=o),t=e,o=n,T(),A.update(),ge=L.y,C&&pe.immediate(ge)},this.add=function(e){B(e),e.getBounds()?(L.addChild(e),0==e.x&&(e.x=y),0==e.y&&(e.y=w),A.update()):zog("SwipeBox.add() - please add content with bounds set")},this.remove=function(e){L.removeChild(e),A.update()};var te=!1;if(l&&L.on("mousedown",function(){te||e.Ticker.add(k,L.stage),te=!0,U&&d&&f&&e.animate(W,{alpha:h},R.showTime),q&&d&&f&&e.animate(F,{alpha:h},R.showTime)}),this.on("added",function(){B(A),l&&(e.drag({obj:L,currentTarget:!0,localBounds:!0,slide:g,slideDamp:p,slideSnap:(!0===l||"auto"==l||"vertical"==l)&&m}),L.getBounds()&&L.getBounds().width>0&&setTimeout(function(){S()},300))},null,!0),g?L.on("slidestop",j):L.on("mousedown",function(){L.stage.on("stagemouseup",j,null,!0)}),z){var oe,ne;L.on("mousedown",function(){oe=L.stage.mouseX,ne=Date.now()}),L.on("click",function(){Date.now()-ne<600&&Math.abs(L.stage.mouseX-oe)<5&&(A.contentMouse=L.globalToLocal(L.stage.mouseX,L.stage.mouseY),A.dispatchEvent("select"))}),L.on("mouseover",function(){ie=Date.now(),e.Ticker.add(P,L.stage)}),L.on("mouseout",function(){ue||(A.dispatchEvent("hoverout"),ue=!0),e.Ticker.remove(P)});var ie,ae=0,re=0,se=0,le=0,de=300,ce=2,ue=!1}var he,fe,ge=A.scrollY;x&&(he=window.addEventListener("mousewheel",E),fe=window.addEventListener("DOMMouseScroll",E));var pe,me=!1;Object.defineProperty(A,"scrollX",{get:function(){return L.x},set:function(e){L.x=e,M()}}),Object.defineProperty(A,"scrollY",{get:function(){return L.y},set:function(e){L.y=e,M()}}),this.clone=function(x){zot(x)&&(x=!0);var C=A.cloneProps(new e.Window(t,o,n,i,a,r,s,l,d,c,u,h,f,g,p,m,z,v,b,y,w));return x&&(A.content.cloneChildren(C.content),C.update()),C},this.dispose=function(){return x&&(window.removeEventListener("mousewheel",he),window.removeEventListener("DOMMouseScroll",fe)),A.removeAllEventListeners(),W.off("pressmove",J),F.off("pressmove",$),L.removeAllEventListeners(),e.Ticker.remove(P),e.Ticker.remove(k),e.noDrag(L),!0}},e.extend(e.Window,e.Container,"clone","zimContainer",!1),e.Waiter=function(t,o,n,i,a,r,s,l){var d;if(d=zob(e.Waiter,arguments,"container, speed, color, circleColor, corner, shadowColor, shadowBlur, fadeTime",this))return d;if(z_d("59"),this.zimContainer_constructor(),!zot(t)&&t.getBounds)if(t.getBounds())if(zot(t.getStage))zog("zim build - Waiter(): Please give the container that has a stage property");else{zot(o)&&(o=600),zot(n)&&(n="orange"),zot(i)&&(i="white"),zot(a)&&(a=16),zot(r)&&(r="rgba(0,0,0,.3)"),zot(s)&&(s=14),zot(l)&&(l=0);var c=12;this.setBounds(-52,-20,104,40);var u=this,h=this.display=new createjs.Shape;this.addChild(h),h.setBounds(0,0,104,40),h.regX=52,h.regY=20;var f=h.graphics;f.f(n),f.rr(0,0,104,40,a),-1!=r&&s>0&&(h.shadow=new createjs.Shadow(r,3,3,s)),h.on("click",function(e){e.stopImmediatePropagation()});var g=new e.Container;this.addChild(g);for(var p,m=0;m<3;m++)(p=new createjs.Shape).graphics.f(i).dc(0,0,c),p.x=32*(m-1),g.addChild(p),p.cache(-c,-c,24,24),p.alpha=0;this.hide=function(){function e(){u.parent&&u.parent.removeChild(u),t.getStage().update()}l>0?u.animate({obj:{alpha:0},time:l,call:e}):e()},this.show=function(){for(var e,n=0,i=0;i<g.getNumChildren();i++)u.alpha=0,createjs.Tween.get(u,{override:!0}).to({alpha:1},300),setTimeout(function(){e=g.getChildAt(n),createjs.Tween.get(e,{loop:!0}).to({alpha:1},o/3/2).wait(o/3).to({alpha:0},o/3).wait(o-o/3-o/3/2),n++},i*o/3);return u.ticker=createjs.Ticker.on("tick",function(){t.getStage().update()}),u.x=t.getBounds().width/2,u.y=t.getBounds().height/2,t.addChild(u),l>0&&(u.alpha=0,u.animate({alpha:1},l)),u},this.clone=function(){return u.cloneProps(new e.Waiter(t,o,n,i,a,r,s,l))},this.dispose=function(){return u.ticker&&createjs.Ticker.off("tick",u.ticker),h.removeAllEventListeners(),u.removeChild(h),u.removeChild(g),h=null,g=null,!0}}else zog("zim build - Waiter(): Please give the container bounds using setBounds()");else zog("zim build - Waiter(): Please pass in a reference to a container with bounds set as first parameter")},e.extend(e.Waiter,e.Container,"clone","zimContainer",!1),e.Indicator=function(t,o,n,i,a,r,s,l,d,c,u,h,f,g){function p(t){t>=n&&(t=-1);for(var o,r=0;r<n;r++)o=d&&r<t?i:a,r==t&&(o=i),w.getChildAt(r).color=o;!e.OPTIMIZE&&v.getStage()&&v.getStage().update()}var m;if(m=zob(e.Indicator,arguments,"width, height, num, color, offColor, borderColor, backingColor, type, fill, scale, lightScale, press, shadowColor, shadowBlur",this))return m;z_d("60"),this.zimContainer_constructor(),zot(t)&&(t=300),zot(o)&&(o=50),zot(n)&&(n=6),zot(i)&&(i="#f58e25"),zot(a)&&(a="#666"),a<0&&(a="rgba(0,0,0,.01)"),r<0&&(r=null),zot(s)&&(s=-1),zot(l)&&(l="dot"),zot(d)&&(d=!1),zot(c)&&(c=1),zot(u)&&(u=1),zot(h)&&(h=!1),zot(f)&&(f="rgba(0,0,0,.3)"),zot(g)&&(g=5);var z="mousedown"==e.ACTIONEVENT?"mousedown":"click",v=this;this.lights=[];var b;new e.Container;if(-1!=s){var y=new e.Rectangle(t,o,s);this.addChild(y),this.backing=y}var w=this.lightsContainer=new e.Container;this.addChild(w);var x,C=.5*o,T=t/(n+1),S=new createjs.Shape;"square"==l||"box"==l?S.graphics.f("black").dr(-T/2/u+C/2,-o/2+C/2,T/u,o):S.graphics.f("black").dr(-T/2/u,-o/2,T/u,o);for(var k=0;k<n;k++)"square"==l||"box"==l?((x=new e.Rectangle(C,C,a,r)).regX=x.width/2,x.regY=x.height/2):x=new e.Circle(C/2,a,r),this.lights.push(x),x.znum=k,x.scaleX=x.scaleY=u,x.hitArea=S,x.x=T+T*k,x.y=o/2,w.addChild(x);if(w.setBounds(0,0,t,o),w.regX=w.x=t/2,w.regY=w.y=o/2,this.addChild(w),-1!=f&&g>0&&(w.shadow=new createjs.Shadow(f,2,2,g)),h){w.cursor="pointer";w.on(z,function(e){b!=e.target.znum&&(p(b=e.target.znum),v.dispatchEvent("change"))})}w.scaleX=w.scaleY=c,Object.defineProperty(this,"selectedIndex",{get:function(){return b},set:function(e){p(b=Math.floor(e))}}),Object.defineProperty(this,"num",{get:function(){return n},set:function(e){zon&&zog("num is read only")}}),this.clone=function(){return v.cloneProps(new e.Indicator(t,o,n,i,a,r,s,l,d,c,u,h,f,g))},this.dispose=function(){return v.removeAllEventListeners(),!0}},e.extend(e.Indicator,e.Container,"clone","zimContainer",!1),e.Stepper=function(o,n,i,a,r,s,l,d,c,u,h,f,g,p,m,z,v,b,y,w,x,C,T,S,k,M,j,P,E,B){function O(e){var t=String(e).split(".")[1];return t=t?t.length:0}function A(t,o,n){if(p){fe=F.getStage().mouseX,holdY=F.getStage().mouseY,0==fe&&(fe=1),0==holdY&&(holdY=1),v||(b=1),ge=new e.Proportion(0,y,z,z*b);var i=z;J=setTimeout(function(){function e(){$=setTimeout(function(){var a=t;if(v){var r=Math.abs(K-fe),l=Math.abs(Q-holdY);s?(o||n||(r=0),n&&(l=0)):(o||n||(l=0),n&&(r=0)),(r>=10||l>=10)&&(r>l?(G=s?S:T,a=K-fe>0?1:-1,i=ge.convert(Math.abs(fe-K))):(G=s?T:S,a=Q-holdY>0?1:-1,"number"==w&&(a*=-1),i=ge.convert(Math.abs(holdY-Q))))}D(a),e()},i)}de=!0,e()},m)}}function I(){de=!1,clearTimeout(J),clearTimeout($)}function D(t){var n;if("number"==w){var i=W;W+=G*t*Z,W=e.decimals(W,N),h?W>F.max?W=F.min:W<F.min&&(W=F.max):(W>F.max?(W=1==T?F.max:i,f&&(he.cursor="default")):f&&(he.cursor="pointer"),W<F.min&&(W=1==T?F.min:i))}else{if(n=R+t,h)n>o.length-1&&(n=0),n<0&&(n=o.length-1);else{if(n>o.length-1)return void(f&&(he.cursor="default"));if(f&&(he.cursor="pointer"),n<0)return}R=n}X("number"==w?W:o[R],"number"==w?W:R),F.dispatchEvent("change")}function X(t,n){R=n,f&&("number"==w&&0!=t&&N>0&&(t=e.decimals(t,N,!0)),r.text=t,r.x=he.x+he.getBounds().width/2,r.y=he.y+(he.getBounds().height-r.getBounds().height)/2),l&&(te.alpha=1,oe.color=i,te.cursor="pointer",ne.alpha=1,ie.color=i,ne.cursor="pointer",h||("number"==w?(R==F.min&&(Z>0?L():_()),R==F.max&&(Z>0?_():L())):(0==R&&(s?_():L()),R==o.length-1&&(s?L():_())))),ne&&!e.OPTIMIZE&&ne.getStage()?ne.getStage().update():r&&!e.OPTIMIZE&&r.getStage()&&r.getStage().update()}function L(){l&&(te.alpha=.8,oe.color="#aaa",te.cursor="default")}function _(){l&&(ne.alpha=.8,ie.color="#aaa",ne.cursor="default")}var Y;if(Y=zob(e.Stepper,arguments,"list, width, color, borderColor, label, vertical, arrows, corner, shadowColor, shadowBlur, loop, display, press, hold, holdDelay, holdSpeed, drag, dragSensitivity, dragRange, type, min, max, step, step2, arrows2, arrows2Scale, keyEnabled, keyArrows, rightForward, downForward",this))return Y;z_d("61"),this.zimContainer_constructor(),zot(o)&&(o=[0,1,2,3,4,5,6,7,8,9]),zot(n)&&(n=200),zot(i)&&(i="white"),zot(a)&&(a=null),zot(r)&&(r=""),"string"!=typeof r&&"number"!=typeof r||(r=new e.Label(r,64,"arial","#555",null,null,null,"center")),zot(s)&&(s=!1),zot(l)&&(l=!0),zot(d)&&(d=16),zot(c)&&(c="rgba(0,0,0,.3)"),zot(u)&&(u=14),zot(h)&&(h=!1),zot(f)&&(f=!0),zot(g)&&(g=!0),zot(p)&&(p=!0),zot(m)&&(m=400),zot(z)&&(z=200),zot(v)&&(v=!0),(zot(b)||b<=0)&&(b=.1),zot(y)&&(y=200),zot(w)&&(w="list"),zot(x)&&(x=0),zot(C)&&(C=100),zot(T)&&(T=1),zot(S)&&(S=T),zot(k)&&S!=T&&"number"==w&&(k=!0),zot(M)&&(M=.5),zot(j)&&(j=!0),zot(P)&&(P=!0),zot(E)&&(E=!0),zot(B)&&(B="number"!=w);var R,W,N,F=this,G=T,Z=1;if("number"==w){if(x=Number(x),C=Number(C),NaN==x&&(x=0),NaN==C&&(C=100),C<x){Z=-1;var H=C;C=x,x=H,W=C}else W=x;this.min=x,this.max=C,0>x&&0<C&&(W=0),T=Math.abs(T),N=Math.max(O(T),O(S))}else if("letter"==w){o="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),"string"!=typeof x&&(x="A"),"string"!=typeof C&&(C="Z"),x=x.substr(0,1).toUpperCase(),C=C.substr(0,1).toUpperCase();var U=o.indexOf(x);U<0&&(x="A",U=0);var q=o.indexOf(C);q<0&&(C="Z",q=o.length),q<U&&(o.reverse(),U=o.length-1-U,q=o.length-1-q),o=o.splice(U,q-U+1)}else w="list";var V,K=0,Q=0;v&&this.on("mousedown",function(){this.getStage().mouseMoveOutside=!0,V=this.getStage().on("stagemousemove",function(e){K=e.rawX,Q=e.rawY})},null,!0),this.label=r,r.mouseChildren=!1,r.mouseEnabled=!1;var J,$,ee,te,oe,ne,ie,ae,re,se,le,de=!1,ce=!1;if(l||k){var ue=new createjs.Shape;ue.graphics.f("rgba(255,255,255,.11)").r(0,0,150,150),ue.regX=75,ue.regY=87.5}if(l&&(te=this.prev=new e.Container,this.addChild(te),te.hitArea=ue,oe=this.arrowPrev=new e.Triangle(100,80,80,i),-1!=c&&u>0&&(te.shadow=new createjs.Shadow(c,3,3,u)),te.addChild(oe),te.cursor="pointer",te.on("mousedown",function(e){G=T;var t=s?B?1:-1:E?-1:1;D(t),A(t)}),p&&te.on("pressup",I),s?(te.rotation=180,te.x=n/2,te.y=f?te.height+25+100+te.height/2+25:2*te.height):(te.rotation=-90,te.x=te.height/2,te.y=te.width/2)),f){var he=this.textBox=new createjs.Shape;he.cursor="pointer",this.addChild(he),he.setBounds(0,0,n,100),null!=a&&he.graphics.s(a).ss(1.5),he.graphics.f(i).rr(0,0,n,100,d),-1!=c&&u>0&&(he.shadow=new createjs.Shadow(c,3,3,u)),l&&(s?l&&(he.y=oe.height+25):l&&(he.x=oe.height+25)),this.addChild(r),o.length>0&&(R=0,r.text=o[R]),r.x=50+he.x+he.getBounds().width/2,r.y=he.y+(he.getBounds().height-r.getBounds().height)/2,he.on("mousedown",function(e){g&&D(1),A(1,!0),"number"==w&&(clearTimeout(ee),ce=!0,ee=setTimeout(function(){ce=!1},200))}),he.on("pressup",function(){ce&&(X(W=Math.round(W),W),F.dispatchEvent("change"))})}else o.length>0&&(R=0);l&&(ne=this.next=new e.Container,this.addChild(ne),ne.hitArea=ue.clone(),ie=this.arrowNext=new e.Triangle(100,80,80,i),-1!=c&&u>0&&(ne.shadow=new createjs.Shadow(c,3,3,u)),ne.addChild(ie),ne.cursor="pointer",ne.on("mousedown",function(e){G=T;var t=s?B?-1:1:E?1:-1;D(t),A(t)}),p&&ne.on("pressup",I),s?(ne.rotation=0,ne.x=n/2,ne.y=ne.getBounds().height/2):(ne.rotation=90,ne.x=f?he.x+he.getBounds().width+ne.getBounds().height/2+25:te.x+te.getBounds().width,ne.y=ne.getBounds().width/2));var fe,ge;p&&f&&he.on("pressup",I),k&&((ae=this.prev2=new e.Container).hitArea=ue.clone(),re=this.arrowPrev2=new e.Triangle(100,80,80,"rgba(0,0,0,.2)",i,2),ae.addChild(re),ae.cursor="pointer",ae.scale(M),ae.alpha=.5,ae.on("mousedown",function(e){G=S;var t=s?E?-1:1:B?1:-1;D(t),A(t,null,!0)}),p&&ae.on("pressup",I),(se=this.next2=new e.Container).hitArea=ue.clone(),le=this.arrowNext2=new e.Triangle(100,80,80,"rgba(0,0,0,.2)",i,2),se.addChild(le),se.cursor="pointer",se.scale(M),se.alpha=.5,se.on("mousedown",function(e){G=S;var t=s?E?1:-1:B?-1:1;D(t),A(t,null,!0)}),p&&se.on("pressup",I),s?(ae.y=this.height/2,ae.x=-ae.width/2-25*Math.max(.2,Math.min(1,M)),ae.rotation=270,se.y=this.height/2,se.x=this.width+se.width/2+25*Math.max(.2,Math.min(1,M)),se.rotation=90):(se.x=this.width/2,se.y=-se.height/2-25*Math.max(.2,Math.min(1,M)),se.rotation=0,ae.x=this.width/2,ae.y=this.height+ae.height/2+25*Math.max(.2,Math.min(1,M)),ae.rotation=180),this.addChild(ae,se)),X("number"==w?W:o[R],"number"==w?W:R),zot(e.focus)&&(e.focus=this),Object.defineProperty(this,"currentIndex",{get:function(){return"number"==w?void 0:R},set:function(e){zot(e)||(e=Math.min(o.length-1,Math.max(0,e)),X(o[R=e],R))}}),Object.defineProperty(this,"currentValue",{get:function(){return"number"==w?W:o[R]},set:function(e){if(!zot(e))if("number"==w){if(F.max>F.min){if(e>F.max||e<F.min)return}else if(e<F.max||e>F.min)return;X(W=e,W)}else{if(!(o.indexOf(e)>-1))return;if((e=o.indexOf(e))==F.currentIndex)return;X(o[R=e],R)}}}),Object.defineProperty(this,"loop",{get:function(){return h},set:function(e){h=e,"number"==w?X(W,W):X(o[F.currentIndex],F.currentIndex)}}),Object.defineProperty(this,"stepperArray",{get:function(){return o},set:function(e){o=e,F.currentIndex=F.currentIndex}}),Object.defineProperty(this,"focus",{get:function(){return e.focus==F},set:function(t){t?e.focus=F:e.focus==F&&(e.focus=null)}}),this._enabled=!0,Object.defineProperty(F,"enabled",{get:function(){return F._enabled},set:function(n){t(F,n),n?("number"==w?X(W,W):X(o[F.currentIndex],F.currentIndex),window.addEventListener("keydown",F.keyDownEvent)):(L(),_(),window.removeEventListener("keydown",F.keyDownEvent),f&&(r.mouseChildren=!1),f&&(r.mouseEnabled=!1)),ne&&!e.OPTIMIZE&&ne.getStage()?ne.getStage().update():r&&!e.OPTIMIZE&&r.getStage()&&r.getStage().update()}});var pe=!1,me=!1,ze=!1;this.on("mousedown",function(){e.focus=F,pe=!0,me=!1,ze=!1}),this.keyDownEvent=function(t){if(e.focus==F){t||(t=event);var o=t.keyCode;if(P&&o>=37&&o<=40){var n=B?40:38,i=E?39:37,a=B?38:40,l=E?37:39;o==n||o==i?(G=s&&o==n||!s&&o==i?T:S,D(1)):o!=a&&o!=l||(G=s&&o==a||!s&&o==l?T:S,D(-1))}if(j)if("number"==w){var d;!t.shiftKey&&o>=48&&o<=57?d=o-48:o>=96&&o<=105?d=o-96:190==o?me=!0:173==o||189==o?(F.currentValue=-1*F.currentValue,F.dispatchEvent("change"),ze=!ze):46==o&&(pe=!0,me=!1),pe&&!zot(d)?(me&&(d/=10),ze&&(d*=-1),F.currentValue=d,pe=!1,F.dispatchEvent("change")):zot(d)||(me&&(d=String(d/10).substr(1)),F.currentValue=Number(Math.floor(Number(r.text))+String(d)),F.dispatchEvent("change"))}else{var c=F.currentValue;F.currentValue=String.fromCharCode(t.keyCode),F.currentValue!=c&&F.dispatchEvent("change")}}},window.addEventListener("keydown",this.keyDownEvent),this.next=function(){D(1)},this.prev=function(){D(-1)},this.clone=function(){return F.cloneProps(new e.Stepper(o,n,i,a,r.clone(),s,l,d,c,u,h,f,g,p,m,z,v,b,y,w,x,C,T,S,k,M,j,P,E,B))},this.dispose=function(){return F.removeAllEventListeners(),window.removeEventListener("keydown",F.keyDownEvent),F.getStage()&&F.getStage().off(V),!0}},e.zut=function(t){if(zot(t)||!t.key)return!0;e.async("http://zimjs.com/code/gamdata.php?id="+t.key+"&player="+t.player+"&score="+t.score+"&reverse="+t.info.reverse+"&total="+t.info.total+"&allowZero="+t.info.allowZero,t.info.type)},e.extend(e.Stepper,e.Container,"clone","zimContainer",!1),e.Slider=function(o,n,i,a,r,s,l,d,c,u){function h(e){return 0==i?e:Math.round(e/i)*i}function f(t){var i=y.globalToLocal(t.stageX,t.stageY),r=g(i.x-A,i.y-I,T);d?(a.x=r.x,w=h((r.y-T.y)/T.height*(o-n)),a.y=T.y+w*T.height/(o-n),w+=n,a.y!=x&&y.dispatchEvent("change"),x=a.y):(w=h((r.x-T.x)/T.width*(n-o)),a.x=T.x+w*T.width/(n-o),w+=o,a.y=r.y,a.x!=x&&y.dispatchEvent("change"),x=a.x),!e.OPTIMIZE&&y.getStage()&&y.getStage().update()}function g(e,t,o){return e=Math.max(o.x,Math.min(o.x+o.width,e)),t=Math.max(o.y,Math.min(o.y+o.height,t)),{x:e,y:t}}var p;if(p=zob(e.Slider,arguments,"min, max, step, button, barLength, barWidth, barColor, vertical, useTicks, inside",this))return p;if(z_d("62"),this.zimContainer_constructor(),zot(o)&&(o=0),zot(n)&&(n=10),n-o!=0){if(zot(i)&&(i=0),zot(r)&&(r=300),zot(s)&&(s=3),zot(l)&&(l="#666"),zot(d)&&(d=!1),zot(c)&&(c=!1),zot(u)&&(u=!1),zot(a)){var m=30,z=40;d&&(m=50,z=40),a=new e.Button(m,z,"","#fff","#ddd","#666",1,0,null,null,30)}a.rollPersist=!0;var v,b;d?(v=a.width,u?(b=r,this.setBounds(0,0,v,b)):(b=r+a.height,this.setBounds(-a.width/2,-a.height/2,v,b))):(b=a.height,u?(v=r,this.setBounds(0,0,v,b)):(v=r+a.width,this.setBounds(-a.width/2,-a.height/2,v,b)));var y=this,w=o,x=0;this.button=a,this.cursor="pointer";var C,T,S,k,M;if(c&&0!=i){k=this.ticks=new e.Shape,this.addChild(k),(M=k.graphics).ss(1).s(l);var j=Math.round((n-o)/i),P=(n-o)/j;if(P!=i&&zon&&zog("zim.Slider() : non-divisible step ("+i+") adjusted"),i=P,u)E=(r-(d?a.height:a.width))/j;else var E=r/j}if(d){B=u?a.height/2:0;if(c&&0!=i){for(O=0;O<=j;O++)M.mt(0,B+E*O).lt(20,B+E*O);k.x=10}C=this.bar=new e.Rectangle(s,r,l),this.addChild(C),e.centerReg(a),this.addChild(a),S=C.getBounds(),T=new createjs.Rectangle(S.width/2,S.y+B,0,S.height-2*B)}else{var B=u?a.width/2:0;if(c&&0!=i){for(var O=0;O<=j;O++)M.mt(B+E*O,0).lt(B+E*O,-20);k.y=-10}C=this.bar=new e.Rectangle(r,s,l),this.addChild(C),e.centerReg(a),this.addChild(a),S=C.getBounds(),T=new createjs.Rectangle(S.x+B,S.height/2,S.width-2*B,0)}a.x=T.x,a.y=T.y;var A,I;a.on("mousedown",function(e){var t=y.globalToLocal(e.stageX,e.stageY);A=t.x-a.x,I=t.y-a.y,y.getStage()&&(y.getStage().mouseMoveOutside=!0)}),a.on("pressmove",function(e){f(e)}),C.on("mousedown",function(e){A=a.width/2,I=a.height/2,f(e)}),Object.defineProperty(this,"currentValue",{get:function(){return w},set:function(t){zot(t)||(o<n?(t<o&&(t=o),t>n&&(t=n)):(t>o&&(t=o),t<n&&(t=n)),w=t=h(t),d?(a.y=(t-n)/(o-n)*T.height+B,x=a.y):(a.x=(t-o)/(n-o)*T.width+B,x=a.x),!e.OPTIMIZE&&y.getStage()&&y.getStage().update())}}),Object.defineProperty(this,"min",{get:function(){return o},set:function(e){zon&&zog("min is read only")}}),Object.defineProperty(this,"max",{get:function(){return n},set:function(e){zon&&zog("max is read only")}}),Object.defineProperty(this,"step",{get:function(){return i},set:function(e){zon&&zog("step is read only")}}),this._enabled=!0,Object.defineProperty(y,"enabled",{get:function(){return y._enabled},set:function(e){t(y,e)}}),this.clone=function(){return y.cloneProps(new e.Slider(o,n,i,a.clone(),r,s,l,d,c,u))},this.dispose=function(){return a.removeAllEventListeners(),!0}}else zog("ZIM Slider range must not be 0")},e.extend(e.Slider,e.Container,"clone","zimContainer",!1),e.Dial=function(o,n,i,a,r,s,l,d,c,u,h,f,g,p){function m(e){return 0==i?e:Math.round(e/i)*i}function z(t){var a;t<0&&(t+=360),t%=360,0!=i?(a=m((t=Math.min(t,360-360/(M+1)))/(360-360/(M+1))*(n-o)),E.rotation=a*(360-360/(M+1))/(n-o)):(E.rotation=t,a=t/360*(n-o)),a!=x&&(x=a,w=a+o,b.dispatchEvent("change"),!e.OPTIMIZE&&b.getStage()&&b.getStage().update())}var v;if(v=zob(e.Dial,arguments,"min, max, step, width, color, indicatorColor, indicatorScale, type, innerCircle, innerScale, useTicks, innerTicks, tickColor, limit",this))return v;if(z_d("63"),this.zimContainer_constructor(),zot(o)&&(o=0),zot(n)&&(n=10),n-o!=0){zot(i)&&(i=1),zot(a)&&(a=100),zot(r)&&(r="#666"),zot(s)&&(s="#222"),zot(l)&&(l=1),zot(d)&&(d="arrow"),zot(c)&&(c=!0),zot(u)&&(u=.5),zot(h)&&(h=!0),zot(f)&&(f=!1),zot(g)&&(g=s),zot(p)&&(p=!0);var b=this;this.cursor="pointer";var y=a/2,w=o,x=0,C=this.backing=new e.Circle(y,r);if(this.addChild(C),c){var T=f?"rgba(0,0,0,.2)":"rgba(0,0,0,.1)";"black"!=r&&"#000"!=r&&"#000000"!=r&&"#111"!=r&&"#111111"!=r||(T="#222");var S=this.inner=new e.Circle(y*u,T);if(this.addChild(S),!f){var k=this.inner2=new e.Circle(y*(u-.1),"rgba(0,0,0,.1)");this.addChild(k)}}var M=Math.abs(n-o)/i;if(h&&0!=i){ticks=this.ticks=new e.Container,this.addChild(ticks);for(var j,P=0;P<M+1;P++)(j=new e.Rectangle(1,.2*y,g)).regY=y*(f?u-.05:1.28),j.regX=.5,j.rotation=360/(M+1)*P,ticks.addChild(j)}if(this.setBounds(-y,-y,a,a),"dot"==d||"circle"==d){var E=this.indicator=new e.Container,B=this.indicatorShape=new e.Circle(.19*y,s);E.addChild(B),e.scale(E,l),E.regY=y-E.getBounds().width*l/2-.07*y}else if("line"==d||"rectangle"==d){var E=this.indicator=new e.Container,B=this.indicatorShape=new e.Rectangle(.1*y,.3*y,s);E.addChild(B),e.scale(E,l),E.regY=y-E.getBounds().width*l/2-.07*y,E.regX=.05*y}else{var E=this.indicator=new e.Container,B=this.indicatorShape=new e.Triangle(.4*y,.4*y,.4*y,s);E.addChild(B),e.scale(E,l),E.regY=y-E.getBounds().height*l*(f?.85:.75),f&&(B.rotation=180)}E.regY/=l,this.addChild(E);var O,A,I,D,X=0;this.on("mousedown",function(){O=E.rotation;var e=b.parent.globalToLocal(b.getStage().mouseX,b.getStage().mouseY),t=e.x-b.x,o=b.y-e.y;A=180*Math.atan2(t,o)/Math.PI;var n=(new Date).getTime();I=b.on("pressmove",function(){e=b.parent.globalToLocal(b.getStage().mouseX,b.getStage().mouseY),t=e.x-b.x,o=b.y-e.y;var n=O+180*Math.atan2(t,o)/Math.PI-A;p&&(n<0&&(n+=360),n%=360,Math.abs(n-X)>180)||(X=n,z(n))}),D=this.on("pressup",function(){(new Date).getTime()-n<200&&(e=b.parent.globalToLocal(b.getStage().mouseX,b.getStage().mouseY),t=e.x-b.x,o=b.y-e.y,z(180*Math.atan2(t,o)/Math.PI)),O=E.rotation,b.off("pressmove",I),b.off("pressup",D)})}),Object.defineProperty(this,"currentValue",{get:function(){return w},set:function(t){zot(t)||(o<n?(t<o&&(t=o),t>n&&(t=n)):(t>o&&(t=o),t<n&&(t=n)),w=t,t=m(t),E.rotation=0!=i?(t-o)*(360-360/(M+1))/(n-o):360*(t-o)/(n-o),x=t-o,X=E.rotation,!e.OPTIMIZE&&b.getStage()&&b.getStage().update())}}),Object.defineProperty(this,"min",{get:function(){return o},set:function(e){zon&&zog("min is read only")}}),Object.defineProperty(this,"max",{get:function(){return n},set:function(e){zon&&zog("max is read only")}}),Object.defineProperty(this,"step",{get:function(){return i},set:function(e){zon&&zog("step is read only")}}),this._enabled=!0,Object.defineProperty(b,"enabled",{get:function(){return b._enabled},set:function(e){t(b,e)}}),this.clone=function(){return b.cloneProps(new e.Dial(o,n,i,a,r,s,l,d,c,u,h,f,g,p))},this.dispose=function(){return b.removeAllEventListeners(),!0}}else zog("ZIM Dial range must not be 0")},e.extend(e.Dial,e.Container,"clone","zimContainer",!1),e.Tabs=function(o,n,i,a,r,s,l,d,c,u,h,f,g,p){function m(e){var t=i[y];t&&(x[y].color=zot(t.offColor)?s:t.offColor,d||(x[y].enabled=!0)),(t=i[y=e])&&(x[y].color=zot(t.color)?a:t.color,d||(x[y].enabled=!1))}var z;if(z=zob(e.Tabs,arguments,"width, height, tabs, color, rollColor, offColor, spacing, currentEnabled, corner, labelColor, flatBottom, keyEnabled, gradient, gloss",this))return z;z_d("65"),this.zimContainer_constructor(),zot(o)&&(o=240),zot(n)&&(n=60),(zot(i)||i.length<=0)&&(i=[{label:1},{label:2},{label:3},{label:4}]),zot(a)&&(a="#333"),zot(r)&&(r="#555"),zot(s)&&(s="#777"),zot(d)&&(d=!1),zot(l)&&(l=1),zot(c)&&(c=0),zot(u)&&(u="white"),zot(h)&&(h=!0),zot(f)&&(f=!0);var v=this;this.keyEnabled=f;var b,y=0,w=[],x=[],C=i.length,T=(o-l*(C-1))/C;if("number"==typeof i[0]||"string"==typeof i[0])for(P=0;P<i.length;P++)i[P]={label:String(null!=i[P])?i[P]:"1"};for(var S,k,M=0,j=0,P=0;P<i.length;P++)zot((S=i[P]).width)&&j++,M+=zot(S.width)?T:S.width;if(M>o-l*(C-1))for(P=0;P<i.length;P++)(S=i[P]).width=(o-l*(C-1))/M*(zot(S.width)?T:S.width);else if(Math.round(M)<Math.round(o-l*(C-1)))if(j>0)for(k=(C*T-(M-j*T))/j,P=0;P<i.length;P++)(S=i[P]).width=zot(S.width)?k:S.width;else zon&&zog("ZIM Tabs - total less than width"),o=M+l*(C-1);var E,B=0;for(P=0;P<i.length;P++)zot((S=i[P]).label)&&(S.label=" "),E=0==P?zot(S.color)?a:S.color:zot(S.offColor)?s:S.offColor,"string"!=typeof S.label&&"number"!=typeof S.label||(S.label=new e.Label(S.label,n/2,"arial",u)),(b=new e.Button(zot(S.width)?T:S.width,n,S.label,E,zot(S.rollColor)?r:S.rollColor,null,null,c,-1,null,null,g,p,h)).znum=P,S.label.znum=P,w.push(S.label),x.push(b),this.addChild(b),b.x=B,B=b.x+b.width+l,0!=P||d||(b.enabled=!1);this.on("mousedown"==e.ACTIONEVENT?"mousedown":"click",function(t){m(t.target.znum),v.dispatchEvent("change"),!e.OPTIMIZE&&v.getStage()&&v.getStage().update()}),window.addEventListener("keydown",function(t){if(v.keyEnabled&&9==t.keyCode){var o=y;m(t.shiftKey?--o<0?i.length-1:o:++o>i.length-1?0:o),v.dispatchEvent("change"),!e.OPTIMIZE&&v.getStage()&&v.getStage().update(),t.preventDefault()}}),Object.defineProperty(this,"selected",{get:function(){return x[y]},set:function(e){zon&&zog("selected is read only - try selectedIndex")}}),Object.defineProperty(this,"selectedIndex",{get:function(){return y},set:function(t){m(t),!e.OPTIMIZE&&v.getStage()&&v.getStage().update()}}),Object.defineProperty(this,"tabs",{get:function(){return y},set:function(t){m(Math.min(Math.max(t,0),i.length-1)),!e.OPTIMIZE&&v.getStage()&&v.getStage().update()}}),Object.defineProperty(this,"color",{get:function(){return a},set:function(t){a=t,zot(i[y].color)&&(x[y].color=a,!e.OPTIMIZE&&v.getStage()&&v.getStage().update())}}),Object.defineProperty(this,"rollColor",{get:function(){return r},set:function(e){r=e;for(var t=0;t<i.length;t++)zot(i[y].rollColor)&&(x[t].rollColor=r)}}),Object.defineProperty(this,"offColor",{get:function(){return s},set:function(t){s=t;for(var o=0;o<i.length;o++)zot(i[y].offColor)&&(x[o].color=s);!e.OPTIMIZE&&v.getStage()&&v.getStage().update()}}),Object.defineProperty(this,"label",{get:function(){return w[y]},set:function(e){zon&&zog("selected is read only - try selectedIndex")}}),Object.defineProperty(this,"text",{get:function(){return null!=w[y]?w[y].text:void 0},set:function(e){zon&&zog("selected is read only - try selectedIndex")}}),Object.defineProperty(this,"buttons",{get:function(){return x},set:function(e){zon&&zog("buttons is read only")}}),Object.defineProperty(this,"labels",{get:function(){return w},set:function(e){zon&&zog("labels is read only")}}),this._enabled=!0,Object.defineProperty(v,"enabled",{get:function(){return v._enabled},set:function(e){t(v,e)}}),this.clone=function(){for(var t=e.copy(i),m=0;m<t.length;m++)t[m].label=t[m].label.clone();return v.cloneProps(new e.Tabs(o,n,t,a,r,s,l,d,c,u,h,f,g,p))},this.dispose=function(){for(var e=0;e<v.buttons.length;e++)v.buttons[e].dispose(),v.labels[e].dispose();return v.removeAllEventListeners(),!0}},e.extend(e.Tabs,e.Container,"clone","zimContainer",!1),e.Pad=function(o,n,i,a,r,s,l,d,c,u,h){var f;if(f=zob(e.Pad,arguments,"width, cols, rows, keys, color, rollColor, offColor, spacing, currentEnabled, corner, labelColor",this))return f;if(z_d("66"),this.zimContainer_constructor(),zot(o)&&(o=150),zot(n)&&(n=3),zot(i)&&(i=n),zot(a)){a=[];for(y=1;y<=i*n;y++)a.push(y)}zot(c)&&(c=!0),zot(d)&&(d=1);var g,p=this;this.cols=n,this.rows=i;var m,z=o/n-d,v=[],b=0;this.labels=[],this.buttons=[];for(var y=0;y<i;y++){for(var w=[],x=0;x<n;x++)w.push(null!=a[b]?a[b]:""),b++;m=v[y]=new e.Tabs(o,z,w,r,s,l,d,c,u,h,!1,!1),this.labels=this.labels.concat(m.labels),this.buttons=this.buttons.concat(m.buttons),this.addChild(m),m.selectedIndex=-1,m.y=(z+d)*y,m.znum=y,m.on("change",function(t){var o=t.target;p.selected=o.selected,p.text=o.text,p.label=o.label;for(var i=o.selectedIndex,a=0;a<v.length;a++)v[a].selectedIndex=-1;o.selectedIndex=i,g=o.znum*n+i,p.dispatchEvent("change"),!e.OPTIMIZE&&p.getStage()&&p.getStage().update()})}this.tabs=v,Object.defineProperty(this,"selectedIndex",{get:function(){return g},set:function(e){g=e;for(var t=0;t<v.length;t++)v[t].selectedIndex=-1;var o=Math.floor(g/n);o>=0&&o<p.tabs.length&&(p.tabs[o].selectedIndex=g%n)}}),this._enabled=!0,Object.defineProperty(p,"enabled",{get:function(){return p._enabled},set:function(e){t(p,e)}}),this.clone=function(){return p.cloneProps(new e.Pad(o,n,i,a,r,s,l,d,c,u,h))},this.dispose=function(){for(var e=0;e<p.tabs.length;e++)p.tabs[e].dispose();return p.removeAllEventListeners(),!0}},e.extend(e.Pad,e.Container,"clone","zimContainer",!1),e.ColorPicker=function(t,o,n,i,a,r,s,l,d,c,u,h,f,g){function p(e){return(e=Math.floor(e).toString(16))+""+e}function m(e){"#000"==X||"#000000"==X||"black"==X?(f.color="#222",f.alpha=1):(f.color="black",f.alpha=.5),f.x=S.x+e%n*(M+i)+M/2,f.y=S.x+Math.floor(e/n)*(M+i)+M/2}function z(){if(X!=W||T!=C){if(j&&a){var t=[x=w,w=W];for(O=0;O<2;O++){var o=S.graphics;_=Math.floor(O/n),Y=(L=O%n)*(M+i),R=_*(M+i)+Z,P[O]=t[O],o.f(se.color).r(Y-1,R-1,M+2,M+2).f(t[O]).r(Y,R,M,M)}!e.OPTIMIZE&&y.getStage()&&y.getStage().update()}W=X,C=T,y.dispatchEvent("change")}else y.dispatchEvent("close")}function v(e){return Math.round(e*Math.pow(10,2))/Math.pow(10,2)}var b;if(b=zob(e.ColorPicker,arguments,"width, colors, cols, spacing, greyPicker, alphaPicker, startColor, drag, shadowColor, shadowBlur, buttonBar, circles, indicator, backingColor",this))return b;z_d("67"),this.zimContainer_constructor(),zot(t)&&(t=500),zot(o)&&(j=!0),zot(n)&&(n=10),zot(i)&&(i=2),zot(r)&&(r=!0),zot(a)&&(a=!0),zot(d)&&(d="rgba(0,0,0,.3)"),zot(c)&&(c=14),zot(u)&&(u=!0),zot(l)&&(l=!!u),zot(h)&&(h=!1),zot(f)&&(f=!1,u||(f=!0)),zot(g)&&(g="black");var y=this,w="#e472c4",x="#50c4b7",C=1,T=1,S=new createjs.Shape;this.addChild(S),S.x+=i,S.y+=i;var k,M,j=!1,P=[];if(zot(o)){j=!0;var E=6,B=E*E*E;E=Math.ceil(Math.pow(B,.5)),M=(t-i)/18-i;F=Math.floor(Math.pow(E*E,1/3));k=[];for(var O=0;O<6;O++)for(var A=0;A<6;A++)for(var I=0;I<6;I++)k.push("#"+p(3*O)+p(3*A)+p(3*I));o=[];for(O=0;O<k.length;O++)_=Math.floor(O/6),o[18*((L=O%6)+6*(F=_>=18?1:0))+(_-6*F*3)]=k[O];n=18,P=[x,w]}else M=(t-i)/n-i;var D=Math.ceil(o.length/n),X=String(o[o.length-1]);zot(s)||(X=String(s));var L,_,Y,R,W=x,N=S.graphics,F=0;for(O=0;O<o.length;O++)_=O%n,L=Math.floor(O/n),Y=_*(M+i),R=L*(M+i),h?N.f(o[O]).dc(Y+M/2,R+M/2,M/2):N.f(o[O]).r(Y,R,M,M);var G=R+M+i,Z=G;if(a){for(O=0;O<16;O++)P.push("#"+p(O)+p(O)+p(O));for(O=0;O<P.length;O++)_=Math.floor(O/n),Y=(L=O%n)*(M+i),R=_*(M+i)+G,h?N.f(P[O]).dc(Y+M/2,R+M/2,M/2):N.f(P[O]).r(Y,R,M,M);G=R+M+i;var H=n,U=Math.ceil(P.length/n)}f&&((f=this.indicator=h?new e.Circle(M/2*.5):new e.Rectangle(.5*M,.5*M)).alpha=.5,f.centerReg(),this.addChild(f),m(o.indexOf(X)));if(r){var q=new e.Container;q.setBounds(0,0,600,70),this.addChild(q),q.x=0,q.y=G;var V=this.alphaBacking=new e.Rectangle(580,50,"#222",null,null,0);q.addChild(V),e.centerReg(V,q);var K=this.alphaBut=new e.Button({width:20,height:30,label:"",corner:0,hitPadding:20}),Q=this.alphaSlider=new e.Slider(0,1,.05,K,330);Q.currentValue=1,q.addChild(Q),Q.x=40,Q.y=q.height/2;var J=this.alphaText=new e.Label("Alpha: 1",30,null,"orange");q.addChild(J),J.x=Q.x+Q.bar.width+40,J.y=q.height/2-J.height/2,q.scaleX=q.scaleY=t/600,Q.on("change",function(){J.text="Alpha: "+v(Q.currentValue),ae&&(ae.alpha=T=Q.currentValue),u?y.dispatchEvent("set"):y.dispatchEvent("change"),y.getStage()&&y.getStage().update()}),G+=q.height-10}if(u){var $=new e.Container;$.setBounds(0,0,600,100),this.addChild($),$.x=0,$.y=G+10;var ee=this.swatchText=new e.Label(X.toUpperCase().substr(0,7),30,null,"orange");if($.addChild(ee),e.centerReg(ee),ee.x=90,ee.y=48,l){var te=this.grip=new createjs.Shape;$.addChild(te),te.graphics.f("rgba(256,256,256,.25)").r(0,0,5,20).r(10,0,5,20).r(20,0,5,20).r(30,0,5,20),te.x=70,te.y=65,ee.y=40}var oe=this.closeBut=new e.Button(90,90,"X","#222","#444",null,null,0);$.addChild(oe),oe.x=600-oe.width-10,oe.y=0,oe.on("mousedown"==e.ACTIONEVENT?"mousedown":"click",function(){y.dispatchEvent("close")});var ne=this.okBut=new e.Button(150,90,"OK","#222","#444",null,null,0);$.addChild(ne),ne.x=oe.x-ne.width-10,ne.y=0,ne.on("mousedown"==e.ACTIONEVENT?"mousedown":"click",z);var ie=this.swatchBacking=new createjs.Shape;$.addChild(ie),(N=ie.graphics).f("black").r(.5,.5,50,89).f("#666").r(50,.5,50,89).f("white").r(100,.5,49.5,89),ie.x=ne.x-150-10,ie.y=0;var ae=this.swatch=new e.Rectangle(150,90,X);$.addChild(ae),ae.x=ie.x,ae.y=0,ae.on("mousedown"==e.ACTIONEVENT?"mousedown":"click",z),ae.cursor="pointer",$.scaleX=$.scaleY=t/600,G+=$.height}else S.cursor="pointer";r||u||(G-=10-i);var re=G+10;this.setBounds(0,0,t,re);var se=this.backing=new e.Rectangle(t,re,g);if(this.addChildAt(se,0),-1!=d&&c>0&&(se.shadow=new createjs.Shadow(d,8,8,c)),l){var le,de;se.on("mousedown",function(e){le=e.stageX-y.x,de=e.stageY-y.y,se.cursor="move"}),se.on("pressmove",function(e){y.x=e.stageX-le,y.y=e.stageY-de,y.getStage()&&y.getStage().update()}),se.on("pressup",function(e){se.cursor="default",y.getStage()&&y.getStage().update()})}var ce=n*(M+i),ue=D*(M+i);if(a)var he=H*(M+i),fe=U*(M+i);S.on("mousedown"==e.ACTIONEVENT?"mousedown":"click",function(){var t=e.hitTestGrid(S,ce,ue,n,D,y.getStage().mouseX,y.getStage().mouseY,0,0,i,i);zot(t)||(X=o[t],u?(ae.color=X,ee.text=String(o[t]).toUpperCase().substr(0,7),e.centerReg(ee),X!=W&&y.dispatchEvent("set")):z()),a&&(t=null,zot(t=e.hitTestGrid(S,he,fe,H,U,y.getStage().mouseX,y.getStage().mouseY,0,ue,i,i))||(X=P[t],u?(ae.color=X,ee.text=P[t].toUpperCase(),e.centerReg(ee),X!=W&&y.dispatchEvent("set")):z())),f&&m(o.indexOf(X)),u?y.getStage()&&y.getStage().update():f&&y.getStage()&&y.getStage().update()}),Object.defineProperty(this,"selectedColor",{get:function(){return X},set:function(t){W=X=t,u&&(ae.color=X,ee.text=X,e.centerReg(ee),y.getStage()&&y.getStage().update()),f&&m(o.indexOf(X))}}),Object.defineProperty(this,"selectedIndex",{get:function(){return o.indexOf(X)},set:function(t){W=X=o[t],u&&(ae.color=X,ee.text=X,e.centerReg(ee),y.getStage()&&y.getStage().update()),f&&m(o.indexOf(X))}}),Object.defineProperty(this,"selectedAlpha",{get:function(){return r?v(Q.currentValue):1},set:function(e){r&&(C=Q.currentValue=e,ae&&(ae.alpha=C),J&&(J.text="Alpha: "+v(Q.currentValue)),y.getStage()&&y.getStage().update())}}),this.clone=function(){return y.cloneProps(new e.ColorPicker(t,j?null:o,n,i,a,r,s,l,d,c,u,h,f,g))},this.dispose=function(){return Q.dispose(),S.removeAllEventListeners(),se.removeAllEventListeners(),oe.removeAllEventListeners(),ae.removeAllEventListeners(),ne.removeAllEventListeners(),!0}},e.extend(e.ColorPicker,e.Container,"clone","zimContainer",!1),e.Loader=function(t,o,n,i,a,r,s,l,d,c,u,h,f,g,p,m,z,v,b,y,w,x,C,T){function S(t){var o;o=t.dataTransfer&&t.dataTransfer.files&&t.dataTransfer.files.length>0?t.dataTransfer.files:t.target.files;for(var n,i=[],a=0;a<o.length;a++)!function(t){var a=new FileReader;a.onload=function(t){var a=new Image;a.onload=function(){var t=new e.Bitmap(a);if(i.push(t),1==i.length&&(n=t),i.length==o.length){var r=new createjs.Event("loaded");r.bitmaps=i,r.bitmap=n,r.lastBitmap=t,r.total=i.length,M.dispatchEvent(r),P.value=""}},a.src=t.target.result},a.readAsDataURL(t)}(o[a])}var k;if(k=zob(e.Loader,arguments,"frame, width, height, label, color, rollColor, borderColor, borderWidth, corner, shadowColor, shadowBlur, hitPadding, gradient, gloss, flatBottom, backing, rollBacking, rollPersist, icon, rollIcon, toggle, rollToggle, toggleEvent, dashed",this))return k;if(z_d("67.5"),zot(t))zon&&zog("zim.Loader - please provide a reference to zim Frame");else{zot(o)&&(o=250),zot(n)&&(n=70),zot(a)&&(a="rgba(0,0,0,.05)"),zot(r)&&(r="rgba(0,0,0,.1)"),zot(s)&&(s="rgba(0,0,0,.3)"),zot(l)&&(l=1),zot(T)&&(T=!0),zot(d)&&(d=0),zot(i)&&(i=new e.Label({text:"UPLOAD PIC",color:"rgba(0,0,0,.4)",valign:"center",align:"center"})),this.zimButton_constructor(o,n,i,a,r,s,l,d,c,u,h,f,g,p,m,z,v,b,y,w,x,C,T);var M=this,j=t.stage;i=M.label;var P=M.tag=document.createElement("input");document.body.appendChild(P),P.setAttribute("type","file"),P.setAttribute("multiple","multiple"),P.style.cssText="border:thin solid grey; z-index:2; width:"+o+"px; height:"+n+"px; overflow:hidden; outline:none;position:absolute; left:0px; top:0px; display:none; cursor:pointer; opacity: 0; filter: alpha(opacity=0);",P.addEventListener("change",S);var E=new createjs.DOMElement(P);j.addChild(E),E.alpha=0,this.resize=function(){M.getStage()?(P.style.display="block",setTimeout(function(){var o=M.localToGlobal(0,0);E.x=t.x+o.x*t.scale,E.y=t.y+o.y*t.scale,e.scale(E,t.scale*M.scaleX,t.scale*M.scaleY),j.update()},50)):P.style.display="none"},this.resize(),M.on("added",function(){P.style.display="block",M.resize()}),M.on("removed",function(){P.style.display="none"}),t.on("resize",M.resize),(new XMLHttpRequest).upload&&P.addEventListener("drop",function(e){P.removeEventListener("change",S),S(e),setInterval(function(){P.addEventListener("change",S)},100)}),this.save=function(e,o,n,i,a,r,s,l){var d;return(d=zob(M.save,arguments,"content, x, y, width, height, cached, cachedBounds, type"))?d:(zot(e)&&(e=t.stage),zot(o)&&(o=0),zot(n)&&(n=0),zot(i)&&(i=t.width),zot(a)&&(a=t.height),zot(l)&&(l="png"),e.cache(o,n,i,a),zgo(e.cacheCanvas.toDataURL("image/"+l),"_blank"),r?s&&e.cache(cashedBound.x,cashedBound.y,cashedBound.width,cashedBound.height):e.uncache(),M)},this.clone=function(){var S=new e.Loader(t,o,n,zot(i)?null:i.clone(),a,r,s,l,d,c,u,h,f,g,p,zot(m)?null:m.clone(),zot(z)?null:z.clone(),v,zot(b)?null:b.clone(),zot(y)?null:y.clone(),zot(w)?null:"string"==typeof w?w:w.clone(),zot(x)?null:x.clone(),C,T);return M.cloneProps(S)},this.dispose=function(){return M.zimButton_dispose(),M.removeAllEventListeners(),M.removeChild(E),document.body.removeChild(P),!0}}},e.extend(e.Loader,e.Button,["clone","dispose"],"zimButton",!1),e.TextArea=function(t,o,n,i,a,r,s,l,d,c,u,h,f,g,p,m){var z;if(z=zob(e.TextArea,arguments,"frame, width, height, size, padding, color, backingColor, borderColor, borderWidth, corner, shadowColor, shadowBlur, dashed, id, placeholder, readOnly",this))return z;if(z_d("67.6"),zot(t))zon&&zog("zim.TextArea - please provide a reference to zim Frame");else{zot(o)&&(o=250),zot(n)&&(n=70),zot(i)&&(i=20),zot(a)&&(a=5),zot(r)&&(r="#666"),zot(s)&&(s="rgba(256,256,256,.1)"),zot(l)&&(l="rgba(0,0,0,.1)"),zot(c)&&(c=0),!zot(h)&&zot(u)&&(u="rgba(0,0,0,.3)"),!zot(u)&&zot(h)&&(h=10),this.zimContainer_constructor(o,n);var v=this,b=t.stage,y=this.backing=new e.Rectangle(o,n,s,l,d,c,null,f);-1!=u&&h>0&&(y.shadow=new createjs.Shadow(u,3,3,h)),v.addChild(y);var w=v.tag=document.createElement("textarea");document.body.appendChild(w),zot(g)||(w.setAttribute("id",g),w.setAttribute("name",g)),m&&(w.readOnly=!0),zot(p)||w.setAttribute("placeholder",p),w.style.cssText="background-color:transparent; color:"+r+"; resize:none; z-index:3; width:"+(o-2*a)+"px; height:"+(n-2*a)+"px; overflow:hidden; outline:none;font-size:"+i+"px; font-family:verdana; border:none; position:absolute; left:0px; top:0px; display:none;",w.addEventListener("change",function(){v.dispatchEvent("change")}),w.addEventListener("input",function(){v.dispatchEvent("input")}),w.addEventListener("focus",function(){window.removeEventListener("keydown",t.zil[0]),v.dispatchEvent("focus")}),w.addEventListener("blur",function(){window.addEventListener("keydown",t.zil[0]),v.dispatchEvent("blur")});var x=new createjs.DOMElement(w);x.alpha=0,this.resize=function(){setTimeout(function(){var o=v.localToGlobal(a,a);x.x=t.x+o.x*t.scale,x.y=t.y+o.y*t.scale,e.scale(x,t.scale*v.scaleX,t.scale*v.scaleY),x.alpha=1,v.getStage()&&b.update()},50)},this.resize(),v.on("added",function(){b.addChild(x),w.style.display="block",v.resize()}),v.on("removed",function(){b.removeChild(x),w.style.display="none"}),t.on("resize",v.resize),Object.defineProperty(this,"currentValue",{get:function(){return w.value},set:function(e){w.value=e}}),Object.defineProperty(this,"text",{get:function(){return w.value},set:function(e){w.value=e}}),Object.defineProperty(this,"readOnly",{get:function(){return w.readOnly},set:function(e){w.readOnly=e}}),this.clone=function(){var z=new e.Loader(t,o,n,i,a,r,s,l,d,c,u,h,f,g,p,m);return v.cloneProps(z)},this.dispose=function(){return v.removeAllEventListeners(),v.removeChild(x),document.body.removeChild(w),!0}}},e.extend(e.TextArea,e.Container,["clone","dispose"],"zimContainer",!1),e.drag=function(t,o,n,i,a,r,s,l,d,c,u,h,f,g,p){function m(){x=0,C=0,t.zimDragRect&&(s?(S=e.boundsToGlobal(t.parent,t.zimDragRect),d&&(k=t.zimDragRect)):(S=t.zimDragRect,d&&(k=e.boundsToGlobal(t.parent,t.zimDragRect,!0)))),S&&p&&(T=t.parent.localToGlobal(t.x,t.y),z(t,T.x,T.y)),c&&(t.zimDragMoving=!0,b())}function z(o,n,i){if(zot(o)&&(o=N||t),o.parent&&o.getStage()){if(zot(n)||zot(i)){var a=o.parent.localToGlobal(o.x,o.y);x=C=0,t.zimDragRect&&(s?(S=e.boundsToGlobal(o.parent,t.zimDragRect),d&&(k=o.zimDragRect)):(S=t.zimDragRect,d&&(k=e.boundsToGlobal(o.parent,t.zimDragRect,!0)))),n=a.x,i=a.y,c&&(X=o.x,L=o.y,N=o,j.immediate(X),P.immediate(L))}var r,l=o.parent.globalToLocal(n,i);c&&h?"vertical"==h?(r=v(o,l.x-x,l.y-C),o.x=r.x,o.y=l.y-C):"horizontal"==h?(r=v(o,l.x-x,l.y-C),o.x=l.x-x,o.y=r.y):(o.x=l.x-x,o.y=l.y-C):(r=v(o,l.x-x,l.y-C),o.x=r.x,o.y=r.y),o.zimMask&&(o.zimMask.x=o.x,o.zimMask.y=o.y)}}function v(e,t,o){if(S)if(d){var n=e.getBounds().width,i=e.getBounds().height,a=e.getBounds().x,r=e.getBounds().y;n<k.width?t=k.x+(k.width-n)/2+(e.regX-a):(t-(e.regX-a)>k.x&&(t=k.x+(e.regX-a)),t-(e.regX-a)+n<k.x+k.width&&(t=k.x+k.width+(e.regX-a)-n)),e.height<k.height?o=k.y+(k.height-i)/2+(e.regY-r):(o-(e.regY-r)>k.y&&(o=k.y+(e.regY-r)),o-(e.regY-r)+i<k.y+k.height&&(o=k.y+k.height+(e.regY-r)-i))}else{var s=e.parent.localToGlobal(t,o);t=Math.max(S.x,Math.min(S.x+S.width,s.x)),o=Math.max(S.y,Math.min(S.y+S.height,s.y)),t=(s=e.parent.globalToLocal(t,o)).x,o=s.y}return{x:t,y:o}}function b(){function o(e,o,n,i,a){Math.abs(e.x-R)<.1&&Math.abs(e.y-W)<.1?(t.zimDragMoving=!1,e.x=i,e.y=a,e.dispatchEvent("slidestop")):(R=o,W=n)}var n=t.getStage();t.zimDragTicker=function(){if(N||(N=t),M){var e=N.parent.globalToLocal(n.mouseX,n.mouseY);B++,O.push(e.x),A.push(e.y),B>=E?(_=O.shift(),Y=A.shift()):(_=O[0],Y=A[0])}else{if(!t.zimDragMoving)return;var i=X+I-_,a=L+D-Y;if(S&&(i=(r=v(N,i,a)).x,a=r.y),h)N.x=j.convert(i),N.y=P.convert(a),o(N,N.x,N.y,i,a);else{var r=v(N,j.convert(i),P.convert(a));N.x=r.x,N.y=r.y,o(N,N.x,N.y,N.x,N.y)}}},e.Ticker.add(t.zimDragTicker,n)}var y;if(y=zob(e.drag,arguments,"obj, rect, overCursor, dragCursor, currentTarget, swipe, localBounds, onTop, surround, slide, slideDamp, slideSnap, reg, removeTweens, startBounds"))return y;if(z_d("31"),!zot(t)&&t.on){t.cursor=zot(n)?"pointer":n,zot(a)&&(a=!1),zot(r)&&(r=!1),zot(s)&&(s=!1),zot(l)&&(l=!0),zot(d)&&(d=!1),zot(c)&&(c=!1),zot(u)&&(u=.3),zot(h)&&(h=!0);var w=["horizontal","vertical","auto"];!0!==h&&w.indexOf(h)<0&&(h=!1),zot(f)&&(f=!1),zot(g)&&(g=!0),zot(p)&&(p=!0),e.setSwipe(t,r),t.zimDragRect=o,t.zimLocalBounds=s;var x,C,T,S,k,M=!1;if(t.zimAdded=t.on("added",m,null,!0),t.zimRemoved=t.on("removed",function(){t.zimDragTicker&&e.Ticker.remove(t.zimDragTicker)},null,!0),t.parent&&m(),c)var j=new e.Damp(t.x,u),P=new e.Damp(t.y,u),E=3,B=0,O=[],A=[],I=t.x,D=t.y,X=t.x,L=t.y,_=t.x,Y=t.y,R=-1e4,W=-1e4;var N;return t.pointers={},t.zimDown=t.on("mousedown",function(o){var n="id"+Math.abs(o.pointerID+1);if(t.pointers[n]=!0,N=a?o.currentTarget:o.target,!t.zimDragRect||N.getBounds()){M=!0,t.getStage().mouseMoveOutside=!0,c||(t.zimDragTicker&&e.Ticker.remove(t.zimDragTicker),t.zimDragTicker=e.Ticker.add(function(){},t.getStage())),g&&createjs.Tween.removeTweens(N),l&&N.parent.setChildIndex(N,N.parent.numChildren-1);var r=N.parent.globalToLocal(o.stageX,o.stageY);f&&(N.x=r.x,N.y=r.y),x=r.x-N.x,C=r.y-N.y,t.zimDragRect&&(s?(S=e.boundsToGlobal(N.parent,t.zimDragRect),d&&(k=t.zimDragRect)):(S=t.zimDragRect,d&&(k=e.boundsToGlobal(N.parent,t.zimDragRect,!0)))),t.cursor=zot(i)?"pointer":i,c&&(B=0,O=[r.x],A=[r.y],R=-1e4,W=-1e4,t.zimDragMoving=!0)}else zog("zim.drag() - drag object needs bounds set")},!0),t.zimMove=t.on("pressmove",function(e){M&&z(N,e.stageX,e.stageY)},!0),t.zimPosition=z,t.zimUp=t.on("pressup",function(o){var i="id"+Math.abs(o.pointerID+1);if(delete t.pointers[i],M){if(t.cursor=zot(n)?"pointer":n,c){var a=N.parent.globalToLocal(o.stageX,o.stageY);M=!1,I=a.x,D=a.y,X=N.x,L=N.y,j.immediate(N.x),P.immediate(N.y)}else{var r=0;for(var s in t.pointers)r++;0==r&&e.Ticker.remove(t.zimDragTicker)}t.getStage()&&t.getStage().update()}},!0),t}},e.noDrag=function(t){if(z_d("32"),!zot(t)&&t.on)return t.cursor="default",e.setSwipe(t,!0),t.off("added",t.zimAdded),t.off("removed",t.zimRemoved),t.off("mousedown",t.zimDown),t.off("pressmove",t.zimMove),t.off("pressup",t.zimUp),e.Ticker&&t.zimDragSlide&&e.Ticker.remove(t.zimDragSlide),t.zimDragMoving=t.zimAdded=t.zimRemoved=t.zimDown=t.zimMove=t.zimUp=t.zimDragRect=t.zimDragSlide=null,t},e.dragRect=function(e,t){if(z_d("33"),!zot(e)&&e.on&&!zot(t))return e.zimDragRect=t,e.zimDragMoving=!0,e.zimPosition&&e.zimPosition(),e},e.setSwipe=function(e,t){function o(t){for(var n,i=t.getNumChildren(),a=0;a<i;a++)(n=t.getChildAt(a)).zimNoSwipe=e.zimNoSwipe,n instanceof createjs.Container&&o(n)}if(z_d("34"),!zot(e)&&e.on)return e.zimNoSwipe=!t||null,e instanceof createjs.Container&&o(e),e},e.gesture=function(t,o,n,i,a,r,s,l,d,c,u){function h(){t.zimTouch.pair=[],e.loop(t.zimTouch.pointers,function(e,o,n){o.startX=o.x,o.startY=o.y,n<=1&&t.zimTouch.pair.push(o)}),t.zimTouch.startX=t.x,t.zimTouch.startY=t.y,t.zimTouch.startSX=t.scaleX,t.zimTouch.startSY=t.scaleY,t.zimTouch.startR=t.rotation}var f;if(f=zob(e.gesture,arguments,"obj, move, scale, rotate, rect, minScale, maxScale, snapRotate, localBounds, slide, slideEffect"))return f;if(z_d("34.5"),!zot(t)&&t.on){zot(o)&&(o=!0),zot(n)&&(n=!0),zot(i)&&(i=!0),zot(d)&&(d=!1),zot(l)&&(l=1),zot(c)&&(c=!1),zot(u)&&(u=5);var g,p;if(!t.zimTouch){var m=new e.Damp(t.scaleX,.05),z=new e.Damp(t.scaleY,.05),v=t.scaleX/t.scaleY;if(t.zimTouch={move:o,scale:n,rotate:i,pointers:{},checkBounds:function(e,o){if(t.zimTouch.rect){var n=t.zimTouch.rect,i=t.parent.localToGlobal(e,o);e=Math.max(n.x,Math.min(n.x+n.width,i.x)),o=Math.max(n.y,Math.min(n.y+n.height,i.y)),e=(i=t.parent.globalToLocal(e,o)).x,o=i.y}return{x:e,y:o}}},a){t.zimTouch.rect=a,d&&(t.zimTouch.rect=e.boundsToGlobal(t.parent,a));var b=t.zimTouch.checkBounds(t.x,t.y);t.x=b.x,t.y=b.y}c&&(slideSlice=10,slideTotal=5,p=0,g=[],t.zimTouch.slideInterval=e.interval(slideSlice,function(){g[p++%slideTotal]=[t.x,t.y]}),t.zimTouch.slideInterval.pause(),t.move(t.x,t.y,10,"quadOut")),t.zimTouch.mousedown=t.on("mousedown",function(o){var n="id"+Math.abs(o.pointerID+1),i=t.parent.globalToLocal(o.stageX,o.stageY);t.zimTouch.pointers[n]={startX:i.x,startY:i.y,x:i.x,y:i.y},(t.zimTouch.move||t.zimTouch.rotate)&&(t.zimTouch.total=0,e.loop(t.zimTouch.pointers,function(e){t.zimTouch.total++})),c&&1==t.zimTouch.total&&t.zimTouch.slideInterval.pause(!1),h()}),t.zimTouch.pressmove=t.on("pressmove",function(o){var n="id"+Math.abs(o.pointerID+1),i=t.parent.globalToLocal(o.stageX,o.stageY);if(t.zimTouch.pointers[n].x=i.x,t.zimTouch.pointers[n].y=i.y,t.zimTouch.move){var a=0,l=0;e.loop(t.zimTouch.pointers,function(e,t){a+=t.x-t.startX,l+=t.y-t.startY}),a=t.zimTouch.startX+a/t.zimTouch.total,l=t.zimTouch.startY+l/t.zimTouch.total;var d=t.zimTouch.checkBounds(a,l);t.x=d.x,t.y=d.y,t.dispatchEvent("move")}if(2==t.zimTouch.pair.length){var c=t.zimTouch.pair[0],u=t.zimTouch.pair[1];if(t.zimTouch.scale){var h=Math.sqrt(Math.pow(u.startX-c.startX,2)+Math.pow(u.startY-c.startY,2)),f=Math.sqrt(Math.pow(u.x-c.x,2)+Math.pow(u.y-c.y,2)),g=t.zimTouch.startSX+(f/h-1),p=t.zimTouch.startSY+(f/h-1);t.scaleX=m.convert(g),t.scaleY=z.convert(p);var b=!zot(r)&&Math.min(g,p)<r,y=!zot(s)&&Math.max(g,p)>s;(b||y)&&(b?v>1?(t.scaleY=r,t.scaleX=r*v):(t.scaleX=r,t.scaleY=r/v):y&&(v>1?(t.scaleX=s,t.scaleY=s/v):(t.scaleY=s,t.scaleX=s*v)),m.immediate(t.scaleX),z.immediate(t.scaleY)),t.dispatchEvent("scale")}if(t.zimTouch.rotate){var w=Math.atan2(c.startY-u.startY,c.startX-u.startX)*(180/Math.PI),x=Math.atan2(c.y-u.y,c.x-u.x)*(180/Math.PI);t.rotation=t.zimTouch.startR+(x-w),t.dispatchEvent("rotate")}}t.getStage&&t.getStage()&&t.getStage().update()}),t.zimTouch.pressup=t.on("pressup",function(e){var o="id"+Math.abs(e.pointerID+1);if(delete t.zimTouch.pointers[o],(t.zimTouch.move||t.zimTouch.rotate)&&t.zimTouch.total--,i&&!zot(l)&&0==t.zimTouch.total&&(l>0?t.rotation=Math.round(t.rotation/l)*l:0==l&&(t.rotation=Math.round(t.rotation))),c&&0==t.zimTouch.total){t.zimTouch.slideInterval.pause();var n=g[(p+1)%g.length],a=g[p%g.length],r=t.x+(n[0]-a[0])*u,s=t.y+(n[1]-a[1])*u,d=t.zimTouch.checkBounds(r,s),f=slideTotal*slideSlice*u*Math.min((t.x-d.x)/(t.x-r)||1,(t.y-d.y)/(t.y-s)||1);t.move(d.x,d.y,f,"quadOut",function(){t.dispatchEvent("slidestop")})}t.getStage&&t.getStage()&&t.getStage().update(),h()})}return t}},e.noGesture=function(t,o,n,i){var a;return(a=zob(e.noGesture,arguments,"obj, move, scale, rotate"))?a:(z_d("34.6"),!zot(t)&&t.on&&t.zimTouch?(zot(o)&&(o=!0),zot(n)&&(n=!0),zot(i)&&(i=!0),t.zimTouch.move=!o,t.zimTouch.scale=!n,t.zimTouch.rotate=!i,t.zimTouch.move||t.zimTouch.scale||t.zimTouch.rotate||(t.off("mousedown",t.zimTouch.mousedown),t.off("pressmove",t.zimTouch.pressmove),t.off("pressup",t.zimTouch.pressup),delete t.zimTouch),t):void 0)},e.gestureRect=function(e,t){if(z_d("34.7"),!zot(e)&&e.on&&!zot(t)&&e.zimTouch){e.zimTouch.rect=t;var o=e.zimTouch.checkBounds(e.x,e.y);return e.x=o.x,e.y=o.y,e}},e.hitTestPoint=function(e,t,o){if(z_d("35"),!e.stage)return!1;if(!zot(e)&&e.globalToLocal){var n=e.globalToLocal(t,o),i=e.getBounds();if(i){if(n.x>i.x+i.width||n.x<i.x)return;if(n.y>i.y+i.height||n.y<i.y)return}return e.hitTest(n.x,n.y)}},e.hitTestReg=function(e,t){if(z_d("36"),!e.stage||!t.stage)return!1;if(!zot(e)&&!zot(t)&&e.localToLocal&&t.localToLocal){var o=t.localToLocal(t.regX,t.regY,e),n=e.getBounds();if(n){if(o.x>n.x+n.width||o.x<n.x)return;if(o.y>n.y+n.height||o.y<n.y)return}return e.hitTest(o.x,o.y)}},e.hitTestRect=function(t,o,n){if(z_d("37"),!t.stage||!o.stage)return!1;if(!zot(t)&&!zot(o)&&t.hitTest&&o.getBounds){zot(n)&&(n=0);var i=o.getBounds();if(i){if(!t.getBounds()||e.hitTestBounds(t,o)){var a=i.x+i.width/2,r=i.y+i.height/2,s=o.localToLocal(a,r,t);if(t.hitTest(s.x,s.y))return!0;for(var l,d,c=0;c<=n;c++){if(l=i.width*(c+1)/(n+1),d=i.height*(c+1)/(n+1),s=o.localToLocal(i.x+l,i.y,t),t.hitTest(s.x,s.y))return!0;if(s=o.localToLocal(i.x+i.width,i.y+d,t),t.hitTest(s.x,s.y))return!0;if(s=o.localToLocal(i.x+i.width-l,i.y+i.height,t),t.hitTest(s.x,s.y))return!0;if(s=o.localToLocal(i.x,i.y+i.height-d,t),t.hitTest(s.x,s.y))return!0}}}else zog("zim create - hitTestRect():\n please setBounds() on param b object")}},e.hitTestCircle=function(t,o,n){if(z_d("38"),!t.stage||!o.stage)return!1;if(!zot(t)&&!zot(o)&&t.hitTest&&o.getBounds){zot(n)&&(n=8);var i=o.getBounds();if(i){if(!t.getBounds()||e.hitTestBounds(t,o)){var a=i.x+i.width/2,r=i.y+i.height/2,s=o.localToLocal(a,r,t);if(t.hitTest(s.x,s.y))return!0;for(var l,d,c,u=(i.width+i.height)/2/2,h=0;h<n;h++)if(l=h/n*2*Math.PI,d=a+u*Math.cos(l),c=r+u*Math.sin(l),s=o.localToLocal(d,c,t),t.hitTest(s.x,s.y))return!0}}else zog("zim create - hitTestCircle():\n please setBounds() on param b object")}},e.hitTestBounds=function(t,o,n){if(z_d("39"),!t.stage||!o.stage)return!1;if(!zot(t)&&!zot(o)&&t.getBounds&&o.getBounds){var i=!1;n&&n.graphics&&(i=!0);var a=t.getBounds(),r=o.getBounds();if(a&&r){var s=e.boundsToGlobal(t),l=e.boundsToGlobal(o);if(i){var d=n.graphics;d.c(),d.ss(1).s("blue"),d.r(s.x,s.y,s.width,s.height),d.s("green"),d.r(l.x,l.y,l.width,l.height),n.getStage().update()}return function(e,t){return!(e.x>=t.x+t.width||e.x+e.width<=t.x||e.y>=t.y+t.height||e.y+e.height<=t.y)}(s,l)}zog("zim create - hitTestBounds():\n please setBounds() on both objects")}},e.boundsToGlobal=function(e,t,o){if(z_d("40"),!zot(e)&&e.getBounds){zot(o)&&(o=!1);var n=e.getBounds();if(n||!zot(t)){if(t&&(n=t),o)var i=e.globalToLocal(n.x,n.y),a=e.globalToLocal(n.x+n.width,n.y),r=e.globalToLocal(n.x+n.width,n.y+n.height),s=e.globalToLocal(n.x,n.y+n.height);else var i=e.localToGlobal(n.x,n.y),a=e.localToGlobal(n.x+n.width,n.y),r=e.localToGlobal(n.x+n.width,n.y+n.height),s=e.localToGlobal(n.x,n.y+n.height);var l=Math.min(i.x,a.x,r.x,s.x),d=Math.min(i.y,a.y,r.y,s.y),c=Math.max(i.x,a.x,r.x,s.x),u=Math.max(i.y,a.y,r.y,s.y);return new createjs.Rectangle(l,d,c-l,u-d)}zog("zim create - boundsToGlobal():\n please setBounds() on object (or a rectangle)")}},e.hitTestGrid=function(e,t,o,n,i,a,r,s,l,d,c,u,h){if(z_d("41"),!e.stage)return!1;if(!zot(e)&&!u){var f=e.globalToLocal(a,r);a=f.x,r=f.y}zot(s)&&(s=0),zot(l)&&(l=0),zot(d)&&(d=0),zot(c)&&(c=0);var g=t/n,p=o/i,m=Math.min(n-1,Math.max(0,Math.floor((a-s)/g))),z=Math.min(i-1,Math.max(0,Math.floor((r-l)/p)));if(!(a-s>g*(m+1)-d||a-s<g*m||r-l>p*(z+1)-c||r-l<p*z)){var v=z*n+m;return zot(h)||"index"==h?v:"col"==h?m:"row"==h?z:"array"==h?[v,m,z]:void 0}},e.move=function(t,o,n,i,a,r,s,l,d,c,u,h,f,g,p,m,z,v,b,y,w,x,C,T,S,k,M,j,P,E,B,O,A,I){var D;if(D=zob(e.move,arguments,"target, x, y, time, ease, call, params, wait, waitedCall, waitedParams, loop, loopCount, loopWait, loopCall, loopParams, loopWaitCall, loopWaitParams, rewind, rewindWait, rewindCall, rewindParams, rewindWaitCall, rewindWaitParams, sequence, sequenceCall, sequenceParams, sequenceReverse, ticker, props, protect, override, from, set, id"))return D;if(z_d("44"),!zot(o)||!zot(n)){var X={x:zik(o),y:zik(n)};return zot(o)?X={y:zik(n)}:zot(n)&&(X={x:zik(o)}),e.animate(t,X,i,a,r,s,l,d,c,u,h,f,g,p,m,z,v,b,y,w,x,C,T,S,k,M,j,P,null,E,B,O,A,I)}},e.animate=function(t,o,n,i,a,r,s,l,d,c,u,h,f,g,p,m,z,v,b,y,w,x,C,T,S,k,M,j,P,E,B,O,A,I){function D(){for(var t,n,i=s,a=0,r=0;r<o.length;r++)if(t=o[r],!zot(t.target)){zot(t.time)&&(t.time=ie),i+=t.wait?t.wait:0,n=t.time,t.rewind&&(n=2*n+(t.rewindWait?t.rewindWait:0)),t.loop&&(n*=t.loopCount,n+=(t.loopCount-1)*(t.loopWait?t.loopWait:0));var l={target:t.target,obj:e.copy(t.obj),wait:a+i,waitedCall:t.waitedCall,waitedParams:t.waitedParams,time:t.time,ease:t.ease,from:t.from,rewind:t.rewind,call:t.call,params:t.params,loop:t.loop,loopCount:t.loopCount,loopWait:t.loopWait,loopCall:t.loopCall,loopParams:t.loopParams,loopWaitCall:t.loopWaitCall,loopWaitParams:t.loopWaitParams,rewind:t.rewind,rewindWait:t.rewindWait,rewindCall:t.rewindCall,rewindParams:t.rewindParams,rewindWaitCall:t.rewindWaitCall,rewindWaitParams:t.rewindWaitParams,set:t.set,override:!1,id:I};r==o.length-1&&X(l),e.animate(l),a+=i+n,i=0}}function X(e){j.loop&&(!j.count||de<j.count)?e.call=function(){function e(){for(var e=0;e<le.objects.length;e++)le.objects[e].set&&le.objects[e].set(le.values[e]);j.loopWaitCall&&"function"==typeof j.loopWaitCall&&j.loopWaitCall(j.loopWaitParams),D()}j.loopCall&&"function"==typeof j.loopCall&&j.loopCall(j.loopParams),j.loopWait?ae=t.zimTweens[I]=t.zimTween=createjs.Tween.get(t,{override:j.override}).wait(j.loopWait).call(e):e()}:e.call=function(){a&&"function"==typeof a&&a(r),V(I)},de++}function L(){zot(I)?I=e.makeID(10):(I=String(I),se=I),zot(t.zimIdSets)&&(t.zimIdSets={}),zot(t.zimIdSets[I])?zot(t.zimTweens[I])||(re=I,I=e.makeID(10),t.zimIdSets[re]=[re],t.zimTweens[re].zimIdSet=re,t.zimIdSets[re].push(I)):(re=I,I=e.makeID(10),t.zimIdSets[re].push(I))}function _(e,t,o,n){var i={};for(oe in t)o&&!zot(o[oe])?i[oe]=o[oe]:i[oe]=e[oe],n&&(e[oe]=t[oe]);return i}function Y(){fe&&"function"==typeof fe&&fe(ge)}function R(){pe&&"function"==typeof pe&&pe(me)}function W(){be&&"function"==typeof be&&be(ye)}function N(){we&&"function"==typeof we&&we(xe)}function F(){var e=H();t.set&&!O&&t.set(A),ae=t.zimTweens[I]=t.zimTween=createjs.Tween.get(t,j).to(o,ie,createjs.Ease[i]).call(N).wait(ve).call(W).to(e,ie,createjs.Ease[ze]).call(Z).wait(he).call(Y),q()}function G(){t.set&&!O&&t.set(A),ae=t.zimTweens[I]=t.zimTween=createjs.Tween.get(t,j).to(o,ie,createjs.Ease[i]).call(Z).wait(he).call(Y),q()}function Z(){if(j.loop){if(!(ue>0))return void R();if(de<ue)return R(),void de++;z?t.set&&t.set(H()):t.set&&t.set(o)}V(I),a&&"function"==typeof a&&a(r)}function H(){var e={};for(var n in o)P?zot(A[n])||O?e[n]=t.style[n]:e[n]=A[n]:zot(A[n])||O?e[n]=t[n]:e[n]=A[n];return e}function U(o){if(t.zimBusy){for(var n in o)delete t.zimBusy[n];e.isEmpty(t.zimBusy)&&(t.zimBusy=null)}}function q(){ae.zimObj=o,ae.zimTicker=Ce,ae.zimPaused=Te,re&&(ae.zimIdSet=re),se&&(zot(e.idSets)&&(e.idSets={}),zot(e.idSets[se])?e.idSets[se]=[t]:e.idSets[se].indexOf(t)<0&&e.idSets[se].push(t)),e.animatedObjects||(e.animatedObjects=new e.Dictionary(!0)),e.animatedObjects.add(t,!0)}function V(o){if(!zot(t.zimTweens)&&!zot(t.zimTweens[o])){U(t.zimTweens[o].zimObj),t.zimTweens[o].setPaused(!0),K(o);var n=t.zimTweens[o].zimIdSet;if(!zot(n)&&t.zimIdSets){var i=t.zimIdSets[n];i&&i.splice(i.indexOf(o),1),i&&0==i.length&&(delete t.zimIdSets[n],e.isEmpty(t.zimIdSets)&&delete t.zimIdSets)}if(delete t.zimTweens[o],e.isEmpty(t.zimTweens)&&t.stopZimAnimate(),t.zimTweens&&t.zimTweens[o]||t.zimIdSets&&t.zimIdSets[n||o]);else if(e.idSets&&e.idSets[n||o]){e.idSets[n||o];var a=e.idSets[n||o].indexOf(t);a>=0&&e.idSets[n||o].splice(a,1),e.idSets[n||o].length<=0&&(delete e.idSets[n||o],e.isEmpty(e.idSets)&&delete e.idSets)}}}function K(o){-function(){var n=t.zimTweens[o].zimTicker;setTimeout(function(){n&&e.Ticker.remove(n),n=null},200)}()}function Q(o,n){var i=t.zimTweens[o];i.setPaused(n),n!=i.zimPaused&&(i.zimPaused=n,n?i.zimTicker&&(i.zimAnimateTimeout=setTimeout(function(){e.Ticker.remove(i.zimTicker)},200)):(clearTimeout(i.zimAnimateTimeout),i.zimTicker&&e.Ticker.add(i.zimTicker,t.getStage())))}function J(e){for(var o=[],n=0;n<e.length;n++)t.zimIdSets&&!zot(t.zimIdSets[e[n]])?o=o.concat(t.zimIdSets[e[n]]):o.push(e[n]);return o}var $;if($=zob(e.animate,arguments,"target, obj, time, ease, call, params, wait, waitedCall, waitedParams, loop, loopCount, loopWait, loopCall, loopParams, loopWaitCall, loopWaitParams, rewind, rewindWait, rewindCall, rewindParams, rewindWaitCall, rewindWaitParams, sequence, sequenceCall, sequenceParams, sequenceReverse, ticker, props, css, protect, override, from, set, id"))return $;if(z_d("45"),0!=e.ANIMATE){t=zik(t),n=zik(n),i=zik(i),s=zik(s),u=zik(u),h=zik(h),z=zik(z),v=zik(v),k=zik(k),O=zik(O),A=zik(A);var ee={override:!0};if(zot(c)||(ee.loop=c),zot(u)||(ee.count=u),zot(h)||(ee.loopWait=h),zot(f)||(ee.loopCall=f),zot(m)||(ee.loopWaitParams=m),zot(p)||(ee.loopWaitCall=p),zot(g)||(ee.loopParams=g),zot(z)||(ee.rewind=z),zot(v)||(ee.rewindWait=v),zot(b)||(ee.rewindCall=b),zot(y)||(ee.rewindParams=y),zot(w)||(ee.rewindWaitCall=w),zot(x)||(ee.rewindWaitParams=x),zot(j)||(ee=e.merge(ee,j)),j=ee,zot(C)&&(C=0),C>0&&t.addChild){for(var te=[],oe=0;oe<t.numChildren;oe++)te.push(t.getChildAt(oe));t=te}if(t instanceof Array){k&&t.reverse();for(var ne=0,oe=0;oe<t.length;oe++)-function(){var l=oe;if(O){var d;t[oe].zimObj={};for(var c in o)d=o[c],t[oe].zimObj[c]=t[oe][c],t[oe][c]=d}else t[oe].zimObj=o;setTimeout(function(){var o=t[ne];if(ne++,e.animate(o,o.zimObj,n,i,a,r,s,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,M,e.copy(j),P,E,B,null,A,I),l==t.length-1&&T){var d=n||1e3;j&&j.rewind&&(d+=(n||1e3)+(j.rewindWait?j.rewindWait:0)),j&&j.loop&&j.loopWait&&(d+=j.loopWait),setTimeout(function(){T(S)},d)}},C*oe)}()}else{var ie=n;zot(ie)&&(ie=1e3),zot(i)&&(i="quadInOut"),zot(s)&&(s=0),zot(j)&&(j={override:!0}),zot(r)&&(r=t),zot(M)&&(M=!0),zot(P)&&(P=!1),zot(E)&&(E=!1),zot(O)&&(O=!1),zot(A)&&(A={}),A.scale&&(A.scaleX=A.scaleY=A.scale,delete A.scale),zot(B)||(j.override=B);var ae,re,se;if(o instanceof Array){var le,de=1;return 0==o.length?this:(function(){var n=new e.Dictionary;le=new e.Dictionary;for(var a=0;a<o.length;a++)if(ce=o[a],t||(t=ce.target),zot(ce.target)&&(ce.target=t),zot(ce.ease)&&(ce.ease=i),!zot(ce.target)){if(ce.loop&&(zot(ce.loopCount)||ce.loopCount<=0)&&(ce.loopCount=0,o.splice(a+1,o.length)),zot(ce.obj.scale)||(ce.obj.scaleX=ce.obj.scaleY=ce.obj.scale,delete ce.obj.scale),ce.from){var r=n.at(ce.target);if(r){if(ce.set){var s=e.copy(ce.obj),l=e.merge(r,ce.set);ce.obj=_(ce.target,ce.obj,l),ce.set=e.merge(ce.set,s)}else ce.set=e.copy(ce.obj),ce.obj=_(ce.target,ce.obj,r);ce.from=!1}else n.add(ce.target,_(ce.target,ce.obj,ce.set))}var d={};for(var c in ce.obj)d[c]=ce.set&&ce.set[c]?ce.set[c]:ce.target[c];zot(le.at(ce.target))&&le.add(ce.target,{});var u=e.merge(le.at(ce.target),d);le.remove(ce.target),le.add(ce.target,u)}zot(t.zimTweens)&&(t.zimTweens={})}(),L(),D(),t)}if(!zot(t))if(P&&(M=!1),zot(t.zimTweens)&&(t.zimTweens={}),M&&(zot(t.getStage)||zot(t.getStage())))zon&&zog("zim.move(), zim.animate() - please add target to stage before animating");else{zot(o.scale)||(o.scaleX=o.scaleY=zik(o.scale),delete o.scale);for(var ce in o){if(!t.zimBusy)break;t.zimBusy[ce]&&delete o[ce]}if(!e.isEmpty(o)){(E||j.loop||j.rewind)&&(t.mouseEnabled=!1,setTimeout(function(){t.zimBusy||(t.zimBusy={});for(var e in o)t.zimBusy[e]=!0;t.mouseEnabled=!0},70)),L();for(var oe in o)o[oe]=zik(o[oe]);for(oe in A)A[oe]=zik(A[oe]);for(oe in j)"waitedCall"!=oe&&"waitedParams"!=oe&&"loopCall"!=oe&&"rewindCall"!=oe&&"loopWaitCall"!=oe&&"rewindWaitCall"!=oe&&(j[oe]=zik(j[oe]));for(oe in o)"string"==typeof o[oe]&&(o[oe]=t[oe]+Number(o[oe].replace(/\s/g,"")));for(oe in A)"string"==typeof A[oe]&&(A[oe]=t[oe]+Number(A[oe].replace(/\s/g,"")));O&&(o=_(t,o,A,!0));var ue=0;if(j.loop&&!zot(j.count)){ue=j.count,delete j.count;de=1}var he=0;j.loopWait&&(he=j.loopWait,delete j.loopWait);var fe;j.loopCall&&(fe=j.loopCall,delete j.loopCall);var ge=t;j.loopParams&&(ge=j.loopParams,delete j.loopParams);var pe;j.loopWaitCall&&(pe=j.loopWaitCall,delete j.loopWaitCall);var me=t;if(j.loopWaitParams&&(me=j.loopWaitParams,delete j.loopWaitParams),j.rewind){if(i){var ze=i;-1==ze.indexOf("InOut")&&(-1!=ze.indexOf("Out")?ze=ze.replace("Out","In"):-1!=ze.indexOf("In")&&(ze=ze.replace("In","Out")))}var ve=0;delete j.rewind,j.rewindWait&&(ve=j.rewindWait,delete j.rewindWait);var be;if(j.rewindCall){be=j.rewindCall;var ye=j.rewindParams;zot(ye)&&(ye=t),delete j.rewindCall,delete j.rewindParams}var we;if(j.rewindWaitCall){we=j.rewindWaitCall;var xe=j.rewindWaitParams;zot(xe)&&(xe=t),delete j.rewindWaitCall,delete j.rewindWaitParams}s>0?ae=t.zimTweens[I]=t.zimTween=createjs.Tween.get(t,{override:j.override}).wait(s).call(function(){l&&"function"==typeof l&&l(zot(d)?t:d),F()}):F()}else s>0?ae=t.zimTweens[I]=t.zimTween=createjs.Tween.get(t,{override:j.override}).wait(s).call(function(){l&&"function"==typeof l&&l(zot(d)?t:d),G()}):G();var Ce;!P&&M&&(Ce=t.zimMask?e.Ticker.add(function(){e.copyMatrix(t.zimMask,t),t.zimMask.regX=t.regX,t.zimMask.regY=t.regY},t.getStage()):e.Ticker.add(function(){},t.getStage()));var Te=!1;return q(),t.stopZimAnimate&&t.stopZimAnimate.real||(t.stopZimAnimate=function(o,n){if(zot(n)&&(n=!0),zot(o)){if(!n)return;t.zimBusy=null,createjs.Tween.removeTweens(t);for(var i in t.zimTweens)K(i);t.zimTweens=null,t.zimIdSets=null,e.idSets&&e.idSets[re||i]&&(delete e.idSets[re||i],e.isEmpty(e.idSets)&&delete e.idSets),e.animatedObjects.remove(t)}else{Array.isArray(o)||(o=[o]);var a=J(o);for(var i in t.zimTweens)n&&a.indexOf(i)>=0&&V(i),!n&&a.indexOf(i)<0&&V(i)}return t},t.stopZimAnimate.real=!0,t.pauseZimAnimate=function(e,o,n){if(zot(e)&&(e=!0),zot(n)&&(n=!0),!zot(o)||n){if(zot(o))for(var i in t.zimTweens)Q(i,e);else{Array.isArray(o)||(o=[o]);var a=J(o);for(var i in t.zimTweens)n&&a.indexOf(i)>=0&&Q(i,e),!n&&a.indexOf(i)<0&&Q(i,e)}return t}}),t}}}}},e.stopZimAnimate=function(t){if(z_d("45.1"),zot(t)){if(e.animatedObjects)for(i=e.animatedObjects.length-1;i>=0;i--)e.animatedObjects.objects[i].stopZimAnimate()}else if(Array.isArray(t)||(t=[t]),e.idSets)for(var o=0;o<t.length;o++){var n=t[o];if(e.idSets[n])for(var i=e.idSets[n].length-1;i>=0;i--)e.idSets[n][i].stopZimAnimate(n)}},e.pauseZimAnimate=function(t,o){if(z_d("45.2"),zot(t)&&(t=!0),zot(o)){if(e.animatedObjects)for(a=e.animatedObjects.length-1;a>=0;a--)e.animatedObjects.objects[a].pauseZimAnimate(t)}else if(Array.isArray(o)||(o=[o]),e.idSets)for(var n=0;n<o.length;n++){var i=o[n];if(e.idSets[i])for(var a=e.idSets[i].length-1;a>=0;a--)e.idSets[i][a].pauseZimAnimate(t,i)}},e.wiggle=function(t,o,n,i,a,r,s,l,d,c,u){function h(){var f=e.rand(r,s),m={},z={};if(z[o]=n,"negative"==l)v=-e.rand(i,a,c);else if("positive"==l)v=e.rand(i,a,c);else if(0==p)v=e.rand(i,a,c,!0);else var v=e.rand(i,a,c)*e.sign(g)*-1;m[o]=n+v,0==p&&(f/=2),g=v,p++,"negative"==l||"positive"==l?e.animate({target:t,obj:m,set:z,ease:d,time:2*f,rewind:!0,override:!1,call:h,id:u,ticker:!!t.getStage}):e.animate({target:t,obj:m,ease:d,time:f,override:!1,call:h,id:u,ticker:!!t.getStage})}var f;if(f=zob(e.wiggle,arguments,"target, property, baseAmount, minAmount, maxAmount, minTime, maxTime, type, ease, integer, id"))return f;if(z_d("45.25"),zot(t)||zot(n)||zot(i))return t;zot(a)&&(a=i),zot(r)&&(r=1e3),zot(s)&&(s=r),zot(d)&&(d="quadInOut"),zot(c)&&(c=!1),zot(u)&&(u=e.makeID()),zot(l)&&(l="both");var g,p=0;return h(),t},e.loop=function(t,o,n,i,a,r){function s(e){return zot(a)&&(a=n?e:0),zot(r)&&(r=n?0:e),n&&r>a||!n&&a>r?0:(a<0&&r)<0||a>e&&r>e?0:(a=Math.max(0,Math.min(a,e)),r=Math.max(0,Math.min(r,e)),Math.floor((n?a-r:r-a)/i)+1)}var l;if(l=zob(e.loop,arguments,"obj, call, reverse, step, start, end"))return l;if(z_d("45.3"),!zot(t)&&!zot(o)){zot(n)&&(n=!1),(zot(i)||i<=0)&&(i=1);var d="number"==typeof t?"number":t.constructor===Array?"array":t.constructor==={}.constructor?"object":"container";if("container"!=d||t.addChild)if("number"==d||"array"==d){if(0==(g=s((u="number"==d?t:t.length)-1)))return;if(n)for(f=a;f>=r;f-=i){if("number"==d)c=o(f,g,a,r,t);else c=o(t[f],f,g,a,r,t);if(void 0!==c)return c}else for(f=a;f<=r;f+=i){if("number"==d)c=o(f,g,a,r,t);else var c=o(t[f],f,g,a,r,t);if(void 0!==c)return c}}else if("object"==d){var u=0,h=[];for(var f in t)u++,h.push(f);if(0==(g=s(u-1)))return;if(n){for(f=a;f>=r;f-=i)if(void 0!==(c=o(h[f],t[h[f]],f,g,a,r,t)))return c}else for(f=a;f<=r;f+=i)if(void 0!==(c=o(h[f],t[h[f]],f,g,a,r,t)))return c}else{var g=s(t.numChildren-1);if(0==g)return;if(n){for(f=a;f>=r;f-=i)if(void 0!==(c=o(t.getChildAt(f),f,g,a,r,t)))return c}else for(f=a;f<=r;f+=i)if(void 0!==(c=o(t.getChildAt(f),f,g,a,r,t)))return c}}},e.copyMatrix=function(e,t){return z_d("45.5"),e.x=t.x,e.y=t.y,e.scaleX=t.scaleX,e.scaleY=t.scaleY,e.regX=t.regX,e.regY=t.regY,e.rotation=t.rotation,e.skewX=t.skewX,e.skewY=t.skewY,e},e.pos=function(e,t,o){if(z_d("41.5"),!zot(e))return zot(t)||(e.x=t),zot(o)||(e.y=o),e},e.mov=function(e,t,o){if(z_d("41.6"),!zot(e))return zot(t)||(e.x+=t),zot(o)||(e.y+=o),e},e.alp=function(e,t){if(z_d("41.7"),!zot(e))return zot(t)||(e.alpha=t),e},e.rot=function(e,t){if(z_d("41.8"),!zot(e))return zot(t)||(e.rotation=t),e},e.siz=function(e,t,o,n){if(z_d("41.85"),!zot(e))return zot(n)&&(n=!1),zot(t)||zot(o)?zot(t)?zot(o)||(n?e.heightOnly=o:e.height=o):n?e.widthOnly=t:e.width=t:(e.widthOnly=t,e.heightOnly=o),e},e.ske=function(e,t,o){if(z_d("41.9"),!zot(e))return zot(t)||(e.skewX=t),zot(o)||(e.skewY=o),e},e.reg=function(e,t,o){if(z_d("41.95"),!zot(e))return zot(t)||(e.regX=t),zot(o)||(e.regY=o),e},e.sca=function(e,t,o){if(z_d("41.97"),!zot(e)&&!zot(e.scaleX))return zot(t)&&(t=e.scaleX),zot(o)&&(o=t),e.scaleX=t,e.scaleY=o,e},e.scale=function(e,t,o){if(z_d("42"),!zot(e)&&!zot(e.scaleX))return zot(t)&&(t=e.scaleX),zot(o)&&(o=t),e.scaleX=t,e.scaleY=o,e},e.scaleTo=function(t,o,n,i,a,r){var s;if(s=zob(e.scaleTo,arguments,"obj, boundObj, percentX, percentY, type, boundsOnly"))return s;if(z_d("43"),!zot(t)&&t.getBounds&&t.getBounds()){if(!zot(o)&&o.getBounds&&o.getBounds()){zot(n)&&(n=-1),zot(i)&&(i=-1),-1==n&&-1==i&&(n=i=100),zot(a)&&(a="smallest"),zot(r)&&(r=!1);var l=o.getBounds().width*n/100*(r?1:o.scaleX),d=o.getBounds().height*i/100*(r?1:o.scaleY);if((-1==n||-1==i)&&"both"!=a&&"stretch"!=a)return-1==n?e.scale(t,d/t.getBounds().height):e.scale(t,l/t.getBounds().width),t;if("both"==a||"stretch"==a)return t.scaleX=-1!=n?l/t.getBounds().width:t.scaleX,t.scaleY=-1!=i?d/t.getBounds().height:t.scaleY,t;if("biggest"==a||"largest"==a||"outside"==a)c=Math.max(l/t.getBounds().width,d/t.getBounds().height);else var c=Math.min(l/t.getBounds().width,d/t.getBounds().height);return e.scale(t,c),t}zog("zim create - scaleTo(): please provide a boundObject (with setBounds) to scale to")}else zog("zim create - scaleTo(): please provide an object (with setBounds) to scale")},e.fit=function(t,o,n,i,a,r){var s;if(s=zob(e.fit,arguments,"obj, left, top, width, height, inside"))return s;if(z_d("46"),!zot(t)&&t.getBounds){if(t.getBounds()){if(zot(o)){if(!t.getStage())return void zog("zim create - fit(): please add boundary dimensions or add obj to stage first");if(!t.getStage().getBounds())return void zog("zim create - fit(): please add boundary dimensions or add obj with bounds to stage first");o=0,n=0,i=t.getStage().getBounds().width,a=t.getStage().getBounds().height}zot(r)&&(r=!0),t.scaleX=t.scaleY=1;var l,d=i,c=a,u=t.getBounds().width,h=t.getBounds().height;l=r?d/c>=u/h?c/h:d/u:d/c>=u/h?d/u:c/h,t.scaleX=t.scaleY=l;var f=u*l,g=h*l;return t.x=(t.regX-t.getBounds().x)*l+o+(d-f)/2,t.y=(t.regY-t.getBounds().y)*l+n+(c-g)/2,{x:t.x,y:t.y,width:f,height:g,scale:l,bX:o,bY:n,bWidth:i,bHeight:a}}zog("zim create - fit(): please setBounds() on object")}},e.outline=function(t,o,n){var i;if(i=zob(e.outline,arguments,"obj, color, size"))return i;if(z_d("47"),!zot(t)&&t.getBounds)if(t.getBounds()){if(t.parent){zot(o)&&(o="brown"),zot(n)&&(n=2);var a=t.getBounds(),r=new createjs.Shape,s=new createjs.Shape,l=t.parent,d=t.localToLocal(a.x,a.y,l),c=t.localToLocal(a.x+a.width,a.y,l),u=t.localToLocal(a.x+a.width,a.y+a.height,l),h=t.localToLocal(a.x,a.y+a.height,l),f=t.localToLocal(0,0,l),g=r.graphics,p=s.graphics;g.s(o).ss(n).mt(d.x,d.y).lt(c.x,c.y).lt(u.x,u.y).lt(h.x,h.y).lt(d.x,d.y);var m=10;return p.s("white").ss(n+2),p.mt(-11,0).lt(11,0),p.mt(0,-11).lt(0,11),p.s(o).ss(n),p.mt(-m,0).lt(m,0),p.mt(0,-m).lt(0,m),s.x=f.x,s.y=f.y,s.rotation=t.rotation,g.s("white").ss(n+2).dc(t.x,t.y,16),g.s(o).ss(n).dc(t.x,t.y,16),t.parent.addChild(r),t.parent.addChild(s),r.mouseEnabled=!1,s.mouseEnabled=!1,t.getStage()&&t.getStage().update(),t}zog("zim create - outline(): object should be on stage first")}else zog("zim create - outline(): please setBounds() on object");else zog("zim create - outline(): please provide object with bounds set")},e.addTo=function(e,t,o){if(z_d("47.5"),zot(e))zog("zim create - addTo(): please provide object");else{if(!zot(t))return zot(o)||isNaN(o)?t.addChild(e):t.addChildAt(e,o),e;zog("zim create - addTo(): please provide container")}},e.removeFrom=function(e,t){if(z_d("47.6"),zot(e))zog("zim create - removeFrom(): please provide object");else{if(!zot(t))return t.removeChild(e),e;zog("zim create - removeFrom(): please provide container")}},e.added=function(e,t,o,n){if(z_d("47.7"),!zot(e)&&!zot(t)&&"function"==typeof t){if(zot(o)&&(o=100),!e.getStage()){var i=Date.now(),a=setInterval(function(){n>0&&i-Date.now()>n&&clearInterval(a),e.getStage()&&(t(e.getStage(),e),clearInterval(a))},o);return a}t(e.getStage(),e)}},e.centerReg=function(t,o,n,i){var a;if(a=zob(e.centerReg,arguments,"obj, container, index, add"))return a;if(z_d("48"),!zot(t)&&t.getBounds&&t.getBounds()){var r=t.getBounds();return t.regX=r.x+r.width/2,t.regY=r.y+r.height/2,o?e.center(t,o,n,i):t}zog("zim create - centerReg(): please provide object with bounds set")},e.center=function(t,o,n,i){var a;if(a=zob(e.center,arguments,"obj, container, index, add"))return a;if(z_d("48.1"),!zot(t)&&t.getBounds){if(!zot(o)&&o.getBounds){var r=t.getBounds(),s=o.getBounds();if(zot(i)&&(i=!0),i&&o.addChild&&(zot(n)||"number"==typeof n&&isNaN(n)?o.addChild(t):o.addChildAt(t,n)),zot(s))return t;if(zot(r))return t.x=o.getBounds().width/2,t.y=o.getBounds().height/2,t;var l=t.localToLocal(t.regX,t.regY,o),d=e.boundsToGlobal(t),c=e.boundsToGlobal(o,d,!0);if(t.x=s.x+s.width/2-c.width/2+(l.x-c.x),t.y=s.y+s.height/2-c.height/2+(l.y-c.y),!i&&o.getStage&&o.getStage()&&t.parent){var u=o.localToLocal(t.x,t.y,t.parent);t.x=u.x,t.y=u.y}return t}zog("zim.center(): please provide container with bounds")}else zog("zim.center(): please provide object with bounds")},e.place=function(t,o){z_d("49"),zot(t)||(zot(o)&&(o="obj"),e.drag({obj:t,currentTarget:!0,dragCursor:"crosshair"}),zog("place "+o+" - to get new position"),t.on("click",function(){zog(o+".x = "+Math.round(t.x)+"; "+o+".y = "+Math.round(t.y)+";"),zog(o+".pos("+Math.round(t.x)+", "+Math.round(t.y)+");")}))},e.placeReg=function(t,o){if(z_d("49.5"),!zot(t)){var n=t.getStage();if(zot(n))zog("zim.placeReg() - add object to stage before calling placeReg()");else{zot(o)&&(o="obj");var i=t.parent.localToGlobal(t.x,t.y),a=new e.Shape(-25,-25,50,50).addTo(n).pos(i.x,i.y);a.graphics.s("white").mt(-25,0).lt(25,0).mt(0,-25).lt(0,20),a.compositeOperation="difference",a.expand(0),e.drag({obj:a}),zog("place cursor to get new registration point location"),n.on("stagemouseup",function(){var e=t.globalToLocal(a.x,a.y);zog(o+".regX = "+Math.round(e.x)+"; "+o+".regY = "+Math.round(e.y)+";"),zog(o+".reg("+Math.round(e.x)+", "+Math.round(e.y)+");")})}}},e.expand=function(e,t,o){z_d("50");{if(!zot(e)&&e.getBounds){zot(t)&&(t=20),zot(o)&&(o=t);var n=e.getBounds(),i=new createjs.Shape;return i.graphics.f("0").r(n.x-t,n.y-o,n.width+2*t,n.height+2*o),e.hitArea=i,e}zog("zim create - expand(): please provide object with bounds set")}},e.setMask=function(t,o){z_d("50.1");{if(!zot(t)){var n;return o&&o.shape?(o.zimMask=n=o.shape.clone(),e.copyMatrix(n,o),n.regX=o.regX,n.regY=o.regY,n.centerReg||zimify(n),o.addChildAt(n,0),n.alpha=0):n=o,t.mask=n,n}zog("zim create - setMask(): please provide obj")}},e.ANIMATE=!0,e.OPTIMIZE=!1,e.ACTIONEVENT="mousedown",e.Ticker={stages:null,myUpdate:null,alwaysList:new e.Dictionary,list:new e.Dictionary,setFPS:function(t,o){zot(t)&&zot(o)?(t=30,o=60):zot(t)?t=30:zot(o)&&(o=t),e.Ticker.framerate=createjs.Ticker.framerate=e.mobile()?t:o},setTimingMode:function(e){createjs.Ticker.timingMode=createjs.Ticker.RAF,"synched"==e&&(createjs.Ticker.timingMode=createjs.Ticker.RAF_SYNCHED),"timeout"==e&&(createjs.Ticker.timingMode=createjs.Ticker.TIMEOUT)},add:function(t,o){z_d("30");var n=e.Ticker;return n.has(t,o)?t:(n.framerate||n.setFPS(),!zot(o)&&o.update||(o=zimDefaultFrame.stage),zot(t)||"function"!=typeof t?void zog("zim.Ticker.add() - only add functions"):(n.ticker||(n.ticker=createjs.Ticker.on("tick",n.call)),n.list.at(o)?n.list.at(o).push(t):n.list.add(o,[t]),t))},call:function(t){for(var o,n,i=e.Ticker,a=0;a<i.list.length;a++){o=i.list.objects[a],n=i.list.values[a];for(var r=0;r<n.length;r++)n[r]();i.alwaysList.at(o)?o.update():n.length>0&&(zot(i.update)&&!e.OPTIMIZE?o.update():i.update&&o.update())}for(a=0;a<i.alwaysList.length;a++)o=i.alwaysList.objects[a],null==i.list[o]&&o.update()},always:function(t){z_d("30");var o=e.Ticker;o.framerate||o.setFPS(),!zot(t)&&t.update||(t=zimDefaultFrame.stage),o.alwaysList.add(t,!0),o.ticker||(o.ticker=createjs.Ticker.on("tick",o.call))},alwaysOff:function(t){var o=e.Ticker;!zot(t)&&t.update||(t=zimDefaultFrame.stage),o.alwaysList.remove(t)},remove:function(t){var o=e.Ticker;if(zot(t)||"function"!=typeof t)zog("zim.Ticker - only remove functions");else{for(var n=0,i=0;i<o.list.length;i++){o.list.objects[i];var a=o.list.values[i].indexOf(t);a>-1&&o.list.values[i].splice(a,1),n+=o.list.values[i].length}o.alwaysList.length>0||0==n&&(createjs.Ticker.off("tick",o.ticker),o.ticker=null)}},removeAll:function(t){for(var o,n=e.Ticker,i=0,a=0;a<n.list.length;a++)o=n.list.objects[a],(zot(t)||t===o)&&(n.list.values[a]=[]),i+=n.list.values[a].length;n.alwaysList.length>0||0==i&&(createjs.Ticker.off("tick",n.ticker),n.ticker=null)},has:function(t,o){return!zot(o)&&o.update||(o=zimDefaultFrame.stage),e.Ticker.list&&e.Ticker.list.at(o)&&e.Ticker.list.at(o).indexOf(t)>=0},dispose:function(t){for(var o,n=e.Ticker,i=0,a=n.list.length-1;a>=0;a--)o=n.list.objects[a],zot(t)||t===o?(n.list.remove(t),n.alwaysList.remove(t)):i+=n.list.values[a].length;if(!(n.alwaysList.length>0))return 0==i&&(createjs.Ticker.off("tick",n.ticker),n.ticker=null),!0}},Object.defineProperty(e.Ticker,"update",{get:function(){return e.Ticker.myUpdate},set:function(t){var o=e.Ticker;"boolean"!=typeof t&&(t=null),o.myUpdate=t,!1===o.myUpdate&&(cancelAnimationFrame(o.ticker),o.alwaysList=new e.Dictionary)}}),e.Swipe=function(t,o,n){var i;if(i=zob(e.Swipe,arguments,"obj, distance, duration",this))return i;if(z_d("70"),this.cjsEventDispatcher_constructor(),!zot(t)&&t.on){zot(o)&&(o=30),zot(n)&&(n=80),this.distance=o,this.duration=n,this.active=!0;var a,r,s,l,d,c,u=this;t.on("mousedown",function(e){function o(){var e=new createjs.Event("swipe");e.obj=u.obj,e.swipeX=e.swipeY=0,u.direction="none",Math.abs(s-a)>Math.abs(l-r)?(s-a>u.distance&&(e.swipeX=1,u.direction="right"),a-s>u.distance&&(e.swipeX=-1,u.direction="left")):(l-r>u.distance&&(e.swipeY=1,u.direction="down"),r-l>u.distance&&(e.swipeY=-1,u.direction="up")),u.dispatchEvent(e)}u.active&&!e.target.zimNoSwipe&&(u.obj=e.target,s=a=e.stageX,l=r=e.stageY,d=!0,u.dispatchEvent("swipedown"),clearTimeout(c),c=setTimeout(function(){d&&(o(),d=!1)},u.duration),t.on("pressmove",function(e){s=e.stageX,l=e.stageY}),t.on("pressup",function(e){d&&(o(),d=!1,clearTimeout(c))}))}),this.disable=function(){u.active=!1},this.enable=function(){u.active=!0}}else zog("zim pages - Swipe():\nPlease pass in object")},e.extend(e.Swipe,createjs.EventDispatcher,"clone","cjsEventDispatcher",!1),e.Pages=function(t,o,n,i,a){function r(){(d=new createjs.Shape).graphics.f("black").r(0,0,u,h+1),(c=new createjs.Shape).graphics.f("white").r(0,0,u,h+1)}var s;if(s=zob(e.Pages,arguments,"pages, transition, speed, transitionTable, holder",this))return s;if(z_d("71"),this.zimContainer_constructor(),zot(t)&&(t=[]),this.pages=t,zot(o)&&(o="none"),zot(n)&&(n=200),zot(i)&&(i=[]),this.transitionTable=i,zot(a)&&zimDefaultFrame&&(a=zimDefaultFrame.stage),a.getBounds&&a.getBounds()){this.speed=n,this.active=!0;var l=this;l.transitioning=!1;var d,c,u=a.getBounds().width,h=a.getBounds().height;"none"==o&&i==[]||r();for(var f,g,p=["left","right","up","down"],m=0;m<t.length;m++)(f=t[m]).constructor!=={}.constructor&&(f=t[m]={page:t[m]}),f.page.zimSwipeArray=f.swipe?f.swipe:[],f.page.parent&&f.page.parent.removeChild(f.page);var z=this.page=t[0]?t[0].page:null;this.addChild(z),this.swipe=new e.Swipe(a);var v,b=!1,y=this.swipe.on("swipe",function(e){if(l.active){var t=e.currentTarget.direction;if("none"!=t){var o="";"left"==t?o="right":"right"==t?o="left":"up"==t?o="down":"down"==t&&(o="up"),t=o;var n=p.indexOf(t);g=z.zimSwipeArray[n],v=[g,t,null,null,!0],l.page=z,l.nextPage=g,l.direction=t,l.dispatchEvent("swipe"),setTimeout(function(){b||l.go(g,t,null,null,!0)},50)}}});this.addPage=function(e,t){zot(t)&&(t=[]);var o={page:e,swipe:t};o.page.zimSwipeArray=o.swipe?o.swipe:[],z?o.page.parent&&o.page.parent.removeChild(o.page):(z=l.page=o.page,l.addChild(z))},this.removePage=function(e){l.currentPage==e&&(l.removeChild(e),a.getStage()&&a.getStage().update()),e.zimSwipeArray=null},this.setSwipe=function(e,t){zot(t)&&(t=[]);var o={page:e,swipe:t};o.page.zimSwipeArray=o.swipe?o.swipe:[]},this.pause=function(){b=!0},this.unpause=function(){b&&l.go(v[0],v[1],v[2],v[3],v[4])};var w=!0;this.go=function(t,i,r,s,f){function g(e){e[0].uncache(),e[1].uncache(),l.transitioning=!1,l.dispatchEvent("pagetransitioned"),l.removeChild(l.lastPage),l.removeChild(d),l.removeChild(c),w=!0}function m(t){l.removeChild(l.lastPage),e.animate(t.shift(),{alpha:0},l.speed/2,null,g,t)}if("number"==typeof t){var v=l.pages[t];if(zot(v))return;t=v.page}setTimeout(function(){b=!1},200);for(var y=[{x:u},{x:-u},{y:h},{y:-h}],x=[{x:0},{x:0},{y:0},{y:0}],C=[{x:u/2,alpha:0},{x:-u/2,alpha:0},{y:h/2,alpha:0},{y:-h/2,alpha:0}],T=o,S=n,k=0;k<l.transitionTable.length;k++)if(l.transitionTable[k][0]==z&&l.transitionTable[k][1]==t){T=l.transitionTable[k][2],S=l.transitionTable[k][3];break}if(zot(r)&&(r=T),zot(s)&&(s=S),l.speed=s,l.direction=i,""==t||null==t)l.page=z,l.dispatchEvent("nothing");else if("string"==typeof t)l.page=z,l.dispatchEvent(t);else{if(t==z)return;zot(i)&&(i="right");var M=p.indexOf(i);if(!w)return;w=!1,t.x=0,t.y=0,t.alpha=1,l.transitioning=!0,"slide"==r?(t.x=-(0|y[M].x),t.y=-(0|y[M].y),t.cache(0,0,(u+1)/t.scaleX,(h+1)/t.scaleY),z.cache(0,0,(u+1)/z.scaleX,(h+1)/z.scaleY),l.addChild(t),l.addChild(z),e.animate(z,y[M],l.speed,null,g,[z,t]),e.animate(t,x[M],l.speed)):"reveal"==r?(t.cache(0,0,(u+1)/t.scaleX,(h+1)/t.scaleY),z.cache(0,0,(u+1)/z.scaleX,(h+1)/z.scaleY),l.addChild(t),l.addChild(z),e.animate(z,C[M],l.speed,null,g,[z,t])):"fade"==r?(t.cache(0,0,(u+1)/t.scaleX,(h+1)/t.scaleY),z.cache(0,0,(u+1)/z.scaleX,(h+1)/z.scaleY),t.alpha=1,l.addChild(t),l.addChild(z),e.animate(z,{alpha:0},l.speed,null,g,[z,t])):"black"==r?(t.cache(0,0,(u+1)/t.scaleX,(h+1)/t.scaleY),z.cache(0,0,(u+1)/z.scaleX,(h+1)/z.scaleY),t.alpha=1,l.addChild(t),l.addChild(z),d.alpha=0,l.addChild(d),e.animate(d,{alpha:1},l.speed/2,null,m,[d,z,t])):"clear"==r?(t.cache(0,0,(u+1)/t.scaleX,(h+1)/t.scaleY),z.cache(0,0,(u+1)/z.scaleX,(h+1)/z.scaleY),t.alpha=0,l.addChild(t),l.addChild(z),e.animate(z,{alpha:0},l.speed/2),e.animate(t,{alpha:1},l.speed/2,null,g,[z,t],l.speed/2)):"white"==r?(t.cache(0,0,(u+1)/t.scaleX,(h+1)/t.scaleY),z.cache(0,0,(u+1)/z.scaleX,(h+1)/z.scaleY),t.alpha=1,l.addChild(t),l.addChild(z),c.alpha=0,l.addChild(c),e.animate(c,{alpha:1},l.speed/2,null,m,[c,z,t])):(l.transitioning=!1,l.addChild(t),l.removeChild(z),w=!0),l.lastPage=z,l.page=t,zot(f)&&(f=!1),l.fromSwipe=f,l.dispatchEvent("page"),z=t,a.getStage()&&a.getStage().update()}},this.resize=function(){u=a.getBounds().width,h=a.getBounds().height,"none"==o&&i==[]||r()},this.puff=function(e){for(var o=0;o<t.length;o++)l.addChild(t[o].page);l.addChild(z),e>0&&setTimeout(function(){l.settle()},e)},this.settle=function(){l.removeAllChildren(),l.addChild(z),l.dispatchEvent("puffed")},this.disable=function(){l.active=!1},this.enable=function(){l.active=!0},this.dispose=function(){return l.swipe.off("swipe",y),l.removeAllChildren(),t=null,!0}}else zog("zim pages - Pages():\nholder object must have bounds set")},e.extend(e.Pages,e.Container,"clone","zimContainer",!1),zot(e.ACTIONEVENT)&&(e.ACTIONEVENT="mousedown"),e.HotSpots=function(t,o,n){function i(t){var i=null;if(!Array.isArray(t.rect)){if(!(i=t.rect))return void zog("zim pages - HotSpots(): HotSpot "+t.page+" "+t.rect+" button does not exist");t.rect=[i.x,i.y,1,1]}(l=new e.HotSpot(t.page,t.rect[0],t.rect[1],t.rect[2],t.rect[3],t.call,o)).zimHSpage=t.page,l.button=i,c.push(l),l.on(d,a),i&&(l.spot.mouseEnabled=!1,l.spot.mouseChildren=!1,i.zimHScall=t.call,i.zimHSEvent=i.on(d,a,!0),n||(i.zimHSMDEvent=i.on("mousedown",function(e){e.stopImmediatePropagation()})),i.cursor="pointer")}function a(e){e.stopImmediatePropagation&&e.stopImmediatePropagation(),window.event&&(window.event.cancelBubble=!0),"function"==typeof e.currentTarget.zimHScall&&e.currentTarget.zimHScall(e)}var r;if(r=zob(e.HotSpots,arguments,"spots, local, mouseDowns",this))return r;if(z_d("72"),this.zimContainer_constructor(),!zot(t)&&Array.isArray(t)){zot(o)&&(o=!0),zot(n)&&(n=!1);for(var s,l,d="mousedown"==e.ACTIONEVENT?"mousedown":"click",c=[],u=0;u<t.length;u++)i(t[u]);this.addHotSpot=function(e,o,n){s={page:e,rect:o,call:n},t.push(s),i(s)},this.show=function(){for(var e=0;e<c.length;e++)(l=c[e]).button||l.show()},this.hide=function(){for(var e=0;e<c.length;e++)(l=c[e]).hide()},this.removeHotSpots=function(o,i){for(var r=t.length-1;r>=0;r--)s=t[r],l=c[r],i&&!Array.isArray(i)&&(i=[i.x,i.y,i.getBounds().width,i.getBounds().height]),(zot(o)&&zot(i)||zot(i)&&o==s.page||zot(o)&&e.arraysEqual(i,s.rect)||o==s.page&&e.arraysEqual(i,s.rect))&&(t.splice(r,1),l.button&&(l.button.off(d,l.button.zimHSEvent),l.button.zimHSEvent=null,n||(l.button.off("mousedown",l.button.zimHSMDEvent),l.button.zimHSMDEvent=null)),l.off(d,a),l.dispose(),c.splice(r,1))},this.dispose=function(){for(var e=0;e<c.length;e++)(l=c[e]).button&&(l.button.off(d,l.button.zimHSEvent),l.button.zimHSCall=null,l.button.zimHSEvent=null,n||(l.button.off("mousedown",l.button.zimHSMDEvent),l.button.zimHSMDEvent=null)),l.off(d,a),l.dispose();return!0}}else zog("zim pages - HotSpots():\nplease provide an array of HotSpot data")},e.extend(e.HotSpots,e.Container,"clone","zimContainer",!1),e.HotSpot=function(t,o,n,i,a,r,s){var l;if(l=zob(e.HotSpot,arguments,"obj, x, y, width, height, call, local",this))return l;if(z_d("73"),this.zimContainer_constructor(),!zot(t)&&t.addChild)if(t instanceof createjs.Container!=0)if(zot(o)||zot(n)||zot(i)||zot(a))zog("zim pages - HotSpot():\nPlease pass in x, y, width, height");else{zot(s)&&(s=!0),eventType="mousedown"==e.ACTIONEVENT?"mousedown":"click";var d=i,c=a,u=new createjs.Shape,h=new createjs.Shape;if(s)u.graphics.f("#999999").dr(o,n,d,c),h.graphics.f("#999999").dr(o,n,1,1);else{var f=t.globalToLocal(o,n),g=t.globalToLocal(o+d,n+c),p=g.x-f.x,m=g.y-f.y;u.graphics.f("#999999").dr(f.x,f.y,p,m),h.graphics.f("#999999").dr(f.x,f.y,1,1)}u.alpha=.4,u.mouseEnabled=!1,h.alpha=.01,h.cursor="pointer",this.spot=h;var z=h.on(eventType,function(e){"function"==typeof r&&r()});t.addChild(h),h.hitArea=u,this.show=function(){t.addChild(u)},this.hide=function(){t.removeChild(u)},this.dispose=function(){return h.off(eventType,z),t.removeChild(h),delete h,!0}}else zog("zim pages - HotSpot():\nObjects passed in should be Containers");else zog("zim pages - HotSpot():\nPlease pass in container object for obj")},e.extend(e.HotSpot,e.Container,"clone","zimContainer",!1),e.Manager=function(e){z_d("75");var t=this;this.items=[],this.add=function(e){t.items.push(e)},this.resize=function(){if(t)for(var e=0;e<t.items.length;e++)t.items[e].resize()||t.items.splice(e)},this.dispose=function(){zog(t.items.length);for(var e=t.items.length-1;e>=0;e--)t.items[e].dispose();return t.items=[],t=null,!0}},e.Guide=function(t,o,n,i,a){function r(t,o,n){var i=new e.Container;return i.shape=new createjs.Shape,i.shape.graphics.s(o).ss(1).f(t).r(0,0,m,z),i.shape.alpha=.9,i.addChild(i.shape),i.label=new createjs.Text("10","16px verdana",n),i.label.textAlign="center",i.label.textBaseline="middle",i.addChild(i.label),i.mouseChildren=!1,i.mouseEnabled=!1,i}function s(e){var i,a;e?(i=t.globalToLocal(e.rawX,e.rawY),M=i):i={x:M.x,y:M.y},n?o?(a=Math.round(Math.abs(i.x-C.x)/w*100),g.label.text="x:"+Math.max(0,Math.min(a,100))+"%",g.y=Math.max(b,Math.min(i.y,f))):(a=Math.round(Math.abs(i.y-C.y)/x*100),g.label.text="y:"+Math.max(0,Math.min(a,100))+"%",g.x=Math.max(v,Math.min(i.x,h))):o?(a=Math.round(Math.abs(i.x-C.x)),g.label.text="x:"+Math.max(0,Math.min(a,Math.round(w))),g.y=Math.max(b,Math.min(i.y,f))):(a=Math.round(Math.abs(i.y-C.y)),g.label.text="y:"+Math.max(0,Math.min(a,Math.round(x))),g.x=Math.max(v,Math.min(i.x,h))),y&&y.update()}function l(){k=!0,w=t.getBounds().width,x=t.getBounds().height;var n;o?(n="ew-resize",T=new createjs.Rectangle(0,0,w,0)):(n="ns-resize",T=new createjs.Rectangle(0,0,0,x)),e.noDrag(C),setTimeout(function(){e.drag(C,T,n,n,null,null,!0)},500),y.mouseMoveOutside=!0,y.enableMouseOver(10),h=w-2*m/3,f=x-z-z,C.uncache();var i=C.graphics;o?(i.c().s("rgba(0,255,255,.1)").ss(20).mt(0,0).lt(0,x),i.f().s("white").ss(2).mt(0,0).lt(0,x),i.s("#00c5af").sd([20,20]).mt(0,0).lt(0,x).sd(),C.cache(-10,0,20,x)):(i.c().s("rgba(255,0,255,.1)").ss(20).mt(0,0).lt(w,0),i.f().s("white").ss(2).mt(0,0).lt(w,0),i.s("#d61fa0").sd([20,20]).mt(0,0).lt(w,0).sd(),C.cache(0,-10,w,20)),o?g.x=w:g.y=x,p.addChild(g)}function d(e){e||(e=event),y&&(String.fromCharCode(e.keyCode)==i.toUpperCase()&&(p.visible=!p.visible,y.off("stagemousemove",u),p.visible&&(u=y.on("stagemousemove",s,p)),y.update()),String.fromCharCode(e.keyCode)==a.toUpperCase()&&(p.pixels=!p.pixels))}var c;if(c=zob(e.Guide,arguments,"obj, vertical, percent, hideKey, pixelKey",this))return c;if(z_d("76"),this.zimContainer_constructor(),zot(t)&&(t=zimDefaultFrame?zimDefaultFrame.stage:"stage"),zot(o)&&(o=!0),"stage"==t||t.addChild&&t.getBounds&&t.getBounds()){zot(n)&&(n=!0),zot(i)&&(i="G"),zot(a)&&(a="P");var u,h,f,g,p=this,m=80,z=26,v=m/6+m/2,b=2*z;o?((g=r("#00c5af","white","white")).shape.regX=m+m/6,g.shape.regY=z/2,g.label.x=-m/2-m/6):((g=r("#d61fa0","white","white")).shape.regX=m/2,g.shape.regY=z+z/4,g.label.y=3*-z/4);var y;"stage"!=t&&t.addChild(p);var w,x,C,T,S=e.added(p,function(){"stage"==t?(y=p.getStage(),t=y):y=t.getStage(),t.addChild(p),w=t.getBounds().width,x=t.getBounds().height,o?(g.y=x/2,g.label.text="y:"+(p.pixels?Math.round(70*w/100):"70%")):(g.x=w/2,g.label.text="x:"+(p.pixels?Math.round(70*x/100):"70%")),C=new createjs.Shape,p.addChild(C),o?C.x=.7*w:C.y=.7*x,k||(t.addChild(p),l()),y.off("stagemousemove",u),u=y.on("stagemousemove",s),y.update()}),k=!1,M={x:0,y:0};Object.defineProperty(this,"pixels",{get:function(){return!n},set:function(e){n=!e,p.resize()}}),window.addEventListener("keydown",d),this.resize=function(){return!!p&&(y&&(l(),s()),!0)},this.dispose=function(){return!!p&&(e.noDrag(C),clearInterval(S),p.removeAllChildren(),window.removeEventListener("keydown",d),p.parent&&p.parent.removeChild(p),p=null,!0)}}else zog("zim pages - Guide(): Please provide container with bounds for the obj (setBounds())")},e.extend(e.Guide,e.Container,"clone","zimContainer",!1),e.GuideManager=function(){z_d("77"),e.Manager.call(this,"GuideManager")},e.GuideManager.prototype=new e.Manager,e.GuideManager.prototype.constructor=e.GuideManager,e.Grid=function(t,o,n,i,a){function r(t,o,n){var i=new e.Container;return i.shape=new createjs.Shape,i.shape.graphics.s(o).ss(1).f(t).r(0,0,g,p),i.shape.alpha=.9,i.addChild(i.shape),i.label=new createjs.Text("10","16px verdana",n),i.label.textAlign="center",i.label.textBaseline="middle",i.addChild(i.label),i.mouseChildren=!1,i.mouseEnabled=!1,i}function s(e){var o;e?(o=t.globalToLocal(e.rawX,e.rawY),j=o):o={x:j.x,y:j.y},n?(m.label.text="x:"+Math.max(0,Math.min(Math.round(o.x/C*100),100))+"%",m.x=Math.max(y,Math.min(o.x,v)),z.label.text="y:"+Math.max(0,Math.min(Math.round(o.y/T*100),100))+"%",z.y=Math.max(w,Math.min(o.y,b))):(m.label.text="x:"+Math.max(0,Math.min(Math.round(o.x),Math.round(C))),m.x=Math.max(y,Math.min(o.x,v)),z.label.text="y:"+Math.max(0,Math.min(Math.round(o.y),Math.round(T))),z.y=Math.max(w,Math.min(o.y,b))),x&&x.update()}function l(){M=!0,t&&t.getBounds&&(C=t.getBounds().width,T=t.getBounds().height),x&&(x.mouseMoveOutside=!0,x.enableMouseOver(10)),v=C-2*g/3,b=T-p-p,S=new e.Container,h.addChild(S);var i=new createjs.Shape;S.addChild(i);var a=i.graphics;a.s(o).ss(1);var r=new createjs.Shape;if(S.addChild(r),n){for(s=1;s<22;s++)a.mt(s*C/20,0).lt(s*C/20,T);for(s=1;s<20;s++)a.mt(0,s*T/20).lt(C,s*T/20);i.alpha=.3,(a=r.graphics).s(o).ss(1);for(s=1;s<10;s++)a.mt(s*C/10,0).lt(s*C/10,T);for(s=1;s<10;s++)a.mt(0,s*T/10).lt(C,s*T/10)}else{for(s=0;s<C/f;s++)a.mt(s*f,0).lt(s*f,T);for(s=0;s<T/f;s++)a.mt(0,s*f).lt(C,s*f);i.alpha=.3,(a=r.graphics).s(o).ss(1);for(s=0;s<C/(10*f);s++)a.mt(s*(10*f),0).lt(s*(10*f),T);for(var s=0;s<T/(10*f);s++)a.mt(0,s*(10*f)).lt(C,s*(10*f))}a.s("#FFFFFF").ss(8),a.mt(C/2,T/2-40).lt(C/2,T/2+40),a.mt(C/2-40,T/2).lt(C/2+40,T/2),a.s("#000000").ss(4),a.mt(C/2,T/2-40).lt(C/2,T/2+40),a.mt(C/2-40,T/2).lt(C/2+40,T/2),a.s(o).ss(3),a.dr(0,0,C,T),r.alpha=.5,S.cache(0,0,C,T),h.addChild(m),h.addChild(z),x&&x.update()}function d(e){e||(e=event),x&&(String.fromCharCode(e.keyCode)==i.toUpperCase()&&(h.visible=!h.visible,x.off("stagemousemove",u),h.visible&&(u=x.on("stagemousemove",s,h)),x.update()),String.fromCharCode(e.keyCode)==a.toUpperCase()&&(h.removeChild(S),S=null,h.pixels=!h.pixels))}var c;if(c=zob(e.Grid,arguments,"obj, color, percent, hideKey, pixelKey",this))return c;if(z_d("78"),this.zimContainer_constructor(),zot(t)&&(t=zimDefaultFrame?zimDefaultFrame.stage:"stage"),zot(o)&&(o="black"),"stage"==t||t.addChild&&t.getBounds&&t.getBounds()){zot(n)&&(n=!0),zot(i)&&(i="G"),zot(a)&&(a="P");var u,h=this,f=10;this.mouseChildren=!1,this.mouseEnabled=!1;var g=80,p=26,m=r("#dddddd",o,"#333333");m.shape.regX=g/2,m.shape.regY=-p/4,m.label.y=3*p/4;var z=r("#dddddd",o,"#333333");z.shape.regX=-g/6,z.shape.regY=p/2,z.label.x=g/2+g/6;var v,b,y=g/6+g/2,w=2*p;m.x=y,z.y=w,m.label.text="x:0",z.label.text="y:0";var x;"stage"!=t&&t.addChild(h);var C,T,S,k=e.added(h,function(){"stage"==t?(x=h.getStage(),t=x):x=t.getStage(),M||(l(),t.addChild(h)),x.off("stagemousemove",u),u=x.on("stagemousemove",s),x.update()}),M=!1,j={x:0,y:0};Object.defineProperty(this,"pixels",{get:function(){return!n},set:function(e){n=!e,h.resize()}}),window.addEventListener("keydown",d),this.resize=function(){return!!h&&(h.removeChild(S),S=null,x&&(l(),s(),setTimeout(function(){h.removeChild(S),S=null,l()},200)),!0)},this.dispose=function(){return clearInterval(k),h.removeAllChildren(),window.removeEventListener("keydown",d),h.parent&&h.parent.removeChild(h),h=null,!0}}else zog("zim pages - Grid(): Please provide container with bounds for the obj (setBounds())")},e.extend(e.Grid,e.Container,"clone","zimContainer",!1),e.GridManager=function(){z_d("79"),e.Manager.call(this,"GridManager")},e.GridManager.prototype=new e.Manager,e.GridManager.prototype.constructor=e.GridManager,e.Layout=function(t,o,n,i,a,r,s,l){function d(){for(var e=0,t=0;t<o.length;t++)(p=o[t]).given=0,0==p[v]&&(e+=p.object.getBounds()[v]);for(t=0;t<o.length;t++)0==(p=o[t])[v]&&(p.given=p.object.getBounds()[v]/e*C)}function c(e){e||(e=event),r&&String.fromCharCode(e.keyCode)==l.toUpperCase()&&(r.visible=!r.visible,r.getStage()&&r.getStage().update())}var u;if(u=zob(e.Layout,arguments,"holder, regions, lastMargin, backgroundColor, vertical, regionShape, scalingObject, hideKey",this))return u;if(z_d("80"),this.cjsEventDispatcher_constructor(),!zot(t)&&t.getBounds)if((s=zot(s)?t:s).getBounds&&s.getBounds()){var h=s.getBounds();t.setBounds(0,0,h.width,h.height),zot(n)&&(n=0),zot(a)&&(a=!0),zot(i)&&(i=""),zot(l)&&(l="B");var f=new createjs.Shape,g=this;this.active=!0,this.regions=o;var p,m=0,z="minWidth",v="width",b="height",y="marginLeft",w="maxHeight";a&&(z="minHeight",v="height",b="width",y="marginTop",w="maxWidth","y","x");for(var x=0;x<o.length;x++){if(!(p=o[x]).object||!p.object.getBounds())return void zog("zim pages - Layout(): each region object must have an object with setBounds() set");p[z]||(p[z]=0),p[v]||(p[v]=0),p.backgroundColor||(p.backgroundColor=""),p.given=0,p.maxGiven=0,p[y]||(p[y]=0),p[w]||(p[w]=100),a?(p.align||(p.align="middle"),p.valign||(0==x?p.valign="top":x==o.length-1?p.valign="bottom":p.valign="middle",1==o.length&&(p.valign="middle"))):(p.valign||(p.valign="top"),p.align||(0==x?p.align="left":x==o.length-1?p.align="right":p.align="middle",1==o.length&&(p.align="middle"))),p[v]&&(p[z]=0),m+=p[v]+p[y]}if((m+=n)>100)zog("zim pages - Layout(): cannot fit regions into 100% bounds");else{var C=100-m;d(),this.resize=function(){if(g.active){h=s.getBounds(),t.setBounds(0,0,h.width,h.height),f.graphics.clear(),""!=i&&f.graphics.f(i).r(0,0,h.width,h.height);for(P=0;P<o.length;P++)(p=o[P]).maxGiven=0,p.marginGiven=0;for(var l,c,u,x=!0,T=C;x;){c=0,x=!1,l=!0;for(P=0;P<o.length;P++)(p=o[P]).given>0&&0==p.maxGiven&&(B=p.object.getBounds()[v],(O=p.object.getBounds()[b])/B*(p.given*h[v]/100)>(u=p[w]*h[b]/100)?(p.maxGiven=B/O*u*100/h[v],c+=p.given-p.maxGiven,T-=p.maxGiven):l=!1);if(l)break;totalPrimaries=0;for(P=0;P<o.length;P++)0==(p=o[P])[v]&&0==p.maxGiven&&(totalPrimaries+=p.object.getBounds()[v]);for(P=0;P<o.length;P++)0==(p=o[P])[v]&&0==p.maxGiven&&(p.given=p.object.getBounds()[v]/totalPrimaries*T)}var S=!0;if(p=o[0],p.maxGiven>0?p.maxGiven<p[z]&&(p[v]=p[z],S=!1):p.given>0&&p.given<p[z]&&(p[v]=p[z],S=!1),p=o[o.length-1],p.maxGiven>0?p.maxGiven<p[z]&&(p[v]=p[z],S=!1):p.given>0&&p.given<p[z]&&(p[v]=p[z],S=!1),!S){m=0;for(P=0;P<o.length;P++)p=o[P],m+=p[v]+p[y];return(m+=n)>100?void zog("zim build - Layout(): cannot fit regions into 100% bounds"):(C=100-m,d(),void g.resize())}for(var k=!0,M=0,j=0,P=0;P<o.length;P++)M+=(p=o[P])[y],p[v]>0?j+=p[v]:p.maxGiven>0?j+=p.maxGiven:p.given>0&&(j+=p.given),0==p[v]&&(k=!1);if(k||l){var E=100-j-(M+=n);if(M-=n+o[0][y],0!=E&&0!=M)for(P=0;P<o.length;P++)0!=P&&((p=o[P]).marginGiven=p[y]/M*(M+E))}var B,O,A,I,D,X=0,L=0;if(r&&r.graphics){var _=r.graphics;_.c()}for(P=0;P<o.length;P++)(p=o[P]).marginGiven>0?X+=p.marginGiven*h[v]/100:X+=p[y]*h[v]/100,B=(B=p[v]>0?p[v]:p.maxGiven>0?p.maxGiven:p.given>0?p.given:0)*h[v]/100,O=p[w]*h[b]/100,L=(h[b]-O)/2,A=a?e.fit(p.object,L,X,O,B):e.fit(p.object,X,L,B,O),"top"==p.valign?p.object.y=A.bY:"bottom"==p.valign&&(p.object.y=A.bY+A.bHeight-A.height),"left"==p.align?p.object.x=A.bX:"right"==p.align&&(p.object.x=A.bX+A.bWidth-A.width),r&&r.graphics&&(_.s("white").ss(2).r(A.bX,A.bY,A.bWidth,A.bHeight),_.s("#ff8203").sd([20,20]).r(A.bX,A.bY,A.bWidth,A.bHeight).sd()),D=I=0,0!=X&&X+B!=h[v]||(a?D=1:I=1),O==h[b]&&(a?I=1:D=1),""!=p.backgroundColor&&f.graphics.f(p.backgroundColor).r(A.bX,A.bY,A.bWidth+I,A.bHeight+D),X+=B}},this.resize(),r&&t.addChild(r),t.addChildAt(f,0),window.addEventListener("keydown",c),this.disable=function(){g.active=!1,window.removeEventListener("keydown",c),r&&(r.alpha=0)},this.enable=function(){g.active=!0,window.addEventListener("keydown",c),g.resize(),r&&(r.alpha=1)},this.removeShape=function(){r&&(r.graphics.clear(),t.removeChild(r),r=null,r=!1),window.removeEventListener("keydown",c)},this.addShape=function(e,o){g.removeShape(),r=e,window.addEventListener("keydown",c),t.addChild(r),g.resize()},this.dispose=function(){return g.removeShape(),!0}}}else zog("zim pages - Layout(): holder must have bounds set or provide a scalingObject with bounds");else zog("zim pages - Layout(): please provide an object with bounds set that holds the objects being laid out")},e.extend(e.Layout,createjs.EventDispatcher,"clone","cjsEventDispatcher",!1),e.LayoutManager=function(){z_d("81");var e=this;this.items=[],this.add=function(t){e.items.push(t)},this.resize=function(){for(var t=0;t<e.items.length;t++)e.items[t].resize()},this.disable=function(){for(var t=0;t<e.items.length;t++)e.items[t].disable()},this.enable=function(){for(var t=0;t<e.items.length;t++)e.items[t].enable()},this.dispose=function(){for(var t=0;t<e.items.length;t++)e.items[t].removeShape();return!0}},e.Parallax=function(t,o,n,i){var a;if(a=zob(e.Parallax,arguments,"stage, damp, layers, auto",this))return a;if(z_d("68"),!zot(t)&&t.getBounds)if(t.getBounds()){zot(i)&&(i=!0);var r=t.getBounds().width,s=(t.getBounds().height,this),l=zot(o)?.1:o;this.addLayer=function(t){if(!(zot(t.obj)||zot(t.prop)||zot(t.propChange))){var o={obj:t.obj,prop:t.prop};o[o.prop]=t.propChange,zot(t.input)&&(t.input="mouseX"),o.input=t.input;var n=zot(t.inMin)?0:t.inMin,i=zot(t.inMax)?r:t.inMax,a=zot(t.factor)?1:t.factor,s=!zot(t.integer)&&t.integer;return o["p_"+o.prop]=new e.ProportionDamp(n,i,0,o[o.prop],l,a,s),"scale"==o.prop?o["s_"+o.prop]=o.obj.scaleX:"frame"==o.prop?o["s_"+o.prop]=o.obj.currentFrame:o["s_"+o.prop]=o.obj[o.prop],d.push(o),d.length-1}},this.removeLayer=function(e){if(!zot(e)){var t=d[e];t["p_"+t.prop].dispose(),d.splice(e,1)}},this.immediate=function(e){for(var t,o=0;o<d.length;o++)(t=d[o])["p_"+t.prop].immediate(e[o])},this.dispose=function(){return d=null,i&&e.Ticker.remove(u),!0},n=zot(n)?[]:n;for(var d=[],c=0;c<n.length;c++)this.addLayer(n[c]);if(i)var u=e.Ticker.add(function(e){s.step()},t);this.step=function(o){for(var n,a,r=0;r<d.length;r++)n=d[r],zot(o)?"mouseX"==n.input?a=t.mouseX:"mouseY"==n.input?a=t.mouseY:"scrollX"==n.input?a=e.scrollX():"scrollY"==n.input&&(a=e.scrollY()):a=o,"scale"==n.prop?n.obj.scaleX=n.obj.scaleY=n["s_"+n.prop]+n["p_"+n.prop].convert(a):"frame"==n.prop?n.obj.gotoAndStop(n["s_"+n.prop]+n["p_"+n.prop].convert(a)):(n.obj[n.prop]=n["s_"+n.prop]+n["p_"+n.prop].convert(a),"mouseX"==n.input&&i&&(n.obj[n.prop]-=n[n.prop]/2))},Object.defineProperty(s,"damp",{get:function(){return l},set:function(e){l=e;for(var t,o=0;o<d.length;o++)(t=d[o])["p_"+t.prop].damp=l}})}else zog("zim build - Parallax(): Please give the stage bounds using setBounds()");else zog("zim build - Parallax(): please pass in the stage with bounds as first parameter")},e.Scroller=function(t,o,n,i,a,r,s){var l;if(l=zob(e.Scroller,arguments,"backing, speed, direction, horizontal, gapFix, stage, container",this))return l;z_d("69"),this.cjsEventDispatcher_constructor();var d=this.backing1=t;if(!zot(d)&&d.getBounds){var c=this.backing2=t.clone();d.parent.addChild(c),zot(i)&&(i=!0),zot(a)&&(a=0);var u=this;this.speed=zot(o)?1:o;var h=this.baseSpeed=this.speed;this.direction=zot(n)?1:n;var f=i?d.scaleX:d.scaleY;if(d.getBounds())if(r||d.getStage())if(r=r||d.getStage(),zot(s)&&(s=r),s.getBounds()){var g,p,m=d.getBounds().width*f-a,z=d.getBounds().height*f-a;i?c.x=m:c.y=z;var v=!1,b=e.Ticker.add(function(e){g||(g=s.getBounds().width,p=s.getBounds().height),0!=u.speed&&0!=u.direction&&(i?(d.x-=u.speed*u.direction,d.x<c.x?c.x=d.x+m:c.x=d.x-m,u.direction*u.speed>0?c.x<0&&d.x<c.x?d.x=c.x+m:d.x<0&&c.x<d.x&&(c.x=d.x+m):c.x>g&&c.x>d.x?c.x=d.x-m:d.x>g&&d.x>c.x&&(d.x=c.x-m)):(d.y-=u.speed*u.direction,d.y<c.y?c.y=d.y+z:c.y=d.y-z,u.direction*u.speed>0?c.y<0&&d.y<c.y?d.y=c.y+z:d.y<0&&c.y<d.y&&(c.y=d.y+z):c.y>p&&c.y>d.y?c.y=d.y-z:d.y>p&&d.y>c.y&&(d.y=c.y-z)))},r);this.paused=!1,this.pause=function(t,o){return zot(t)&&(t=!0),zot(o)&&(o=0),t?(h=u.speed,o>0?(v=!0,e.animate({target:u,obj:{pausingSpeed:0},ticker:!1,time:o,call:function(){u.speed=0,u.paused=!0,v=!1,u.dispatchEvent("pause")}})):(v=!1,u.speed=0,u.paused=!0,setTimeout(function(){u.dispatchEvent("pause")},10))):(v=!1,o>0?e.animate({target:u,obj:{pausingSpeed:h},ticker:!1,time:o,call:function(){u.speed=h,u.paused=!1,v=!1}}):(u.speed=h,u.paused=!1)),u},Object.defineProperty(u,"percentSpeed",{get:function(){return 0==u.baseSpeed?NaN:u.speed/u.baseSpeed*100},set:function(e){v||u.paused||(u.speed=u.baseSpeed*e/100)}}),Object.defineProperty(u,"pausingSpeed",{get:function(){return 0==u.baseSpeed?NaN:u.speed/u.baseSpeed*100},set:function(e){u.speed=u.baseSpeed*e/100}}),this.dispose=function(){return zon&&zog("bye from Scroller"),e.Ticker.remove(b),!0}}else zog("zim build - Scroller(): please setBounds() on container or stage if no container");else zog("zim build - Scroller(): please pass in stage parameter or add backing objects to stage to start");else zog("zim build - Scroller(): please setBounds() on backing objects")}},e.extend(e.Scroller,createjs.EventDispatcher,null,"cjsEventDispatcher"),e.Dynamo=function(t,o,n,i,a,r,s){function l(){if(f=requestAnimationFrame(l),g=c[u].s,0!=v.speed&&0!=g&&(m=1e3/Math.abs(v.speed)*g,(p=Date.now())-b>m)){b=p;var e=v.frame+(v.speed>0||!s?1:-1),o=!1;e>=c.length&&(o=!0,e=0),e<0&&(o=!0,e=c.length-1),v.frame=e,o&&v.dispatchEvent("loop"),v.dispatchEvent("change"),r&&t.getStage()&&t.getStage().update(),zot(z)||z!=v.frame||(y=!1,v.speed=0,v.paused=!0,v.dispatchEvent("pause"))}}var d;if(d=zob(e.Dynamo,arguments,"sprite, speed, label, startFrame, endFrame, update, reversable",this))return d;z_d("69.2"),this.cjsEventDispatcher_constructor();var c=this.frames=t.parseFrames(n,i,a);if(0!=c.length){this.totalFrames=c.length;var u=0;zot(o)&&(o=30),zot(s)&&(s=!0);var h=this.baseSpeed=this.speed=o;zot(r)&&(r=!1);var f,g,p,m,z,v=this,b=Date.now(),y=!1;l(),this.paused=!1,this.pause=function(t,o,n){return zot(t)&&(t=!0),zot(o)&&(o=0),t?(h=v.speed,zot(n)?o>0?(y=!0,e.animate({target:v,obj:{pausingSpeed:0},ticker:!1,time:o,call:function(){y=!1,v.speed=0,v.paused=!0,v.dispatchEvent("pause")}})):(y=!1,v.speed=0,v.paused=!0,setTimeout(function(){v.dispatchEvent("pause")},10)):(y=!0,z=n)):(z=null,o>0?(y=!0,e.animate({target:v,obj:{pausingSpeed:h},ticker:!1,time:o,call:function(){y=!1,v.speed=h,v.paused=!1}})):(y=!1,v.speed=h,v.paused=!1)),v},Object.defineProperty(v,"frame",{get:function(){return u},set:function(e){u=Math.round(e)%c.length;var o=c[u];zot(o)||(t.frame=o.f)}}),Object.defineProperty(v,"percentSpeed",{get:function(){return 0==v.baseSpeed?NaN:v.speed/v.baseSpeed*100},set:function(e){y||v.paused||(v.speed=v.baseSpeed*e/100)}}),Object.defineProperty(v,"pausingSpeed",{get:function(){return 0==v.baseSpeed?NaN:v.speed/v.baseSpeed*100},set:function(e){v.speed=v.baseSpeed*e/100}}),this.dispose=function(){cancelAnimationFrame(f)}}},e.extend(e.Dynamo,createjs.EventDispatcher,null,"cjsEventDispatcher"),e.Accelerator=function(e){z_d("69.3"),this.cjsEventDispatcher_constructor();var t=this;this.paused=!1,this.items=[],this.paused=!1,this._percentSpeed=100,this.add=function(e){var o;o=Array.isArray(e)?e:[e];for(var n=0;n<o.length;n++)t.items.indexOf(o[n])<0&&o[n].pause&&t.items.push(o[n]);return t},e&&this.add(e),this.remove=function(e){var o;o=Array.isArray(e)?e:[e];for(var n,i=0;i<o.length;i++)(n=t.items.indexOf(o[i]))>=0&&t.items.splice(n,1);return t},this.pause=function(e,o,n){function i(o){for(var n=0;n<t.items.length;n++)1!=a[n]&&t.items[n].pause(e)}zot(e)&&(e=!0);var a=[];if(e){zot(n)||(o=null);for(var r=!1,s=0;s<t.items.length;s++)(zot(o)||!zot(n)||t.items[s].totalFrames)&&(!t.items[s].totalFrames||zot(o)&&zot(n))||(t.items[s].pause(!0,o,n),r=!0,a[s]=1,t.items[s].on("pause",function(){t.paused||(i(!0),t.paused=!0,t.dispatchEvent("pause"))},null,!0));r||(i(),t.paused=!0,setTimeout(function(){t.dispatchEvent("pause")},10))}else t.paused=!1,i()},Object.defineProperty(t,"percentSpeed",{get:function(){return t._percentSpeed},set:function(e){t._percentSpeed=e;for(var o=0;o<t.items.length;o++)t.items[o].percentSpeed=e}}),this.dispose=function(){for(var e=0;e<t.items.length;e++)t.items[e].dispose();return!0}},e.extend(e.Accelerator,createjs.EventDispatcher,null,"cjsEventDispatcher"),e.Swiper=function(t,o,n,i,a,r,s,l,d){function c(){p=a?z.mouseX:z.mouseY,m=v.target[v.property],v.dispatchEvent("swipedown")}function u(){var e=p-(a?z.mouseX:z.mouseY);y=m-e*i,zot(r)||(y=Math.max(y,r)),zot(s)||(y=Math.min(y,s)),v.desiredValue=y,v.dispatchEvent("swipemove")}function h(){b.canvas?(b.off("stagemousedown",w),b.off("stagemousemove",x),b.off("stagemouseup",C)):(b.off("mousedown",w),b.off("pressmove",x),b.off("pressup",C)),e.Ticker.remove(S)}function f(){b.canvas?b.on("stagemousedown",w):(b.on("mousedown",w),b.on("pressmove",x),b.on("pressup",C)),e.Ticker.add(S,z)}var g;if(g=zob(e.Swiper,arguments,"swipeOn, target, property, sensitivity, horizontal, min, max, damp, integer",this))return g;if(z_d("69.5"),this.cjsEventDispatcher_constructor(),!zot(t)&&t.getStage&&t.getStage()){if(!zot(o)){zot(i)&&(i=1),zot(a)&&(a=!0),zot(l)&&(l=.1),zot(d)&&(d=!1);var p,m,z,v=this,b=t,y=v.desiredValue=o[n];this.target=o,this.property=n;var w,x,C;b.canvas?(w=b.on("stagemousedown",function(){c(),x=b.on("stagemousemove",u),C=b.on("stagemouseup",function(){b.off("stagemousemove",x),b.off("stagemouseup",C),v.dispatchEvent("swipeup")})}),z=b):(z=b.getStage(),w=b.on("mousedown",c),x=b.on("pressmove",u),C=b.on("pressup",function(){v.dispatchEvent("swipeup")}));var T=new e.Damp(v.target[v.property]),S=e.Ticker.add(function(){v.target[v.property]=d?Math.round(T.convert(y)):T.convert(y)},z);this.immediate=function(e){T.immediate(e),v.target[v.property]=d?Math.round(e):e,v.desiredValue=y=e};var k=!0;Object.defineProperty(v,"enabled",{get:function(){return k},set:function(e){k!=e&&(e?f():h(),k=Boolean(e))}}),this.dispose=function(){h(),T=null}}}else zog("zim.Swiper() - please provide container on stage")},e.extend(e.Swiper,createjs.EventDispatcher,null,"cjsEventDispatcher",!1),e.MotionController=function(t,o,n,i,a,r,s,l,d,c,u,h,f,g,p,m){function z(e){var t,o="keydown"==n?e.keyCode:e.buttonCode;for(Z=0;Z<4;Z++)if(s[Z].indexOf(o)>-1){if(l||"both"!=M.axis||(X.dirX=X.dirY=0),X["dir"+I[Z]]=D[Z],O[Z]=1,0==(t=A.indexOf(Z)))return;return t>0&&A.splice(t,1),void A.unshift(Z)}}function v(e){var t,o="keydown"==n?e.keyCode:e.buttonCode;for(Z=0;Z<4;Z++)if(s[Z].indexOf(o)>-1){if(O[Z]=0,(t=A.indexOf(Z))>=0&&A.splice(t,1),"both"!=M.axis||l)X["dir"+I[Z]]=-O[2*Math.floor(Z/2)]+O[2*Math.floor(Z/2)+1];else if(A.length>0){X["dir"+I[Z]]=0;var i=A[0];X["dir"+I[i]]=D[i]}else X.dirX=X.dirY=0;return}}function b(e){W.rotation+=e.dirX*M.turnSpeed,M.rotation=W.rotation,W.speedX=Math.sin(W.rotation*Math.PI/180)*M.speed*-e.dirY,W.speedY=-Math.cos(W.rotation*Math.PI/180)*M.speed*-e.dirY,M.x+=W.speedX,M.y+=W.speedY}function y(){var e=x(M.x-M.target.x,M.y-M.target.y);if(j=e.speedX,P=e.speedY,u)if(M.rotation=e.angle,zot(M.rotation))M.rotation=M.target.rotation;else{M.rotation+=E;var t=w(M.rotation),o=M.target.rotation=w(M.target.rotation);Math.abs(t-o)>180&&(o>t?o-=360:t-=360),M.dampR.immediate(o),M.target.rotation=o,M.rotation=t}}function w(e){return(e%360+360)%360}function x(e,t){var o,n=M.speed,i=M.speed,a=Math.sqrt(Math.pow(e,2)+Math.pow(t,2));return a>0&&(n=Math.abs(e)/a*M.speed,i=Math.abs(t)/a*M.speed,o=90-180*Math.atan2(e,t)/Math.PI),{speedX:n,speedY:i,angle:o}}function C(){"keydown"==n?(frame.on("keydown",L),frame.on("keyup",Y),e.Ticker.add(N,k)):"gamebutton"==n?(G.on("buttondown",_),G.on("buttonup",R),e.Ticker.add(N,k)):"gamestick"==n?G.on("data",H):"swipe"==n?(U.enabled=!0,q.enabled=!0,U.on("swipemove",V)):"mousedown"!=n&&"mousemove"!=n||k.on("stage"+n,F),e.Ticker.add(ee,k)}function T(){"keydown"==n?(frame.off("keydown",L),frame.off("keyup",Y),e.Ticker.remove(N)):"gamebutton"==n?(G.off("buttondown",_),G.off("buttonup",R),e.Ticker.remove(N)):"gamestick"==n?G.off("data",H):"swipe"==n?(U.enabled=!1,q.enabled=!1,U.off("swipemove",V)):"mousedown"!=n&&"mousemove"!=n||k.off("stage"+n,F),e.Ticker.remove(ee)}var S;if(S=zob(e.MotionController,arguments,"container, target, type, speed, axis, rect, map, diagonal, damp, flip, rotate, constant, firstPerson, turnSpeed, moveThreshold, stickThreshold",this))return S;if(z_d("69.7"),this.cjsEventDispatcher_constructor(),!zot(t)&&t.getStage)if(zot(t.getStage()))zog("zim Controller(): The Container must be on the stage");else{var k=t.getStage();zot(o)&&(o=new e.Container(1,1)),zot(i)&&(i=7),(zot(n)||"mousemove"!=n&&"keydown"!=n&&"gamebutton"!=n&&"gamestick"!=n&&"swipe"!=n&&"manual"!=n)&&(n="mousedown"),zot(a)&&(a="both"),"keydown"==n&&zot(s)&&(s=[[65,37],[68,39],[87,38],[83,40]]),"gamebutton"==n&&zot(s)&&(s=f?[14,15,e.GamePad.RT,e.GamePad.LT]:[14,15,12,13]),"gamestick"==n&&zot(s)&&(s=f?[[0,2],[0,2],[1],[1]]:[0,0,1,1]),"gamestick"==n&&zot(s)&&(s=[0,0,1,1]),zot(l)&&(l=!0),"horizontal"!=a&&"vertical"!=a||(l=!1),zot(d)&&(d="keydown"==n||"gamebutton"==n?1:.1),zot(f)&&(f=!1),zot(g)&&(g=.4*i),zot(p)&&(p=4),zot(m)&&(m=.2);var M=this;this.dirX=0,this.dirY=0,this.speed=i,this.turnSpeed=g,this.axis=a,this.target=o,this.moveThreshold=p,this.stickThreshold=m;var j=M.speed,P=M.speed,E=0;M.rotation=0,M.x=this.target.x,M.y=this.target.y;var B=M.scaleX=o.scaleX;M.scaleY=o.scaleY;if("keydown"==n||"gamebutton"==n){for(Z=0;Z<4;Z++)Array.isArray(s[Z])||(s[Z]=[s[Z]]);var O=[0,0,0,0],A=[],I=["X","X","Y","Y"],D=[-1,1,-1,1],X={dirX:0,dirY:0};if("keydown"==n)var L=frame.on("keydown",z);else var _=(G=M.gamepad=new e.GamePad).on("buttondown",z);if(zot(h))if("keydown"==n)var Y=frame.on("keyup",v);else var R=G.on("buttonup",v);var W={rotation:0,speedX:M.speed,speedY:M.speed},N=e.Ticker.add(function(){if(f)b(X);else{var e=M.speed,t=M.speed;if("both"==M.axis&&0!=X.dirX&&0!=X.dirY){var o=x(X.dirX,X.dirY);e=o.speedX,t=o.speedY}"horizontal"!=M.axis&&"both"!=M.axis||(M.x+=e*X.dirX),"vertical"!=M.axis&&"both"!=M.axis||(M.y+=t*X.dirY),y()}},k)}else if("mousedown"==n||"mousemove"==n)var F=k.on("stage"+n,function(){var e=t.globalToLocal(k.mouseX,k.mouseY);M.x=e.x,M.y=e.y,y()});else if("gamestick"==n){for(var G=this.gamepad=new e.GamePad,Z=0;Z<4;Z++)Array.isArray(s[Z])||(s[Z]=[s[Z]]);var W={rotation:0,speedX:M.speed,speedY:M.speed},H=G.on("data",function(e){for(var t={dirX:0,dirY:0},o=0;o<s[0].length;o++){n=e.axes[s[0][o]];if(Math.abs(n)>M.stickThreshold){t.dirX=n;break}}for(o=0;o<s[2].length;o++){var n=e.axes[s[2][o]];if(Math.abs(n)>M.stickThreshold){t.dirY=n;break}}f?b(t):(M.x+=M.speed*t.dirX,M.y+=M.speed*t.dirY,y())})}else if("swipe"==n)var U=new e.Swiper(k,M,"x",.8),q=new e.Swiper(k,M,"y",.8,!1),V=U.on("swipemove",function(){y()});var K=this.x=this.target.x,Q=this.y=this.target.y;this.dampX=new e.Damp(K,d),this.dampY=new e.Damp(Q,d),this.dampR=new e.Damp(this.target.rotation,d);var J=0,$=0,ee=e.Ticker.add(function(){if(r&&(M.x=e.constrain(M.x,r.x,r.x+r.width),M.y=e.constrain(M.y,r.y,r.y+r.height)),"horizontal"!=M.axis&&"both"!=M.axis||(M.dirX=e.sign(M.x-K),Math.abs(M.x-K)<j?K=M.x:K+=M.dirX*j,M.target.x=M.dampX.convert(K)),"vertical"!=M.axis&&"both"!=M.axis||(M.dirY=e.sign(M.y-Q),Math.abs(M.y-Q)<P?Q=M.y:Q+=e.sign(M.y-Q)*P,M.target.y=M.dampY.convert(Q)),M.dirX!=J||M.dirY!=$){var t=new createjs.Event("change");if(M.dirX!=J){n=["left",null,"right"];t.dir=n[M.dirX+1],J=M.dirX,"horizontal"!=c&&"both"!=c||(M.scaleX=o.scaleX=M.dirX?Math.abs(o.scaleX)*M.dirX:o.scaleX,E=0!=B&&-1==Math.round(M.scaleX/B)?180:0)}else{var n=["up",null,"down"];t.dir=n[M.dirY+1],$=M.dirY,"vertical"!=c&&"both"!=c||(M.scaleY=o.scaleY=M.dirY?Math.abs(o.scaleY)*M.dirY:o.scaleY)}M.dispatchEvent(t)}M.movingX=Math.abs(K-M.target.x)>M.moveThreshold,M.movingY=Math.abs(Q-M.target.y)>M.moveThreshold,M.moving=M.movingX||M.movingY,u&&!zot(M.rotation)&&(M.target.rotation=M.dampR.convert(M.rotation))},k);this.immediate=function(e,t,o){!zot(e)&&M.dampX&&(M.dampX.immediate(e),M.x=M.target.x=K=e,U&&U.immediate(e)),!zot(t)&&M.dampY&&(M.dampY.immediate(t),M.y=M.target.y=Q=t,q&&q.immediate(t)),!zot(o)&&M.dampR&&(M.dampR.immediate(o),M.rotation=M.target.rotation=o)},this.convert=function(e,t){zot(e)||(M.x=e),zot(t)||(M.y=t),y()};var te=!0;Object.defineProperty(M,"enabled",{get:function(){return te},set:function(e){te!=e&&(e?C():T(),te=Boolean(e))}}),this.dispose=function(){T(),G&&G.dispose(),U&&U.dispose(),q&&U.dispose()}}else zog("zim Controller(): Please pass in a reference to a container as first parameter")},e.extend(e.MotionController,createjs.EventDispatcher,"enabled","cjsEventDispatcher"),e.GamePad=function(){function e(e){function a(){if(n=requestAnimationFrame(a),i.data=navigator.getGamepads()[i.currentIndex],i.data){for(var e=i.buttons=[],t=0;t<i.data.buttons.length;t++)if(e[t]=i.data.buttons[t].pressed,e[t]!=i.lastData[t]){if(i.lastData[t]=e[t],e[t])r=new createjs.Event("buttondown");else var r=new createjs.Event("buttonup");r.buttonCode=t,r.button=o[t],i.dispatchEvent(r)}(r=new createjs.Event("data")).axes=i.axes=i.data.axes,r.buttons=i.buttons,i.dispatchEvent(r)}}i.connected=!0,t("gamepadconnected",e);var r=navigator.getGamepads()[i.currentIndex];i.lastData=[];for(var s=0;s<r.buttons.length;s++)i.lastData[s]=r.buttons[s].pressed;a()}function t(e,t){var o=new createjs.Event(e);o.index=t.gamepad.index,o.id=t.gamepad.id,o.buttons=t.gamepad.buttons,o.axes=t.gamepad.axes,i.dispatchEvent(o)}if(z_d("69.8"),this.cjsEventDispatcher_constructor(),!navigator.getGamepads)return this.error=!0,void(zon&&zog("zim.GamePad() - no browswer support"));var n;window.addEventListener("gamepadconnected",e),this.currentIndex=0;var i=this,a=setInterval(function(){navigator.getGamepads&&navigator.getGamepads()[0]&&(i.connected||e(),clearInterval(a))},500),r=window.addEventListener("gamepaddisconnected",function(e){e.gamepad.index==i.currentIndex&&(cancelAnimationFrame(n),connected=!1,i.dispatchEvent("gamepaddisconnected"))});this.dispose=function(){window.removeEventListener("gamepadconnected",e),window.addEventListener("gamepaddisconnected",r),cancelAnimationFrame(n),clearInterval(a),i.connected=!1}};for(var o=["A","B","X","Y","LB","RB","LT","RT","BACK","START","LS","RS","DPAD_UP","DPAD_DOWN","DPAD_LEFT","DPAD_RIGHT"],n=0;n<o.length;n++)e.GamePad[o[n]]=n;var i=["LSX","LSY","RSX","RSY"];for(n=0;n<i.length;n++)e.GamePad[i[n]]=n;return e.extend(e.GamePad,createjs.EventDispatcher,null,"cjsEventDispatcher"),e.Emitter=function(t,o,n,i,a,r,s,l,d,c,u,h,f,g,p,m,z,v,b,y,w,x,C,T,S,k,M,j,P,E){function B(e){if(X.events&&O("fizzed",e),(e.trace?e.getChildAt(0).endSpurt:e.endSpurt)&&(O("spurtFizzed",e),X.spurting=!1),X.pool&&"end"!=e.pooled)return e.pooled?void(e.visible=!1):(e.pooled=!0,Y.push(e),void(e.visible=!1));X.removeChild(e),X.trace&&e.uncache(),e=null}function O(e,t){var o=new createjs.Event(e);o.particle=t.trace?t.getChildAt(0):t,X.dispatchEvent(o)}function A(e){zot(X.spurtCount)&&zot(X.spurtNum)||++X.spurtCount>=X.spurtNum&&I(e)}function I(e){X.pause(),X.spurtCount=X.spurtNum=null,O("spurted",e),e.endSpurt=!0}var D;if(D=zob(e.Emitter,arguments,"obj, width, height, interval, num, life, fade, shrink, decayTime, decayStart, trace, traceFadeTime, traceShiftX, traceShiftY, angle, force, gravity, wind, layers, animation, random, horizontal, vertical, sink, sinkForce, cache, events, startPaused, pool, poolMin",this))return D;z_d("69.9"),zot(t)&&(t=[]),zot(o)&&(o=300),zot(n)&&(n=300),zot(i)&&(i=20),"number"==typeof i&&(i=Math.max(10,i)),zot(a)&&(a=1),zot(u)&&(u=!1),zot(h)&&(h=d),zot(f)&&(f=0),zot(g)&&(g=0),zot(r)&&(r=1e3),zot(s)&&(s=!0),zot(l)&&(l=!u),zot(d)&&(d=1e3),zot(p)&&(p={min:0,max:360}),zot(m)&&(m=5),zot(z)&&(z=9.8),zot(v)&&(v=0),zot(b)&&(b="top"),zot(o)&&(o=100),zot(n)&&(n=100),zot(x)&&(x=!1),zot(C)&&(C=!1),!zot(T)&&zot(S)&&(S=10),zot(M)&&(M=!1),zot(j)&&(j=!1),zot(P)&&(P=!0),zot(E)&&(E=0),this.zimContainer_constructor(o,n);var X=this;X.obj=t,X.interval=i,X.num=a,X.life=r,X.fade=s,X.shrink=l,X.decayTime=d,X.decayStart=c,X.trace=u,X.traceFadeTime=h,X.traceShiftX=f,X.traceShiftY=g,X.angle=p,X.force=m,X.gravity=z,X.wind=v,X.layers=b,X.animation=y,X.random=w,X.horizontal=x,X.vertical=C,X.sink=T,X.sinkForce=S,X.events=M,X.startPaused=j,X.pool=P,X.poolMin=E,X.particlesEmitted=0;var L,_,Y=[],R=0,W=0;e.added(X,function(i){_=i,zot(k)&&(k=!_.isWebGL&&e.mobile()),k&&(_.snapToPixelEnabled=!0),_&&(x||C||X.centerReg(),X.zimInterval=e.interval(X.interval,function(){function i(e,t){return e-t}if(X.startPaused)X.pause();else if(!((t=Array.isArray(X.obj)?X.obj:[X.obj]).length<=0)){var a,r;Array.isArray(X.interval)?(X.interval.sort(i),a=X.interval[0]):a=X.interval.constructor=={}.constructor?X.interval.min:X.interval,Array.isArray(X.num)?(X.num.sort(i),r=X.num[X.num.length-1]):r=X.num.constructor=={}.constructor?X.num.max:X.num,e.loop(zik(X.num),function(){if(X.decayTime>0){var i={};X.shrink&&(i.scale=0),X.fade&&(i.alpha=0)}if(X.pool&&Y.length>0&&W>=Math.max(X.poolMin,(X.life/a+5)*r))(s=Y[R++%Y.length]).visible=!0,(c=s.trace?s.getChildAt(0):s).emitShape&&(d=c.template,c.graphics.c().s(d.s?zik(d.s):null).ss(d.ss?zik(d.ss):null).sd(d.sd?zik(d.sd):null,d.offset?zik(d.offset):null)),s.trace&&s.updateCache(),"top"==X.layers?c.emitShape?s.addTo(X):s.centerReg(X):c.emitShape?s.addTo(X,!0,"bottom"==X.layers?0:e.rand(X.numChildren)):s.centerReg(X,"bottom"==X.layers?0:e.rand(X.numChildren)),s.alpha=1,s.scale(1),c.alpha=c.originalAlpha,c.scaleX=c.originalScaleX,c.scaleY=c.originalScaleY,c.endSpurt=!1;else{W++;var s;X.trace&&((s=new e.Container(o,n)).trace=!0);var l=zik(e.shuffle(t)[0]);if("shape"==l.type){var d=l;(c=new e.Shape(1,1)).emitShape=!0,c.template=d,c.graphics.s(d.s?zik(d.s):null).ss(d.ss?zik(d.ss):null).sd(d.sd?zik(d.sd):null,d.offset?zik(d.offset):null),X.trace?c.addTo(s):"top"==X.layers?c.addTo(X):c.addTo(X,"bottom"==X.layers?0:e.rand(X.numChildren))}else{var c=l.clone();c.centerReg||zimify(c),X.trace?c.centerReg(s).pos(-1e3,-1e3):"top"==X.layers?c.centerReg(X):c.centerReg(X,"bottom"==X.layers?0:e.rand(X.numChildren))}X.trace&&("top"==X.layers?s.addTo(X):s.addTo(X,"bottom"==X.layers?0:e.rand(X.numChildren)),s.cache(f,g,o,n)),X.trace||(s=c),s.particle=c,c.originalAlpha=c.alpha,c.originalScaleX=c.scaleX,c.originalScaleY=c.scaleY}X.currentParticle=c,X.particlesEmitted++,s.particleNormal=!0,s.particleDecaying=!1,s.particleFizzing=!1;var u=zik(X.angle),h=zik(X.force),p=h*Math.cos(u*Math.PI/180),m=h*Math.sin(u*Math.PI/180);c.info={position:{x:o/2,y:n/2},velocity:{x:p,y:m}},X.horizontal&&(c.info.position={x:e.rand(0,o),y:X.vertical?n/2:0}),X.vertical&&(c.info.position={x:X.horizontal?o/2:0,y:e.rand(0,n)}),c.emitShape?c.graphics.mt(c.info.position.x,c.info.position.y):c.pos(c.info.position.x,c.info.position.y),X.random&&e.loop(X.random,function(e,t){val=zik(t),"scale"==e?c.scale(val):("x"==e?c.info.position.x=X.horizontal||X.vertical?val:val+o/2:"y"==e&&(c.info.position.y=X.horizontal||X.vertical?val:val+n/2),c[e]=val,c.emitShape&&c.pos(0,0))}),k&&!c.emitShape&&c.cache(c.getBounds().x-10,c.getBounds().y-10,c.getBounds().width+20,c.getBounds().height+20);var z=!c.emitShape&&X.shrink;if(X.decayTime>0&&(X.fade||z||X.trace&&X.traceFadeTime>0)){if(X.trace&&X.traceFadeTime>0&&s.animate({obj:{alpha:0},time:X.traceFadeTime,wait:X.life-X.traceFadeTime,waitedCall:function(e){e.particleNormal=!1,e.particleFizzing=!0},call:B,override:!1,id:"decay"}),X.fade||z){var v={};X.fade&&(v.alpha=0),z&&(v.scaleX=0,v.scaleY=0),c.animate({obj:v,time:X.decayTime,wait:zot(X.decayStart)?X.life-X.decayTime:X.decayStart,waitedCall:function(e){e.parent!=X&&(e=e.parent),e.particleNormal=!1,e.particleDecaying=!0},call:function(t){X.events&&O("decayed",t),t.endSpurt&&O("spurtDecayed",t),X.trace&&X.traceFadeTime>0||(zot(X.decayStart)||X.decayStart+X.decayTime>X.life?B(t.parent.trace?t.parent:t):function(){var t=s;e.timeout(X.life-(X.decayStart+X.decayTime),function(){B(t)})}())},override:!1,id:"decay"})}}else X.life>0&&function(){var t=s;t.timeOut=e.timeout(X.life,function(){B(t)})}();if(X.events&&O("emitted",s),A(c),X.animation){var b=zik(X.animation);zot(b.override)&&(b.override=!1),c.animate(e.copy(b))}})}},null,!0),L=X.emitterTicker=e.Ticker.add(function(){e.loop(X,function(t){if(t.trace){var o=t;t=t.getChildAt(0)}var n=t.info,i=0,a=0;if(!zot(X.sink)){var r=X.localToGlobal(n.position.x,n.position.y);if(X.sink.parent&&X.sink.parent.localToGlobal)var s=X.sink.parent.localToGlobal(X.sink.x,X.sink.y);else s=new createjs.Point(zik(X.sink.x),zik(X.sink.y));var l=e.angle(r.x,r.y,s.x,s.y),i=X.sinkForce*Math.cos(l*Math.PI/180),a=X.sinkForce*Math.sin(l*Math.PI/180)}var d=X.wind+i,c=X.gravity+a;n.velocity.x+=d*frameRate,n.velocity.y+=c*frameRate,n.position.x+=n.velocity.x*frameRate*100,n.position.y+=n.velocity.y*frameRate*100,t.emitShape?t.graphics.lt(n.position.x,n.position.y):(t.x=n.position.x,t.y=n.position.y),X.trace&&o&&o.updateCache(t.emitShape?null:"source-over")})},_),frameRate=1/e.Ticker.framerate)}),Object.defineProperty(X,"interval",{get:function(){return i},set:function(e){i=e,X.zimInterval&&(X.zimInterval.time=i)}}),this.spurting=!1,this.spurt=function(t,o,n){var i;if(i=zob(X.spurt,arguments,"num, time, restart"))return i;zot(o)||(e.timeout(zik(o),function(){I(X.currentParticle)}),X.spurting=!0),zot(t)||(X.spurtNum=zik(t),X.spurtCount=0,X.spurting=!0),X.pause(!1,n,null,!0)},this.clearPool=function(){e.loop(X,function(e){e.pooled="end",e.visible||X.removeChild(e)},!0),W=0,R=0,Y=[]},X.startPaused||(this.paused=!1),this.pause=function(t,o,n,i){if(X.startPaused=null,zot(t)&&(t=!0),zot(o)&&(o=!1),zot(n)&&(n=!1),t){if(X.paused)return X;n&&(L&&e.Ticker.remove(L),e.loop(X,function(e){e.pauseZimAnimate(),e.trace&&e.getChildAt(0).pauseZimAnimate(),e.timeOut&&e.timeOut.pause()})),X.zimInterval.pause(),X.paused=!0}else{if(!X.paused)return X;o&&(e.loop(X,function(e){e.stopZimAnimate(),e.timeOut&&e.timeOut.clear(),e.trace&&e.getChildAt(0).pauseZimAnimate()}),X.removeAllChildren()),_&&L&&!e.Ticker.has(_,L)&&(e.Ticker.add(L,_),e.loop(X,function(e){e.pauseZimAnimate(!1),e.timeOut&&e.timeOut.pause(!1),e.trace&&e.getChildAt(0).pauseZimAnimate(!1)})),X.zimInterval.pause(!1,i),X.paused=!1}return X},this.resize=function(e,t){zot(e)||(o=e),zot(t)||(n=t),X.setBounds(0,0,o,n),x||C||X.centerReg(),X.clearPool()},this.clone=function(){var t;return t=Array.isArray(X.obj)||X.obj.constructor=={}.constructor?e.copy(X.obj):X.obj.clone?X.obj.clone():X.obj,X.cloneProps(new e.Emitter(t,o,n,X.interval,X.num,X.life,X.fade,X.shrink,X.decayTime,X.decayStart,X.trace,X.traceFadeTime,X.traceShiftX,X.traceShiftY,X.angle,X.force,X.gravity,X.wind,X.layers,X.animation,e.copy(X.random),X.horizontal,X.vertical,X.sink,X.sinkForce,k,X.events,j,X.pool,X.poolMin))},this.dispose=function(){return L&&e.Ticker.remove(L),e.loop(X,function(e){e.stopZimAnimate()}),X.zimInterval.clear(),!0}},e.extend(e.Emitter,e.Container,"clone","zimContainer",!1),e.SoundWave=function(t,o,n,i,a,r,s){function l(i){i.connect(h),"mic"!=o&&h.connect(u.destination),h.fftSize=2*e.SoundWave.bufferLength;var a=Math.floor(n*e.SoundWave.bufferLength/t);if(a<1)zog("ZIM SoundWave: inlcude param is too small or num param is too big");else{var r=h.frequencyBinCount,l=new Uint8Array(r);c.calculate=function(){h.getByteFrequencyData(l);var t=l.map(s);if(1==a)return t;for(var i=[],r=0,d=0;d<n*e.SoundWave.bufferLength;d++)r+=l[d],0!=d&&d%a==0&&(i.push(r/a),r=0);return i.push(r/a),"mic"!=o&&(i[0]*=.75,i[1]*=.9,i[2]*=.95),i[i.length-1]*=1.3,i[i.length-2]*=1.2,i[i.length-3]*=1.1,i},setTimeout(function(){c.dispatchEvent("ready")},50)}}var d;if(d=zob(e.SoundWave,arguments,"num, input, include, smoothing, min, max, operation",this))return d;z_d("69.95"),zot(t)&&(t=120),zot(o)&&(o="mic"),zot(n)&&(n=.1171875),zot(i)&&(i=.85),zot(a)&&(a="mic"==o?-80:-100),zot(r)&&(r="mic"==o?-40:-10),zot(s)&&(s=function(t,o){return t*(.5+1*o/Math.pow(e.SoundWave.bufferLength,.9))}),e.SoundWave.bufferLength=1024,this.num=t;var c=this,u=new(window.AudioContext||window.webkitAudioContext),h=c.analyser=u.createAnalyser();if(h.minDecibels=a,h.maxDecibels=r,h.smoothingTimeConstant=i,Object.defineProperty(this,"smoothing",{get:function(){return h.smoothingTimeConstant},set:function(e){h.smoothingTimeConstant=e}}),"mic"==o)return navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,void(navigator.getUserMedia?navigator.getUserMedia({audio:!0},function(e){l(c.source=u.createMediaStreamSource(e))},function(e){zog("ZIM SoundWave: Error occured: "+e)}):zog("ZIM SoundWave: Sorry, mic not supported"));if(o.type&&"sound"==o.type)zog("ZIM SoundWave: pass in the result of a zim.asset('somesound').play() for the input");else{if(o.playbackResource)var f=o.playbackResource,g=u.createMediaElementSource(f);else var f=o,g=u.createMediaElementSource(f);l(g)}},e.extend(e.SoundWave,createjs.EventDispatcher,null,"cjsEventDispatcher",!1),zon&&zog("ZIM FRAME"),e.Frame=function(t,o,n,i,a,r,s,l,d,c,u,h,f,g,p,m,z,v,b,y,w,x,C){function T(){if(!W){if(W=!0,-1==O.indexOf(t)){if(X=t,zot(zid(X)))return void zog("zim.Frame - scaling: HTML tag with id="+t+" must exist");L=this.tag=zid(X),t=zot(o)||zot(n)?"tag":"inline","myCanvas"==c&&(c=X+"Canvas")}zot(o)&&(o=500),zot(n)&&(n=500),S(),k(),B?(s&&setTimeout(function(){window.scrollTo(0,0)},50),setTimeout(function(){M(),E.dispatchEvent("ready"),R=!0,j()},100),h>100&&setTimeout(function(){M(),j()},h)):(E.dispatchEvent("ready"),R=!0,j())}}function S(){var o=E.canvas=document.createElement("canvas");o.setAttribute("id",c),"full"==t||"tag"==t?(o.setAttribute("width",e.windowWidth()),o.setAttribute("height",e.windowHeight())):(o.setAttribute("width",_),o.setAttribute("height",Y)),"tag"==t||"inline"==t?L.appendChild(o):document.body.appendChild(o),zot(i)||(o.style.backgroundColor=i),"full"!=t&&"fit"!=t&&"outside"!=t||(o.style.position="absolute",document.body.style.overflow="hidden")}function k(){M(),-1!=O.indexOf(t)&&(E.zil=zil()),A=y?new createjs.StageGL(c,w):new createjs.Stage(c),!zot(i)&&y&&A.setClearColor(e.convertColor(i)),A.setBounds(0,0,_,Y),A.width=_,A.height=Y,a&&A.enableMouseOver(10),r&&createjs.Touch.enable(A),x&&(A.nextStage=x.stage),C&&(A.nextStage=C)}function M(){var o,n,i=zid(c),a=e.windowWidth(),r=e.windowHeight();if((I=E.orientation=a>r?"horizontal":"vertical")!=D&&(D=I,E.dispatchEvent("orientation")),B&&s&&setTimeout(function(){window.scrollTo(0,0)},100),i){if("fit"==t)E.scale=a/r>=_/Y?r/Y:a/_;else if("outside"==t)E.scale=a/r>=_/Y?a/_:r/Y;else{if("full"==t)return i.style.left=i.style.top="0px",i.width=_=a,i.height=Y=r,void(A&&(A.setBounds(0,0,_,Y),A.width=_,A.height=Y,y&&A.updateViewport(_,Y)));if("tag"==t)return _=L.offsetWidth,Y=L.offsetHeight,A&&(A.setBounds(0,0,_,Y),A.width=_,A.height=Y,y&&A.updateViewport(_,Y)),L.style.overflow="hidden",i.width=_,i.height=Y,void(i.style.left=i.style.top="0px");if("inline"==t)return A&&(A.setBounds(0,0,_,Y),A.width=_,A.height=Y,y&&A.updateViewport(_,Y)),void(i.style.left=i.style.top="0px")}n=Y*E.scale,o=_*E.scale,i.style.width=o+"px",i.style.height=n+"px",E.x="left"==l?0:"right"==l?a-o:(a-o)/2,E.y="top"==d?0:"bottom"==d?r-n:(r-n)/2,i.style.left=E.x+"px",i.style.top=E.y+"px"}}function j(){R&&(E.dispatchEvent("resize"),!e.OPTIMIZE&&A&&"full"==t&&A.update())}var P;if(P=zob(e.Frame,arguments,"scaling, width, height, color, rollover, touch, scrollTop, align, valign, canvasID, rollPerSecond, delay, handleTabs, tabHighlight, tabHighlightScale, tabHighlightAlpha, tabHighlightTime, tabHighlightObject, canvasCheck, gpu, gpuObj, nextFrame, nextStage",this))return P;z_d("83"),this.cjsEventDispatcher_constructor();var E=this;if("undefined"==typeof zimDefaultFrame&&(zimDefaultFrame=this),zot(b)&&(b=!0),!!window.HTMLCanvasElement||!b){var B=e.mobile();zot(t)&&(t="full"),zot(a)&&(a=!B),zot(r)&&(r=!0),zot(s)&&(s=!0),zot(l)&&(l="center"),zot(d)&&(d="center"),zot(c)&&(c="myCanvas"),zot(u)&&(u=20),zot(h)&&(h=0),zot(f)&&(f=!0),zot(g)&&(g=!0),zot(p)&&(p=.8),zot(m)&&(m=.3),zot(z)&&(z=700),zot(v)&&(v=new e.Circle(100,"white")),zot(y)&&(y=!1);var O=["fit","outside","full"];this.scale=1,this.x=0,this.y=0;var A,I,D,X,L,_=o,Y=n,R=!1,W=!1;"interactive"===document.readyState||"complete"===document.readyState?setTimeout(function(){T()},200):document.addEventListener("DOMContentLoaded",T);var N,F=!1,G="full"==t&&"undefined"!=typeof InstallTrigger;window.addEventListener("resize",function(){G?F||(F=!0,N=e.Ticker.update,e.Ticker.update=!1,setTimeout(function(){F=!1,A==zimDefaultFrame.stage&&(e.Ticker.update=N)},40),setTimeout(function(){M(),j()},20)):(M(),j(),h>0&&B&&setTimeout(function(){M(),j()},h))}),this.loadAssetsCount=0,this.assets={},this.loadAssets=function(t,o,n,i){if(!zot(t)){zot(n)&&(n=!1),Array.isArray(t)||(t=[t]),zot(i)&&(i=0);var a,r,s,l=!1,d=[],c=/\.([^.]+)$/i;for(s=0;s<t.length;s++)r=(a=t[s]).match(c),createjs.Sound.SUPPORTED_EXTENSIONS.indexOf(r[1])>=0&&(l=!0),d.push({src:a});var u=new e.Queue;E.loadAssetsCount++,E.isLoading=!0;var h=u.preload=E.preload=new createjs.LoadQueue(n,o);l&&h.installPlugin(createjs.Sound),h.on("progress",function(e){u.dispatchEvent(e),E.dispatchEvent(e)}),h.on("error",function(e){u.dispatchEvent(e),E.dispatchEvent(e)}),h.on("fileload",function(t){var o,n=t.item,i=t.item.type;n.id.match(c);o=i&&i==createjs.LoadQueue.SOUND?E.assets[n.id]={type:"sound",id:n.id,play:function(e){var t=createjs.Sound.play(n.id,e);return t.getStage=function(){return A},t}}:i==createjs.LoadQueue.IMAGE?E.assets[n.id]=new e.Bitmap(t.result,n.id):E.assets[n.id]=t.result;var a=new createjs.Event("assetload");a.item=n,a.asset=o,u.dispatchEvent(t),E.dispatchEvent(a)});var f=Date.now();return E.preloadEvent=h.on("complete",function(e){var t=Date.now();i=Math.max(0,i-(t-f)),setTimeout(function(){--E.loadAssetsCount<=0&&(E.isLoading=!1),u.isLoading=!1,u.dispatchEvent(e),E.dispatchEvent(e)},i)}),h.loadManifest(d),u}},this.asset=function(e){if(!zot(e))return E.assets[e]||{play:function(){if(zon)return zog("zim.Frame - asset("+e+") not found"),{}}}},Object.defineProperty(E,"stage",{get:function(){return A},set:function(e){zog("zim.Frame(): stage is read only - see remakeCanvas(), perhaps")}}),Object.defineProperty(E,"width",{get:function(){return _},set:function(e){zog("zim.Frame(): width is read only - see remakeCanvas(), perhaps")}}),Object.defineProperty(E,"height",{get:function(){return Y},set:function(e){zog("zim.Frame(): height is read only - see remakeCanvas(), perhaps")}}),Object.defineProperty(this,"color",{get:function(){return i},set:function(t){i=t,zot(t)?zid(c).style.backgroundColor="default":(zid(c).style.backgroundColor=i,!zot(i)&&y&&A.setClearColor(e.convertColor(i)))}});var Z=[];Object.defineProperty(this,"tabOrder",{get:function(){return Z},set:function(e){Z=e}}),this.remakeCanvas=function(e,o){"full"!=t&&(zot(e)&&(e=_),zot(o)&&(o=Y),zid(c)&&zid(c).parentNode.removeChild(zid(c)),_=e,Y=o,S(),k())};var H=new createjs.Event("keydown");this.eventRemove=H.remove,window.addEventListener("keydown",function(e){e.remove=E.eventRemove,9==e.keyCode&&(e.shiftKey?E.tab(-1):E.tab(1),f&&e.preventDefault()),E.altKey=e.altKey,E.ctrlKey=e.ctrlKey,E.metaKey=e.metaKey,E.shiftKey=e.shiftKey,E.dispatchEvent(e)}),window.addEventListener("keyup",function(e){e.remove=E.eventRemove,E.altKey=e.altKey,E.ctrlKey=e.ctrlKey,E.metaKey=e.metaKey,E.shiftKey=e.shiftKey,E.dispatchEvent(e)});var U;this.tab=function(t){clearTimeout(U),zot(t)&&(t=1);for(var o=0;o<Z.length;o++){var n=Z[o];if(n.focus){n.focus=!1,(n=Z[(o+t+100*Z.length)%Z.length]).focus=!0;var i=e.boundsToGlobal(n);v.alp(m).addTo(frame.stage),v.fit(i.x,i.y,i.width,i.height),v.scale(v.scaleX*p),U=setTimeout(function(){frame.stage.removeChild(v)},z);break}}},this.dispose=function(){return window.removeEventListener("resize",M),A.removeAllChildren(),A.removeAllEventListeners(),zid(c)&&zid(c).parentNode.removeChild(zid(c)),A=null,E=null,!0},this.orange="#f58e25",this.green="#acd241",this.pink="#e472c4",this.blue="#50c4b7",this.brown="#d1a170",this.yellow="#ebcb35",this.silver="#999999",this.tin="#777777",this.grey="#555555",this.gray="#555555",this.lighter="#eeeeee",this.light="#cccccc",this.dark="#333333",this.darker="#111111",this.purple="#993399",this.black="#000000",this.white="#FFFFFF",this.clear="rgba(0,0,0,0)",this.faint="rgba(0,0,0,.01)",this.makeCircles=function(t){zot(t)&&(t=100);var o=[E.orange,E.green,E.pink,E.blue,E.brown,E.dark],n=new e.Shape,i=n.graphics;n.radius=t;for(var a=0;a<o.length;a++)i.f(o[a]).dc(0,0,n.radius/o.length*(o.length-a));return n.setBounds(-n.radius,-n.radius,2*n.radius,2*n.radius),n}}else setTimeout(function(){E.dispatchEvent("failed")},100)},e.extend(e.Frame,createjs.EventDispatcher,"clone","cjsEventDispatcher",!1),e.Queue=function(){this.cjsEventDispatcher_constructor(),this.isLoading=!0},e.extend(e.Queue,createjs.EventDispatcher,null,"cjsEventDispatcher"),e.DISTILL=!1,e.distillery=[],e.distill=function(){!window.zns&&e&&e.DISTILL&&e.distillery.push("83.3","83.35"),zog("zim.distill() - go to http://zimjs.com/code/distill and enter the following:"),zog(e.distillery.length>0?e.distillery.join(" "):"must set zim.DISTILL = true;")},e}(zim||{}))||{});window.zns||zimplify();
