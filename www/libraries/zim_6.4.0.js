// ZIM js Interactive Media framework http://zimjs.com by Dan Zen http://danzen.com (c) 2017
// Also see http://zimjs.com/code/distill to minify only the functions in your app
// free to use - donations welcome of course! http://zimjs.com/donate

function zid(e){return z_d("1"),document.getElementById(e)}function zss(e){if(z_d("2"),document.getElementById(e))return document.getElementById(e).style;zon&&zog("zim wrap - zss(): id not found")}function zgo(e,t,o,n,i,r){if(z_d("3"),!(zot(t)&&""!=t||"_self"==t)){var a="";return o&&(a+="width="+o+","),n&&(a+="height="+n+","),i&&(a+="fullscreen=yes,"),r&&(a+="modal=yes,alwaysRaised=yes"),window.open(e,t,a)}window.location.href=e}function zum(e){if(z_d("4"),!zot(e))return Number(String(e).replace(/[^\d\.\-]/g,""))}function zot(e){return null==e}function zop(e){z_d("5"),zot(e)||(e.stopImmediatePropagation&&e.stopImmediatePropagation(),window.event&&(window.event.cancelBubble=!0))}function zil(){z_d("6");var e=function(e){e||(e=event),e.keyCode&&e.keyCode>=32&&e.keyCode<=40&&e.preventDefault()},t=function(e){e||(e=event),e.preventDefault()},o=t;return window.addEventListener("keydown",e),window.addEventListener("mousewheel",t),window.addEventListener("DOMMouseScroll",o),[e,t,o]}function zet(e){return z_d("6.1"),new function(){var t=this;this.on=function(o,n){if(!(zot(e)||zot(o)||zot(n)))for(var i=t.tags,r=0;r<i.length;r++)i[r].addEventListener(o,n)},this.off=function(o,n){if(!(zot(e)||zot(o)||zot(n)))for(var i=t.tags,r=0;r<i.length;r++)i[r].removeEventListener(o,n)},Object.defineProperty(t,"tags",{get:function(){return zot(e)?[]:"string"==typeof e||e instanceof String?document.querySelectorAll(e):"string"==typeof e.innerHTML?[e]:[]},set:function(e){}}),this.css=function(e,o){for(var n=t.tags,i=0;i<n.length;i++)if(1==arguments.length&&arguments[0].constructor==={}.constructor)for(var r in e)n[i].style[r]=e[r];else{if(1==arguments.length)return t.tags[0].style[e];n[i].style[e]=o}},this.prop=function(e,o){if(!zot(e)){for(var n=t.tags,i=[],r=0;r<n.length;r++)if(zot(o))if(e.constructor==={}.constructor)for(var a in e)n[r][a]=e[a];else i.push(n[r][e]);else n[r][e]=o;return zot(o)?i:void 0}}}}function isDUO(e){return 1==e.length&&e[0].constructor==={}.constructor}function zob(e,t,o,n){if(isDUO(t)){z_d("7");var i,r,a=t[0],s=zot(o)?e.toString().split(/\n/,1)[0].match(/\((.*)\)/)[1].replace(/\s+/g,"").split(","):o.replace(/\s+/g,"").split(","),l=[];for(i=0;i<s.length;i++)r=s[i].split("=")[0],s[i]=r,l.push(a[r]);for(i in a)s.indexOf(i)<0&&zon&&zog(e,"bad argument "+i);var d;return!(d=e.prototype.isPrototypeOf(n)?new(e.bind.apply(e,[null].concat(l))):e.apply(null,l))||d}}function zik(e){if(z_d("7.5"),!zot(e)){if(e.constructor==={}.constructor||Array.isArray(e)||"function"==typeof e){if(Array.isArray(e))return zik(t=e[Math.floor(Math.random()*e.length)]);if(e.constructor==={}.constructor){if(!zot(e.noZik))return e.noZik;if(zot(e.max))return e;zot(e.integer)&&(e.integer=!1);var t=zim.rand(e.min,e.max,e.integer,e.negative);return t}if("function"==typeof e)return zik(e())}return e}}function z_d(e){zim&&(zim.DISTILL||window.DISTILL)&&zim.distillery.push(e)}function zimify(e,t){z_d("83.3");var o={drag:function(e,t,o,n,i,r,a,s,l,d,c,u,h){return isDUO(arguments)?(arguments[0].obj=this,zim.drag(arguments[0])):zim.drag(this,e,t,o,n,i,r,a,s,l,d,c,u,h)},noDrag:function(){return zim.noDrag(this)},dragRect:function(e){return zim.dragRect(this,e)},transform:function(e,t,o,n,i,r,a,s,l,d,c,u,h,f,p,m,g,z,v,b,y,w){return isDUO(arguments)?(arguments[0].obj=this,zim.transform(arguments[0])):zim.transform(this,e,t,o,n,i,r,a,s,l,d,c,u,h,f,p,m,g,z,v,b,y,w)},setSwipe:function(e){return zim.setSwipe(this,e)},gesture:function(e,t,o,n,i,r,a,s,l){return isDUO(arguments)?(arguments[0].obj=this,zim.gesture(arguments[0])):zim.gesture(this,e,t,o,n,i,r,a,s,l)},noGesture:function(e,t,o){if(isDUO(arguments))return arguments[0].obj=this,zim.noGesture(arguments[0]);zim.noGesture(this,e,t,o)},gestureRect:function(e){return zim.gestureRect(this,e)},hitTestPoint:function(e,t){return zim.hitTestPoint(this,e,t)},hitTestReg:function(e){return zim.hitTestReg(this,e)},hitTestRect:function(e,t){return zim.hitTestRect(this,e,t)},hitTestCircle:function(e,t){return zim.hitTestCircle(this,e,t)},hitTestBounds:function(e,t){return zim.hitTestBounds(this,e,t)},boundsToGlobal:function(e,t){return zim.boundsToGlobal(this,e,t)},hitTestGrid:function(e,t,o,n,i,r,a,s,l,d,c,u){return zim.hitTestGrid(this,e,t,o,n,i,r,a,s,l,d,c,u)},move:function(e,t,o,n,i,r,a,s,l,d,c,u,h,f,p,m,g,z,v,b,y,w,x,T,C,k,M,j,E,S,A){return isDUO(arguments)?(arguments[0].target=this,zim.move(arguments[0])):zim.move(this,e,t,o,n,i,r,a,s,l,d,c,u,h,f,p,m,g,z,v,b,y,w,x,T,C,k,M,j,E,S,A)},animate:function(e,t,o,n,i,r,a,s,l,d,c,u,h,f,p,m,g,z,v,b,y,w,x,T,C,k,M,j,E,S,A){return isDUO(arguments)?(arguments[0].target=this,zim.animate(arguments[0])):zim.animate(this,e,t,o,n,i,r,a,s,l,d,c,u,h,f,p,m,g,z,v,b,y,w,x,T,C,k,M,j,E,S,A)},pauseAnimate:function(){},stopAnimate:function(){},wiggle:function(e,t,o,n,i,r,a,s,l,d,c){return isDUO(arguments)?(arguments[0].target=this,zim.wiggle(arguments[0])):zim.wiggle(this,e,t,o,n,i,r,a,s,l,d,c)},loop:function(e,t,o,n,i){return zim.loop(this,e,t,o,n,i)},copyMatrix:function(e){return zim.copyMatrix(this,e)},pos:function(e,t){return zim.pos(this,e,t)},mov:function(e,t){return zim.mov(this,e,t)},alp:function(e){return zim.alp(this,e)},rot:function(e){return zim.rot(this,e)},siz:function(e,t,o){return zim.siz(this,e,t,o)},ske:function(e,t){return zim.ske(this,e,t)},reg:function(e,t){return zim.reg(this,e,t)},sca:function(e,t){return zim.sca(this,e,t)},scaleTo:function(e,t,o,n,i){return isDUO(arguments)?(arguments[0].obj=this,zim.scaleTo(arguments[0])):zim.scaleTo(this,e,t,o,n,i)},fit:function(e,t,o,n,i){return isDUO(arguments)?(arguments[0].obj=this,zim.fit(arguments[0])):zim.fit(this,e,t,o,n,i)},outline:function(e,t){return isDUO(arguments)?(arguments[0].obj=this,zim.outline(arguments[0])):zim.outline(this,e,t)},addTo:function(e,t){return zim.addTo(this,e,t)},removeFrom:function(e){return zim.removeFrom(this,e)},added:function(e,t,o){return zim.added(this,e,t,o)},centerReg:function(e,t,o){return isDUO(arguments)?(arguments[0].obj=this,zim.centerReg(arguments[0])):zim.centerReg(this,e,t,o)},center:function(e,t,o){return isDUO(arguments)?(arguments[0].obj=this,zim.center(arguments[0])):zim.center(this,e,t,o)},place:function(e){return zim.place(this,e)},placeReg:function(e){return zim.placeReg(this,e)},expand:function(e,t){return zim.expand(this,e,t)},setMask:function(e){return zim.setMask(this,e)},cloneProps:function(e){return e.alpha=this.alpha,e.rotation=this.rotation,e.mouseEnabled=this.mouseEnabled,e.tickEnabled=this.tickEnabled,e.name=this.name,e.regX=this.regX,e.regY=this.regY,e.visible=this.visible,e.shadow=this.shadow,zim.copyMatrix(e,this),e.compositeOperation=this.compositeOperation,e.snapToPixel=this.snapToPixel,e.filters=null==this.filters?null:this.filters.slice(0),e.mask=this.mask,e.hitArea=this.hitArea,e.cursor=this.cursor,e._bounds=this._bounds,e},cloneChildren:function(e){e.children.length&&e.removeAllChildren();for(var t=e.children,o=0,n=this.children.length;o<n;o++){var i=this.children[o].clone();i.parent=e,t.push(i)}return e}};if(!zot(t)){var t=[];for(var n in o)t.push(n);return t}for(var i in o)o.hasOwnProperty(i)&&(e[i]=o[i]);return Object.defineProperty(e,"width",{enumerable:!0,get:function(){var e=this.getBounds();return zot(e)?null:e.width*this.scaleX},set:function(e){var t=this.getBounds();if(zot(t)||0==t.width)zog("width needs bounds set with setBounds()");else{var o=e/t.width;this.scaleX=this.scaleY=o}}}),Object.defineProperty(e,"height",{enumerable:!0,get:function(){var e=this.getBounds();return zot(e)?null:e.height*this.scaleY},set:function(e){var t=this.getBounds();if(zot(t)||0==t.height)zog("height needs bounds set with setBounds()");else{var o=e/t.height;this.scaleX=this.scaleY=o}}}),Object.defineProperty(e,"widthOnly",{enumerable:!0,get:function(){var e=this.getBounds();return zot(e)?null:e.width*this.scaleX},set:function(e){var t=this.getBounds();if(zot(t)||0==t.width)zog("widthOnly needs bounds set with setBounds()");else{var o=e/t.width;this.scaleX=o}}}),Object.defineProperty(e,"heightOnly",{enumerable:!0,get:function(){var e=this.getBounds();return zot(e)?null:e.height*this.scaleY},set:function(e){var t=this.getBounds();if(zot(t)||0==t.height)zog("heightOnly needs bounds set with setBounds()");else{var o=e/t.height;this.scaleY=o}}}),Object.defineProperty(e,"blendMode",{enumerable:!0,get:function(){return this.compositeOperation},set:function(e){this.compositeOperation=e}}),e}function zimplify(e){z_d("83.35"),zot(e)&&(e=[]),Array.isArray(e)||(e=[e]);var t=zimify(null,!0),o=["loop","stopAnimate","pauseAnimate","animate","wiggle"];for(var n in zim)(-1==t.indexOf(n)||o.indexOf(n)>=0)&&-1==e.indexOf(n)&&(window[n]=zim[n])}"undefined"==typeof zon&&(zon=!1),"undefined"==typeof zns&&(zns=!1);var zog=console.log.bind(console),zim=function(e){return e.Wonder=function(t,o,n,i,r){function a(){u.length>0&&(e.async(r+"?wonder="+JSON.stringify(u)),u=[],f++)}function s(e,t){return zot(e)?(zog("zim.Wonder "+t+" - please provide a keyword"),!1):!d[t+"sOff"][e]}var l;if(l=zob(e.Wonder,arguments,"wid, client, app, notes, server",this))return l;if(z_d("82"),zot(t))zog("zim.Wonder() - please provide Wonder ID (see http://zimjs.com/code/wonder/)");else{zot(r)&&(r="http://54.237.229.197:3001/wonder");var d=this;zot(e.wonderSession)&&(e.wonderSession="W"+e.rand(1e5,999999));var c,u=[],h=setInterval(a,1e3),f=0,p=setInterval(function(){f>28&&(u.push({id:t,c:o,a:n,n:i,k:c,t:"e",v:"frequency max - terminated",s:e.wonderSession}),zog("zim.Wonder() - frequency max - terminated"),d.dispose()),f=0},3e4);this.countsOff={},this.timesOff={},this.ordersOff={},this.count=function(r){s(r,"count")&&(c=r,u.push({id:t,c:o,a:n,n:i,k:r,t:"c",v:1,s:e.wonderSession}))};var m={};this.timeStart=function(e){s(e,"time")&&(d.timeEnd(e),c=e,m[e]=(new Date).getTime())};var g={};this.timePause=function(e){s(e,"time")&&(g[e]||(g[e]=(new Date).getTime()))},this.timeUnpause=function(e){if(s(e,"time")&&g[e]){var t=(new Date).getTime()-g[e];m[e]&&(m[e]+=t),delete g[e]}},this.timeEnd=function(r){if(s(r,"time")&&m[r]){var a=g[r]?g[r]:(new Date).getTime(),l=Math.round((a-m[r])/1e3);delete g[r],delete m[r],u.push({id:t,c:o,a:n,n:i,k:r,t:"t",v:l,s:e.wonderSession})}},this.order=function(r,a){s(r,"order")&&(c=r,zot(a)?zog("zim.Wonder order() - please provide an item"):u.push({id:t,c:o,a:n,n:i,k:r,t:"o",v:a,s:e.wonderSession}))},this.countOff=function(e){d.countsOff[e]=1},this.countOn=function(e){delete d.countOff[e]},this.timeOff=function(e){d.timesOff[e]=1},this.timeOn=function(e){delete d.timesOff[e]},this.orderOff=function(e){d.ordersOff[e]=1},this.orderOn=function(e){delete d.ordersOff[e]},this.dispose=function(){a(),clearInterval(h),clearInterval(p)}}},e}((zim=function(e){function t(e,t){t?(e.mouseChildren=!0,e.mouseEnabled=!0,e._enabled=!0):(e.mouseChildren=!1,e.mouseEnabled=!1,e._enabled=!1)}if(e.shuffle=function(e){if(z_d("8"),!zot(e)){var t,o,n=e.length;if(0==n)return e;for(;--n;)t=Math.floor(Math.random()*(n+1)),o=e[n],e[n]=e[t],e[t]=o;return e}},e.rand=function(e,t,o,n){if(z_d("9"),zot(e)&&zot(t))return Math.random();(zot(e)||isNaN(e))&&(e=0),(zot(t)||isNaN(t))&&(t=0),e%1==0&&t%1==0||(o=!1),zot(o)&&(o=!0),n&&Math.random()>.5&&(e*=-1,t*=-1),o&&(e>t?e++:t>e&&t++);var i;return 0==e&&0==t?0:(i=0==t?Math.random()*e:Math.min(e,t)+Math.random()*(Math.max(e,t)-Math.min(e,t)),o?Math.floor(i):i)},e.loop=function(t,o,n,i,r,a){function s(e){return zot(r)&&(r=n?e:0),zot(a)&&(a=n?0:e),n&&a>r||!n&&r>a?0:(r<0&&a)<0||r>e&&a>e?0:(r=Math.max(0,Math.min(r,e)),a=Math.max(0,Math.min(a,e)),Math.floor((n?r-a:a-r)/i)+1)}var l;if(l=zob(e.loop,arguments,"obj, call, reverse, step, start, end"))return l;if(z_d("9.5"),!zot(t)&&!zot(o)){zot(n)&&(n=!1),(zot(i)||i<=0)&&(i=1);var d="number"==typeof t?"number":t.constructor===Array?"array":t.constructor==={}.constructor?"object":"invalid";if("invalid"!=d)if("number"==d||"array"==d){if(0==(p=s((u="number"==d?t:t.length)-1)))return;if(n)for(f=r;f>=a;f-=i){if("number"==d)c=o(f,p,r,a,t);else c=o(t[f],f,p,r,a,t);if(void 0!==c)return c}else for(f=r;f<=a;f+=i){if("number"==d)c=o(f,p,r,a,t);else var c=o(t[f],f,p,r,a,t);if(void 0!==c)return c}}else if("object"==d){var u=0,h=[];for(var f in t)u++,h.push(f);var p=s(u-1);if(0==p)return;if(n){for(f=r;f>=a;f-=i)if(void 0!==(c=o(h[f],t[h[f]],f,p,r,a,t)))return c}else for(f=r;f<=a;f+=i)if(void 0!==(c=o(h[f],t[h[f]],f,p,r,a,t)))return c}}},e.timeout=function(e,t){function o(){var r=Date.now();if(n.time+=r-i,i=r,n.time>=e)return t(n),void n.clear();n.rid=requestAnimationFrame(o)}if(z_d("9.7"),!zot(t)&&"function"==typeof t){zot(e)&&(e=1e3),e=zik(e);var n={startTime:Date.now(),time:0,paused:!1},i=n.startTime;return n.pause=function(e){zot(e)&&(e=!0),e?cancelAnimationFrame(n.rid):(i=Date.now(),o()),n.paused=e},n.clear=function(){n&&cancelAnimationFrame(n.rid);for(var e in n)delete n[e];n.pause=function(){},n.clear=function(){}},o(),n}},e.interval=function(e,t,o,n){function i(){a.startTime=Date.now(),a.interval=zik(a.time),a.id=setTimeout(function(){a.paused||a.active&&(a.rid=requestAnimationFrame(i),a.count++,t(a),r())},a.interval)}function r(){-1!=o&&a.count>=(n?a.total-1:a.total)&&a.clear()}if(z_d("9.8"),!zot(t)&&"function"==typeof t&&(zot(e)&&(e=1e3),zot(n)&&(n=!1),zot(o)||!(isNaN(o)||o<=0))){zot(o)&&(o=-1);var a={count:0,total:o,paused:!1,time:e,active:!0};n&&setTimeout(function(){t(a),r()},10);var s;return a.pause=function(e,o){zot(e)&&(e=!0),e?(clearTimeout(s),clearTimeout(a.id),cancelAnimationFrame(a.rid),a.pauseTimeLeft=a.interval-(Date.now()-a.startTime)):(s=setTimeout(function(){a.count++,t(a),i(),r()},o?0:a.pauseTimeLeft),a.pauseTimeLeft=null),a.paused=e},a.clear=function(){a.active=!1,clearTimeout(s),cancelAnimationFrame(a.rid),clearTimeout(a.id);var e=a.count;for(var t in a)delete a[t];a.active=!1,a.count=e,a.pause=function(){},a.clear=function(){}},i(),a}},e.copy=function(t,o){if(z_d("10"),zot(o)&&(o=!1),null==t||!(t instanceof Array||t.constructor=={}.constructor))return o&&t.clone?t.clone():t;if(t instanceof Array){for(var n=[],i=0;i<t.length;i++)n[i]=e.copy(t[i],o);return n}if(t.constructor=={}.constructor){var r={};for(var a in t){var s=e.copy(t[a],o);t.hasOwnProperty(a)&&(r[a]=s)}return r}},e.arraysEqual=function(t,o,n){if(z_d("11"),zot(t)||zot(o))return!1;if(zot(n)&&(n=!0),t.length!=o.length)return!1;for(var i=0;i<t.length;i++)if(t[i]instanceof Array&&o[i]instanceof Array){if(!e.arraysEqual(t[i],o[i],n))return!1}else{if(n&&t[i]!=o[i])return!1;if(!n)return e.arraysEqual(t.sort(),o.sort(),!0)}return!0},e.isEmpty=function(e){if(z_d("11.5"),!zot(e)){var t=0;for(var o in e){t++;break}return 0==t}},e.merge=function(){z_d("12");var e,t,o={};for(e=0;e<arguments.length;e++)for(t in arguments[e])arguments[e].hasOwnProperty(t)&&(o[t]=arguments[e][t]);return o},e.zut=function(e){if(zot(e)||"object"==typeof e)return!0},e.decimals=function(t,o,n,i,r,a,s){if(z_d("13"),zot(t))return 0;zot(o)&&(o=1),zot(n)&&(n=0),zot(i)&&(i=0),zot(i)&&(i=0),zot(r)&&(r=!0),zot(a)&&(a=!1);var l=Math.round(t*Math.pow(10,o))/Math.pow(10,o),d=e.sign(l);if(n>0){var c=String(l).indexOf("."),u=String(l).length;c<0&&(c=u++,l+=".");for(f=0;f<n-(u-c-1);f++)l+="0"}if(i>0){-1==d&&(l=l.substr(1,l.length-1));for(var c=String(l).indexOf("."),u=String(l).length,h=c<0?u:c,f=0;f<i-h;f++)l="0"+l;-1==d&&(l="-"+l)}return n+i>0&&!r&&0==Number(l)&&(l=0),a&&(l=String(l).replace(".",":")),e.zut(s)?l:null},e.sign=function(e){return z_d("13.1"),e?e<0?-1:1:0},e.constrain=function(e,t,o,n){if(z_d("13.2"),!zot(e))return zot(t)&&(t=0),zot(o)&&(o=Number.MAX_VALUE),o<t&&(max2=t,o=t,t=max2),zot(n)&&(n=!1),n&&e<0?Math.max(-o,Math.min(e,-t)):Math.max(t,Math.min(e,o))},e.dist=function(e,t,o,n){if(z_d("13.3"),!zot(e)&&!zot(t))return zot(o)&&(o=0),zot(n)&&(n=0),Math.sqrt(Math.pow(o-e,2)+Math.pow(n-t,2))},e.angle=function(e,t,o,n){if(z_d("13.4"),!zot(e)&&!zot(t))return zot(o)&&(o=e,e=0),zot(n)&&(n=t,t=0),(180*Math.atan2(n-t,o-e)/Math.PI+360)%360},e.makeID=function(e,t,o){z_d("13.5"),zot(e)&&(e="mixed"),zot(t)&&(t=5),zot(o)&&(o="uppercase");var n,i=[2,3,4,5,6,7,8,9],r="abcdefghjkmnpqrstuvwxyz".split("");n=e.constructor===Array?e:"numbers"==e?i:"letters"==e?r:i.concat(r);for(var a,s,l="",d=0;d<t;d++)a=n[Math.floor(Math.random()*t)],s=Math.random(),"uppercase"==o||"mixed"==o&&s>.5?a.toUpperCase&&(a=a.toUpperCase()):a.toLowerCase&&(a=a.toLowerCase()),l+=String(a);return l},e.smoothStep=function(t,o,n){z_d("13.7");var i=e.constrain((n-t)/(o-t),0,1);return i*i*i*(i*(6*i-15)+10)},e.Noise=function(e){"use strict";function t(e){var t=new Uint32Array(1);return t[0]=1664525*e[0]+1013904223,t}function o(e,t,o){this.dx=-t-e*s.SQUISH_2D,this.dy=-o-e*s.SQUISH_2D,this.xsb=t,this.ysb=o}function n(e,t,o,n){this.dx=-t-e*s.SQUISH_3D,this.dy=-o-e*s.SQUISH_3D,this.dz=-n-e*s.SQUISH_3D,this.xsb=t,this.ysb=o,this.zsb=n}function i(e,t,o,n,i){this.dx=-t-e*s.SQUISH_4D,this.dy=-o-e*s.SQUISH_4D,this.dz=-n-e*s.SQUISH_4D,this.dw=-i-e*s.SQUISH_4D,this.xsb=t,this.ysb=o,this.zsb=n,this.wsb=i}z_d("13.9"),zot(e)&&(e=1e6*Math.random());var r=e;this.seed=e;var a=this,s={};s.NORM_2D=1/47,s.NORM_3D=1/103,s.NORM_4D=1/30,s.SQUISH_2D=(Math.sqrt(3)-1)/2,s.SQUISH_3D=(Math.sqrt(4)-1)/3,s.SQUISH_4D=(Math.sqrt(5)-1)/4,s.STRETCH_2D=(1/Math.sqrt(3)-1)/2,s.STRETCH_3D=(1/Math.sqrt(4)-1)/3,s.STRETCH_4D=(1/Math.sqrt(5)-1)/4,s.base2D=[[1,1,0,1,0,1,0,0,0],[1,1,0,1,0,1,2,1,1]],s.base3D=[[0,0,0,0,1,1,0,0,1,0,1,0,1,0,0,1],[2,1,1,0,2,1,0,1,2,0,1,1,3,1,1,1],[1,1,0,0,1,0,1,0,1,0,0,1,2,1,1,0,2,1,0,1,2,0,1,1]],s.base4D=[[0,0,0,0,0,1,1,0,0,0,1,0,1,0,0,1,0,0,1,0,1,0,0,0,1],[3,1,1,1,0,3,1,1,0,1,3,1,0,1,1,3,0,1,1,1,4,1,1,1,1],[1,1,0,0,0,1,0,1,0,0,1,0,0,1,0,1,0,0,0,1,2,1,1,0,0,2,1,0,1,0,2,1,0,0,1,2,0,1,1,0,2,0,1,0,1,2,0,0,1,1],[3,1,1,1,0,3,1,1,0,1,3,1,0,1,1,3,0,1,1,1,2,1,1,0,0,2,1,0,1,0,2,1,0,0,1,2,0,1,1,0,2,0,1,0,1,2,0,0,1,1]],s.gradients2D=[5,2,2,5,-5,2,-2,5,5,-2,2,-5,-5,-2,-2,-5],s.gradients3D=[-11,4,4,-4,11,4,-4,4,11,11,4,4,4,11,4,4,4,11,-11,-4,4,-4,-11,4,-4,-4,11,11,-4,4,4,-11,4,4,-4,11,-11,4,-4,-4,11,-4,-4,4,-11,11,4,-4,4,11,-4,4,4,-11,-11,-4,-4,-4,-11,-4,-4,-4,-11,11,-4,-4,4,-11,-4,4,-4,-11],s.gradients4D=[3,1,1,1,1,3,1,1,1,1,3,1,1,1,1,3,-3,1,1,1,-1,3,1,1,-1,1,3,1,-1,1,1,3,3,-1,1,1,1,-3,1,1,1,-1,3,1,1,-1,1,3,-3,-1,1,1,-1,-3,1,1,-1,-1,3,1,-1,-1,1,3,3,1,-1,1,1,3,-1,1,1,1,-3,1,1,1,-1,3,-3,1,-1,1,-1,3,-1,1,-1,1,-3,1,-1,1,-1,3,3,-1,-1,1,1,-3,-1,1,1,-1,-3,1,1,-1,-1,3,-3,-1,-1,1,-1,-3,-1,1,-1,-1,-3,1,-1,-1,-1,3,3,1,1,-1,1,3,1,-1,1,1,3,-1,1,1,1,-3,-3,1,1,-1,-1,3,1,-1,-1,1,3,-1,-1,1,1,-3,3,-1,1,-1,1,-3,1,-1,1,-1,3,-1,1,-1,1,-3,-3,-1,1,-1,-1,-3,1,-1,-1,-1,3,-1,-1,-1,1,-3,3,1,-1,-1,1,3,-1,-1,1,1,-3,-1,1,1,-1,-3,-3,1,-1,-1,-1,3,-1,-1,-1,1,-3,-1,-1,1,-1,-3,3,-1,-1,-1,1,-3,-1,-1,1,-1,-3,-1,1,-1,-1,-3,-3,-1,-1,-1,-1,-3,-1,-1,-1,-1,-3,-1,-1,-1,-1,-3],s.lookupPairs2D=[0,1,1,0,4,1,17,0,20,2,21,2,22,5,23,5,26,4,39,3,42,4,43,3],s.lookupPairs3D=[0,2,1,1,2,2,5,1,6,0,7,0,32,2,34,2,129,1,133,1,160,5,161,5,518,0,519,0,546,4,550,4,645,3,647,3,672,5,673,5,674,4,677,3,678,4,679,3,680,13,681,13,682,12,685,14,686,12,687,14,712,20,714,18,809,21,813,23,840,20,841,21,1198,19,1199,22,1226,18,1230,19,1325,23,1327,22,1352,15,1353,17,1354,15,1357,17,1358,16,1359,16,1360,11,1361,10,1362,11,1365,10,1366,9,1367,9,1392,11,1394,11,1489,10,1493,10,1520,8,1521,8,1878,9,1879,9,1906,7,1910,7,2005,6,2007,6,2032,8,2033,8,2034,7,2037,6,2038,7,2039,6],s.lookupPairs4D=[0,3,1,2,2,3,5,2,6,1,7,1,8,3,9,2,10,3,13,2,16,3,18,3,22,1,23,1,24,3,26,3,33,2,37,2,38,1,39,1,41,2,45,2,54,1,55,1,56,0,57,0,58,0,59,0,60,0,61,0,62,0,63,0,256,3,258,3,264,3,266,3,272,3,274,3,280,3,282,3,2049,2,2053,2,2057,2,2061,2,2081,2,2085,2,2089,2,2093,2,2304,9,2305,9,2312,9,2313,9,16390,1,16391,1,16406,1,16407,1,16422,1,16423,1,16438,1,16439,1,16642,8,16646,8,16658,8,16662,8,18437,6,18439,6,18469,6,18471,6,18688,9,18689,9,18690,8,18693,6,18694,8,18695,6,18696,9,18697,9,18706,8,18710,8,18725,6,18727,6,131128,0,131129,0,131130,0,131131,0,131132,0,131133,0,131134,0,131135,0,131352,7,131354,7,131384,7,131386,7,133161,5,133165,5,133177,5,133181,5,133376,9,133377,9,133384,9,133385,9,133400,7,133402,7,133417,5,133421,5,133432,7,133433,5,133434,7,133437,5,147510,4,147511,4,147518,4,147519,4,147714,8,147718,8,147730,8,147734,8,147736,7,147738,7,147766,4,147767,4,147768,7,147770,7,147774,4,147775,4,149509,6,149511,6,149541,6,149543,6,149545,5,149549,5,149558,4,149559,4,149561,5,149565,5,149566,4,149567,4,149760,9,149761,9,149762,8,149765,6,149766,8,149767,6,149768,9,149769,9,149778,8,149782,8,149784,7,149786,7,149797,6,149799,6,149801,5,149805,5,149814,4,149815,4,149816,7,149817,5,149818,7,149821,5,149822,4,149823,4,149824,37,149825,37,149826,36,149829,34,149830,36,149831,34,149832,37,149833,37,149842,36,149846,36,149848,35,149850,35,149861,34,149863,34,149865,33,149869,33,149878,32,149879,32,149880,35,149881,33,149882,35,149885,33,149886,32,149887,32,150080,49,150082,48,150088,49,150098,48,150104,47,150106,47,151873,46,151877,45,151881,46,151909,45,151913,44,151917,44,152128,49,152129,46,152136,49,152137,46,166214,43,166215,42,166230,43,166247,42,166262,41,166263,41,166466,48,166470,43,166482,48,166486,43,168261,45,168263,42,168293,45,168295,42,168512,31,168513,28,168514,31,168517,28,168518,25,168519,25,280952,40,280953,39,280954,40,280957,39,280958,38,280959,38,281176,47,281178,47,281208,40,281210,40,282985,44,282989,44,283001,39,283005,39,283208,30,283209,27,283224,30,283241,27,283256,22,283257,22,297334,41,297335,41,297342,38,297343,38,297554,29,297558,24,297562,29,297590,24,297594,21,297598,21,299365,26,299367,23,299373,26,299383,23,299389,20,299391,20,299584,31,299585,28,299586,31,299589,28,299590,25,299591,25,299592,30,299593,27,299602,29,299606,24,299608,30,299610,29,299621,26,299623,23,299625,27,299629,26,299638,24,299639,23,299640,22,299641,22,299642,21,299645,20,299646,21,299647,20,299648,61,299649,60,299650,61,299653,60,299654,59,299655,59,299656,58,299657,57,299666,55,299670,54,299672,58,299674,55,299685,52,299687,51,299689,57,299693,52,299702,54,299703,51,299704,56,299705,56,299706,53,299709,50,299710,53,299711,50,299904,61,299906,61,299912,58,299922,55,299928,58,299930,55,301697,60,301701,60,301705,57,301733,52,301737,57,301741,52,301952,79,301953,79,301960,76,301961,76,316038,59,316039,59,316054,54,316071,51,316086,54,316087,51,316290,78,316294,78,316306,73,316310,73,318085,77,318087,77,318117,70,318119,70,318336,79,318337,79,318338,78,318341,77,318342,78,318343,77,430776,56,430777,56,430778,53,430781,50,430782,53,430783,50,431e3,75,431002,72,431032,75,431034,72,432809,74,432813,69,432825,74,432829,69,433032,76,433033,76,433048,75,433065,74,433080,75,433081,74,447158,71,447159,68,447166,71,447167,68,447378,73,447382,73,447386,72,447414,71,447418,72,447422,71,449189,70,449191,70,449197,69,449207,68,449213,69,449215,68,449408,67,449409,67,449410,66,449413,64,449414,66,449415,64,449416,67,449417,67,449426,66,449430,66,449432,65,449434,65,449445,64,449447,64,449449,63,449453,63,449462,62,449463,62,449464,65,449465,63,449466,65,449469,63,449470,62,449471,62,449472,19,449473,19,449474,18,449477,16,449478,18,449479,16,449480,19,449481,19,449490,18,449494,18,449496,17,449498,17,449509,16,449511,16,449513,15,449517,15,449526,14,449527,14,449528,17,449529,15,449530,17,449533,15,449534,14,449535,14,449728,19,449729,19,449730,18,449734,18,449736,19,449737,19,449746,18,449750,18,449752,17,449754,17,449784,17,449786,17,451520,19,451521,19,451525,16,451527,16,451528,19,451529,19,451557,16,451559,16,451561,15,451565,15,451577,15,451581,15,451776,19,451777,19,451784,19,451785,19,465858,18,465861,16,465862,18,465863,16,465874,18,465878,18,465893,16,465895,16,465910,14,465911,14,465918,14,465919,14,466114,18,466118,18,466130,18,466134,18,467909,16,467911,16,467941,16,467943,16,468160,13,468161,13,468162,13,468163,13,468164,13,468165,13,468166,13,468167,13,580568,17,580570,17,580585,15,580589,15,580598,14,580599,14,580600,17,580601,15,580602,17,580605,15,580606,14,580607,14,580824,17,580826,17,580856,17,580858,17,582633,15,582637,15,582649,15,582653,15,582856,12,582857,12,582872,12,582873,12,582888,12,582889,12,582904,12,582905,12,596982,14,596983,14,596990,14,596991,14,597202,11,597206,11,597210,11,597214,11,597234,11,597238,11,597242,11,597246,11,599013,10,599015,10,599021,10,599023,10,599029,10,599031,10,599037,10,599039,10,599232,13,599233,13,599234,13,599235,13,599236,13,599237,13,599238,13,599239,13,599240,12,599241,12,599250,11,599254,11,599256,12,599257,12,599258,11,599262,11,599269,10,599271,10,599272,12,599273,12,599277,10,599279,10,599282,11,599285,10,599286,11,599287,10,599288,12,599289,12,599290,11,599293,10,599294,11,599295,10],s.p2D=[0,0,1,-1,0,0,-1,1,0,2,1,1,1,2,2,0,1,2,0,2,1,0,0,0],s.p3D=[0,0,1,-1,0,0,1,0,-1,0,0,-1,1,0,0,0,1,-1,0,0,-1,0,1,0,0,-1,1,0,2,1,1,0,1,1,1,-1,0,2,1,0,1,1,1,-1,1,0,2,0,1,1,1,-1,1,1,1,3,2,1,0,3,1,2,0,1,3,2,0,1,3,1,0,2,1,3,0,2,1,3,0,1,2,1,1,1,0,0,2,2,0,0,1,1,0,1,0,2,0,2,0,1,1,0,0,1,2,0,0,2,2,0,0,0,0,1,1,-1,1,2,0,0,0,0,1,-1,1,1,2,0,0,0,0,1,1,1,-1,2,3,1,1,1,2,0,0,2,2,3,1,1,1,2,2,0,0,2,3,1,1,1,2,0,2,0,2,1,1,-1,1,2,0,0,2,2,1,1,-1,1,2,2,0,0,2,1,-1,1,1,2,0,0,2,2,1,-1,1,1,2,0,2,0,2,1,1,1,-1,2,2,0,0,2,1,1,1,-1,2,0,2,0],s.p4D=[0,0,1,-1,0,0,0,1,0,-1,0,0,1,0,0,-1,0,0,-1,1,0,0,0,0,1,-1,0,0,0,1,0,-1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,-1,0,0,-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,2,1,1,0,0,1,1,1,-1,0,1,1,1,0,-1,0,2,1,0,1,0,1,1,-1,1,0,1,1,0,1,-1,0,2,0,1,1,0,1,-1,1,1,0,1,0,1,1,-1,0,2,1,0,0,1,1,1,-1,0,1,1,1,0,-1,1,0,2,0,1,0,1,1,-1,1,0,1,1,0,1,-1,1,0,2,0,0,1,1,1,-1,0,1,1,1,0,-1,1,1,1,4,2,1,1,0,4,1,2,1,0,4,1,1,2,0,1,4,2,1,0,1,4,1,2,0,1,4,1,1,0,2,1,4,2,0,1,1,4,1,0,2,1,4,1,0,1,2,1,4,0,2,1,1,4,0,1,2,1,4,0,1,1,2,1,2,1,1,0,0,3,2,1,0,0,3,1,2,0,0,1,2,1,0,1,0,3,2,0,1,0,3,1,0,2,0,1,2,0,1,1,0,3,0,2,1,0,3,0,1,2,0,1,2,1,0,0,1,3,2,0,0,1,3,1,0,0,2,1,2,0,1,0,1,3,0,2,0,1,3,0,1,0,2,1,2,0,0,1,1,3,0,0,2,1,3,0,0,1,2,2,3,1,1,1,0,2,1,1,1,-1,2,2,0,0,0,2,3,1,1,0,1,2,1,1,-1,1,2,2,0,0,0,2,3,1,0,1,1,2,1,-1,1,1,2,2,0,0,0,2,3,1,1,1,0,2,1,1,1,-1,2,0,2,0,0,2,3,1,1,0,1,2,1,1,-1,1,2,0,2,0,0,2,3,0,1,1,1,2,-1,1,1,1,2,0,2,0,0,2,3,1,1,1,0,2,1,1,1,-1,2,0,0,2,0,2,3,1,0,1,1,2,1,-1,1,1,2,0,0,2,0,2,3,0,1,1,1,2,-1,1,1,1,2,0,0,2,0,2,3,1,1,0,1,2,1,1,-1,1,2,0,0,0,2,2,3,1,0,1,1,2,1,-1,1,1,2,0,0,0,2,2,3,0,1,1,1,2,-1,1,1,1,2,0,0,0,2,2,1,1,1,-1,0,1,1,1,0,-1,0,0,0,0,0,2,1,1,-1,1,0,1,1,0,1,-1,0,0,0,0,0,2,1,-1,1,1,0,1,0,1,1,-1,0,0,0,0,0,2,1,1,-1,0,1,1,1,0,-1,1,0,0,0,0,0,2,1,-1,1,0,1,1,0,1,-1,1,0,0,0,0,0,2,1,-1,0,1,1,1,0,-1,1,1,0,0,0,0,0,2,1,1,1,-1,0,1,1,1,0,-1,2,2,0,0,0,2,1,1,-1,1,0,1,1,0,1,-1,2,2,0,0,0,2,1,1,-1,0,1,1,1,0,-1,1,2,2,0,0,0,2,1,1,1,-1,0,1,1,1,0,-1,2,0,2,0,0,2,1,-1,1,1,0,1,0,1,1,-1,2,0,2,0,0,2,1,-1,1,0,1,1,0,1,-1,1,2,0,2,0,0,2,1,1,-1,1,0,1,1,0,1,-1,2,0,0,2,0,2,1,-1,1,1,0,1,0,1,1,-1,2,0,0,2,0,2,1,-1,0,1,1,1,0,-1,1,1,2,0,0,2,0,2,1,1,-1,0,1,1,1,0,-1,1,2,0,0,0,2,2,1,-1,1,0,1,1,0,1,-1,1,2,0,0,0,2,2,1,-1,0,1,1,1,0,-1,1,1,2,0,0,0,2,3,1,1,0,0,0,2,2,0,0,0,2,1,1,1,-1,3,1,0,1,0,0,2,0,2,0,0,2,1,1,1,-1,3,1,0,0,1,0,2,0,0,2,0,2,1,1,1,-1,3,1,1,0,0,0,2,2,0,0,0,2,1,1,-1,1,3,1,0,1,0,0,2,0,2,0,0,2,1,1,-1,1,3,1,0,0,0,1,2,0,0,0,2,2,1,1,-1,1,3,1,1,0,0,0,2,2,0,0,0,2,1,-1,1,1,3,1,0,0,1,0,2,0,0,2,0,2,1,-1,1,1,3,1,0,0,0,1,2,0,0,0,2,2,1,-1,1,1,3,1,0,1,0,0,2,0,2,0,0,2,-1,1,1,1,3,1,0,0,1,0,2,0,0,2,0,2,-1,1,1,1,3,1,0,0,0,1,2,0,0,0,2,2,-1,1,1,1,3,3,2,1,0,0,3,1,2,0,0,4,1,1,1,1,3,3,2,0,1,0,3,1,0,2,0,4,1,1,1,1,3,3,0,2,1,0,3,0,1,2,0,4,1,1,1,1,3,3,2,0,0,1,3,1,0,0,2,4,1,1,1,1,3,3,0,2,0,1,3,0,1,0,2,4,1,1,1,1,3,3,0,0,2,1,3,0,0,1,2,4,1,1,1,1,3,3,2,1,0,0,3,1,2,0,0,2,1,1,1,-1,3,3,2,0,1,0,3,1,0,2,0,2,1,1,1,-1,3,3,0,2,1,0,3,0,1,2,0,2,1,1,1,-1,3,3,2,1,0,0,3,1,2,0,0,2,1,1,-1,1,3,3,2,0,0,1,3,1,0,0,2,2,1,1,-1,1,3,3,0,2,0,1,3,0,1,0,2,2,1,1,-1,1,3,3,2,0,1,0,3,1,0,2,0,2,1,-1,1,1,3,3,2,0,0,1,3,1,0,0,2,2,1,-1,1,1,3,3,0,0,2,1,3,0,0,1,2,2,1,-1,1,1,3,3,0,2,1,0,3,0,1,2,0,2,-1,1,1,1,3,3,0,2,0,1,3,0,1,0,2,2,-1,1,1,1,3,3,0,0,2,1,3,0,0,1,2,2,-1,1,1,1];for(var l=[],d=0;d<s.p2D.length;d+=4){for(var c=s.base2D[s.p2D[d]],u=null,h=null,f=0;f<c.length;f+=3)h=new o(c[f],c[f+1],c[f+2]),null===u?l[d/4]=h:u.next=h,u=h;h.next=new o(s.p2D[d+1],s.p2D[d+2],s.p2D[d+3])}this.lookup2D=[];for(d=0;d<s.lookupPairs2D.length;d+=2)this.lookup2D[s.lookupPairs2D[d]]=l[s.lookupPairs2D[d+1]];for(var p=[],d=0;d<s.p3D.length;d+=9){for(var c=s.base3D[s.p3D[d]],u=null,h=null,f=0;f<c.length;f+=4)h=new n(c[f],c[f+1],c[f+2],c[f+3]),null===u?p[d/9]=h:u.next=h,u=h;h.next=new n(s.p3D[d+1],s.p3D[d+2],s.p3D[d+3],s.p3D[d+4]),h.next.next=new n(s.p3D[d+5],s.p3D[d+6],s.p3D[d+7],s.p3D[d+8])}this.lookup3D=[];for(d=0;d<s.lookupPairs3D.length;d+=2)this.lookup3D[s.lookupPairs3D[d]]=p[s.lookupPairs3D[d+1]];for(var m=[],d=0;d<s.p4D.length;d+=16){for(var c=s.base4D[s.p4D[d]],u=null,h=null,f=0;f<c.length;f+=5)h=new i(c[f],c[f+1],c[f+2],c[f+3],c[f+4]),null===u?m[d/16]=h:u.next=h,u=h;h.next=new i(s.p4D[d+1],s.p4D[d+2],s.p4D[d+3],s.p4D[d+4],s.p4D[d+5]),h.next.next=new i(s.p4D[d+6],s.p4D[d+7],s.p4D[d+8],s.p4D[d+9],s.p4D[d+10]),h.next.next.next=new i(s.p4D[d+11],s.p4D[d+12],s.p4D[d+13],s.p4D[d+14],s.p4D[d+15])}this.lookup4D=[];for(d=0;d<s.lookupPairs4D.length;d+=2)this.lookup4D[s.lookupPairs4D[d]]=m[s.lookupPairs4D[d+1]];this.perm=new Uint8Array(256),this.perm2D=new Uint8Array(256),this.perm3D=new Uint8Array(256),this.perm4D=new Uint8Array(256);for(var g=new Uint8Array(256),d=0;d<256;d++)g[d]=d;(e=new Uint32Array(1))[0]=r,e=t(t(t(e)));for(d=255;d>=0;d--){e=t(e);var z=new Uint32Array(1);z[0]=(e[0]+31)%(d+1),z[0]<0&&(z[0]+=d+1),this.perm[d]=g[z[0]],this.perm2D[d]=14&this.perm[d],this.perm3D[d]=this.perm[d]%24*3,this.perm4D[d]=252&this.perm[d],g[z[0]]=g[d]}this.simplex1D=function(e){return a.simplex2D(e,1)},this.simplex2D=function(e,t){var o=(e+t)*s.STRETCH_2D,n=[e+o,t+o],i=n[0],r=n[1],l=[Math.floor(i),Math.floor(r)],d=l[0],c=l[1],u=(d+c)*s.SQUISH_2D,h=[e-(d+u),t-(c+u)],f=h[0],p=h[1],m=[i-d,r-c],g=m[0],z=m[1],v=g+z,b=new Uint32Array(4);b[0]=g-z+1,b[1]=v,b[2]=v+z,b[3]=v+g;for(var y=b[0]|b[1]<<1|b[2]<<2|b[3]<<4,w=a.lookup2D[y],x=0;void 0!==w;){var T=[f+w.dx,p+w.dy],C=T[0],k=T[1],M=2-C*C-k*k;if(M>0){var j=[d+w.xsb,c+w.ysb],E=j[0],S=j[1],A=a.perm2D[a.perm[255&E]+S&255];x+=(M*=M)*M*(s.gradients2D[A]*C+s.gradients2D[A+1]*k)}w=w.next}return x*s.NORM_2D},this.simplex3D=function(e,t,o){var n=(e+t+o)*s.STRETCH_3D,i=[e+n,t+n,o+n],r=i[0],l=i[1],d=i[2],c=[Math.floor(r),Math.floor(l),Math.floor(d)],u=c[0],h=c[1],f=c[2],p=(u+h+f)*s.SQUISH_3D,m=[e-(u+p),t-(h+p),o-(f+p)],g=m[0],z=m[1],v=m[2],b=[r-u,l-h,d-f],y=b[0],w=b[1],x=b[2],T=y+w+x,C=new Uint32Array(7);C[0]=w-x+1,C[1]=y-w+1,C[2]=y-x+1,C[3]=T,C[4]=T+x,C[5]=T+w,C[6]=T+y;for(var k=C[0]|C[1]<<1|C[2]<<2|C[3]<<3|C[4]<<5|C[5]<<7|C[6]<<9,M=a.lookup3D[k],j=0;void 0!==M;){var E=[g+M.dx,z+M.dy,v+M.dz],S=E[0],A=E[1],P=E[2],O=2-S*S-A*A-P*P;if(O>0){var D=[u+M.xsb,h+M.ysb,f+M.zsb],I=D[0],B=D[1],L=D[2],X=a.perm3D[a.perm[a.perm[255&I]+B&255]+L&255];j+=(O*=O)*O*(s.gradients3D[X]*S+s.gradients3D[X+1]*A+s.gradients3D[X+2]*P)}M=M.next}return j*s.NORM_3D},this.simplex4D=function(e,t,o,n){var i=(e+t+o+n)*s.STRETCH_4D,r=[e+i,t+i,o+i,n+i],l=r[0],d=r[1],c=r[2],u=r[3],h=[Math.floor(l),Math.floor(d),Math.floor(c),Math.floor(u)],f=h[0],p=h[1],m=h[2],g=h[3],z=(f+p+m+g)*s.SQUISH_4D,v=e-(f+z),b=t-(p+z),y=o-(m+z),w=n-(g+z),x=[l-f,d-p,c-m,u-g],T=x[0],C=x[1],k=x[2],M=x[3],j=T+C+k+M,E=new Uint32Array(11);E[0]=k-M+1,E[1]=C-k+1,E[2]=C-M+1,E[3]=T-C+1,E[4]=T-k+1,E[5]=T-M+1,E[6]=j<<6,E[7]=j+M,E[8]=j+k,E[9]=j+C,E[10]=j+T;for(var S=E[0]|E[1]<<1|E[2]<<2|E[3]<<3|E[4]<<4|E[5]<<5|E[6]<<6|E[7]<<8|E[8]<<11|E[9]<<14|E[10]<<17,A=a.lookup4D[S],P=0;void 0!==A;){var O=[v+A.dx,b+A.dy,y+A.dz,w+A.dw],D=O[0],I=O[1],B=O[2],L=O[3],X=2-D*D-I*I-B*B-L*L;if(X>0){var Y=[f+A.xsb,p+A.ysb,m+A.zsb,g+A.wsb],_=Y[0],R=Y[1],W=Y[2],F=Y[3],N=a.perm4D[a.perm[a.perm[a.perm[255&_]+R&255]+W&255]+F&255];P+=(X*=X)*X*(s.gradients4D[N]*D+s.gradients4D[N+1]*I+s.gradients4D[N+2]*B+s.gradients4D[N+3]*L)}A=A.next}return P*s.NORM_4D}},e.Damp=function(t,o){z_d("14");var n;if(n=zob(e.Damp,arguments,"startValue, damp",this))return n;this.lastValue=zot(t)?0:t,this.damp=zot(o)?.1:o},e.Damp.prototype.convert=function(e){return this.lastValue=this.lastValue+(e-this.lastValue)*this.damp},e.Damp.prototype.immediate=function(e){return this.lastValue=e,this},e.Proportion=function(t,o,n,i,r,a){var s;if(s=zob(e.Proportion,arguments,"baseMin, baseMax, targetMin, targetMax, factor, targetRound",this))return s;z_d("15"),zot(n)&&(n=0),zot(i)&&(i=1),zot(r)&&(r=1),zot(a)&&(a=!1);var l,d;this.convert=function(e){if(!isNaN(e))return e=Math.max(e,t),e=Math.min(e,o),l=(e-t)/(o-t),d=r>0?n+(i-n)*l:i-(i-n)*l,a&&(d=Math.round(d)),d}},e.ProportionDamp=function(t,o,n,i,r,a,s){function l(){isNaN(c)||(c=Math.max(c,t),c=Math.min(c,o),u=(c-t)/(o-t),h=i-n,z+=(p=(g=f=a>0?n+h*u:i-h*u)-z)*m.damp)}var d;if(d=zob(e.ProportionDamp,arguments,"baseMin, baseMax, targetMin, targetMax, damp, factor, targetRound",this))return d;z_d("16"),zot(n)&&(n=0),zot(i)&&(i=1),zot(r)&&(r=.1),zot(a)&&(a=1),zot(s)&&(s=!1),this.damp=r;var c,u,h,f,p,m=this,g=0,z=0;c=t,z=n;var v=setInterval(l,20);this.immediate=function(e){return m.convert(e),l(),z=f,s&&(z=Math.round(z)),m},this.convert=function(e){return c=e,s?Math.round(z):z},this.dispose=function(){return clearInterval(v),!0}},e.Dictionary=function(e){z_d("17"),this.length=0,this.unique=e;var t=this.objects=[],o=this.values=[];this.add=function(e,n){zot(e)||(zot(n)&&(n=!0),this.unique&&this.remove(e),t.push(e),o.push(n),this.length++)},this.at=function(e){if(!zot(e)){var n=t.indexOf(e);return n>-1?o[n]:null}},this.remove=function(e){if(!zot(e)){var n=t.indexOf(e);n>-1&&(t.splice(n,1),o.splice(n,1),this.length--)}},this.dispose=function(){return t=null,o=null,this.length=null,!0}},e.swapProperties=function(e,t,o){if(z_d("17.1"),zot(t)||zot(o)||zot(t[e])||zot(o[e]))return!1;var n=o[e];return o[e]=t[e],t[e]=n,!0},e.swapHTML=function(t,o){return z_d("17.2"),e.swapProperties("innerHTML",zid(t),zid(o))},e.scrollX=function(t,o){return z_d("18"),e.abstractScroll("X","Left",t,o)},e.scrollY=function(t,o){return z_d("19"),e.abstractScroll("Y","Top",t,o)},e.abstractScroll=function(t,o,n,i){z_d("20");var r="X"==t?"Y":"X";if(zot(n)){var a=navigator.applicationName;if(-1!=navigator.userAgent.indexOf("Safari")||"Safari"==a);return document.documentElement&&document.documentElement["scroll"+o]||document.body["scroll"+o]}if(zot(i))window.scrollTo(e["scroll"+r](),n);else{i<50&&(i=50);var s=i/50,l=e["scroll"+t](),d=(n-l)/s,c=0,u=setInterval(function(){c++,l+=d,window.scrollTo(e["scroll"+r](),l),c>=s&&(window.scrollTo(e["scroll"+r](),n),clearInterval(u))},50)}return n},e.windowWidth=function(){return z_d("21"),isNaN(window.innerWidth)?window.clientWidth:window.innerWidth},e.windowHeight=function(){return z_d("22"),isNaN(window.innerHeight)?window.clientHeight:window.innerHeight},e.urlEncode=function(e){z_d("23");var e=(e+"").toString();return encodeURIComponent(e).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A").replace(/%20/g,"+")},e.urlDecode=function(e){return z_d("24"),decodeURIComponent((e+"").replace(/\+/g,"%20"))},e.setCookie=function(e,t,o){if(z_d("25"),!zot(e)&&!zot(t)){if(o){var n=new Date;n.setTime(n.getTime()+24*o*60*60*1e3);i="; expires="+n.toGMTString()}else var i="";return document.cookie=e+"="+escape(t)+i+"; path=/",!0}},e.getCookie=function(e){z_d("26");var t,o=document.cookie.split(/;\s*/),i=new Array;for(n=0;n<o.length;n++)i[(t=o[n].split("="))[0]]=t[1];if(void 0!==i[e])return unescape(i[e])},e.deleteCookie=function(t){return z_d("27"),!zot(e.getCookie(t))&&(e.setCookie(t,"",-1),!0)},e.convertColor=function(e,t){if(zot(t)&&(t=!1),t)3==(e=e.replace("#","")).length&&(e=e.charAt(0)+e.charAt(0)+e.charAt(1)+e.charAt(1)+e.charAt(2)+e.charAt(2));else if("#"==e.charAt(0))return e;var o=["black","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgrey","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgrey","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],n=["000000","f0f8ff","faebd7","00ffff","7fffd4","f0ffff","f5f5dc","ffe4c4","ffebcd","0000ff","8a2be2","a52a2a","deb887","5f9ea0","7fff00","d2691e","ff7f50","6495ed","fff8dc","dc143c","00ffff","00008b","008b8b","b8860b","a9a9a9","a9a9a9","006400","bdb76b","8b008b","556b2f","ff8c00","9932cc","8b0000","e9967a","8fbc8f","483d8b","2f4f4f","2f4f4f","00ced1","9400d3","ff1493","00bfff","696969","696969","1e90ff","b22222","fffaf0","228b22","ff00ff","dcdcdc","f8f8ff","ffd700","daa520","808080","808080","008000","adff2f","f0fff0","ff69b4","cd5c5c","4b0082","fffff0","f0e68c","e6e6fa","fff0f5","7cfc00","fffacd","add8e6","f08080","e0ffff","fafad2","d3d3d3","d3d3d3","90ee90","ffb6c1","ffa07a","20b2aa","87cefa","778899","778899","b0c4de","ffffe0","00ff00","32cd32","faf0e6","ff00ff","800000","66cdaa","0000cd","ba55d3","9370db","3cb371","7b68ee","00fa9a","48d1cc","c71585","191970","f5fffa","ffe4e1","ffe4b5","ffdead","000080","fdf5e6","808000","6b8e23","ffa500","ff4500","da70d6","eee8aa","98fb98","afeeee","db7093","ffefd5","ffdab9","cd853f","ffc0cb","dda0dd","b0e0e6","800080","663399","ff0000","bc8f8f","4169e1","8b4513","fa8072","f4a460","2e8b57","fff5ee","a0522d","c0c0c0","87ceeb","6a5acd","708090","708090","fffafa","00ff7f","4682b4","d2b48c","008080","d8bfd8","ff6347","40e0d0","ee82ee","f5deb3","ffffff","f5f5f5","ffff00","9acd32"];return t?o[-1!=n.indexOf(e.toLowerCase())?n.indexOf(e):0]:"#"+n[-1!=o.indexOf(e.toLowerCase())?o.indexOf(e):0]},e.mobile=function(e){return z_d("28"),zot(e)&&(e=!0),/ip(hone|od|ad)/i.test(navigator.userAgent)?"ios":/android|nexus/i.test(navigator.userAgent)?"android":/blackberry/i.test(navigator.userAgent)?"blackberry":/nokia|phone|mobile/i.test(navigator.userAgent)?"windows":/opera mini|webos/i.test(navigator.userAgent)?"other":!(!e||void 0===window.orientation)},e.async=function(t,o){if(z_d("29"),!zot(t)){var n=document.createElement("script");if(o){var i=o.toString().split(/\n/,1)[0].match(/^function\s?([^\s(]*)/)[1];e.async[i]=function(){var e=n;return function(t){e&&e.parentNode.removeChild(e),e=null,o(t)}}()}else e.async.z_s&&e.async.z_s.parentNode&&e.async.z_s.parentNode.removeChild(e.async.z_s),e.async.z_s=n;t.match(/\?/)||(t+="?"),n.setAttribute("src",t+"&r="+Math.random()),document.getElementsByTagName("head")[0].appendChild(n)}},e.extend=function(t,o,n,i,r){function a(){this.constructor=t}var s;if(s=zob(e.extend,arguments,"subclass, superclass, override, prefix, prototype"))return s;if(!zot(t)&&!zot(o)||!zon){zot(i)&&(i="super"),zot(n)&&(n=[]),Array.isArray(n)||(n=[n]),zot(r)&&(r=!0);var l={};for(var d in t.prototype)Object.defineProperty(l,d,Object.getOwnPropertyDescriptor(t.prototype,d));a.prototype=o.prototype,t.prototype=new a;for(d in l)Object.defineProperty(t.prototype,d,Object.getOwnPropertyDescriptor(l,d));var c=t.prototype,u=Object.getPrototypeOf&&Object.getPrototypeOf(c)||c.__proto__;if(u){c[(i+="_")+"constructor"]=u.constructor;for(var h,f=0;f<n.length;f++)"function"==typeof u[h=n[f]]&&(c[i+h]=u[h]);if(r)for(h in u)c.hasOwnProperty(h)&&"function"==typeof u[h]&&(c[i+h]=u[h])}return t}zog("zim.extend() - please supply a class and its superclass")},"undefined"==typeof createjs)return zon&&zog("ZIM >= 4.3.0 requires createjs namespace to be loaded (import createjs before zim)"),e;e.Container=function(t,o,n,i){if(z_d("50.5"),this.cjsContainer_constructor(),this.type="Container",zot(n))var r=0,a=t,s=0,l=o;else var r=t,a=n,s=o,l=i;zot(l)&&(l=a),zot(t)||this.setBounds(r,s,a,l),this.clone=function(){return this.cloneChildren(this.cloneProps(new e.Container(r,s,a,l)))}},zimify(e.Container.prototype),e.extend(e.Container,createjs.Container,"clone","cjsContainer",!1),e.Shape=function(t,o,n,i,r){z_d("50.6"),this.cjsShape_constructor(r),this.type="Shape";var a=this;if(zot(n))var s=0,l=t,d=0,c=o;else var s=t,l=n,d=o,c=i;zot(c)&&(c=l),zot(t)||this.setBounds(s,d,l,c),this.clone=function(t){zot(t)&&(t=!0);var o=a.cloneProps(new e.Shape(l,c,s,d,r));return o.graphics=t?a.graphics.clone():a.graphics,o}},e.extend(e.Shape,createjs.Shape,"clone","cjsShape",!1),zimify(e.Shape.prototype),e.Bitmap=function(t,o,n,i){z_d("50.7"),this.cjsBitmap_constructor(t);var r=this;this.type="Bitmap",this.id=i,zot(o)||zot(n)||r.setBounds(0,0,o,n),zot(o)&&(o=100),zot(n)&&(n=100),this.imageData=new ImageData(o,n),this.drawImageData=function(e,i,a,s,l,d){if(zot(e)&&(e=0),zot(i)&&(i=0),zot(a)&&(a=0),zot(s)&&(s=0),zot(l)&&(l=o),zot(d)&&(d=n),!r.proxyCanvas){var c=r.proxyCanvas=document.createElement("canvas");c.setAttribute("width",o),c.setAttribute("height",n),r.proxyContext=c.getContext("2d"),t=r.image=c}r.proxyContext&&r.proxyContext.putImageData(r.imageData,e,i,a,s,l,d)},zot(t)&&r.drawImageData(),this.clone=function(){return this.cloneProps(new e.Bitmap(t,o,n,i))}},e.extend(e.Bitmap,createjs.Bitmap,"clone","cjsBitmap",!1),zimify(e.Bitmap.prototype),e.Sprite=function(t,o,n,i,r,a,s,l,d,c,u,h,f,p,m){var g;if(g=zob(e.Sprite,arguments,"image, cols, rows, count, offsetX, offsetY, spacingX, spacingY, width, height, animations, json, id, globalControl, spriteSheet",this))return g;this.type="Sprite",z_d("50.8");var z,v=this;if(zot(h)&&!zot(t)){zot(o)&&(o=1),zot(n)&&(n=1),zot(i)&&(i=o*n),zot(r)&&(r=0),zot(a)&&(a=0),zot(s)&&(s=0),zot(l)&&(l=0),zot(d)&&(d=t.width),zot(c)&&(c=t.height);var b=(d-r+s)/o-s,y=(c-a+l)/n-l,w=[],x=0;e:for(var T=0;T<n;T++)for(var C=0;C<o;C++){if(++x>i)break e;w.push([r+C*(b+s),a+T*(y+l),b,y])}var k={images:[t.image],frames:w,animations:u};z=new createjs.SpriteSheet(k)}else m?u=(z=m).animations:(u=h.animations,z=new createjs.SpriteSheet(h));this.animations=u,this.cjsSprite_constructor(z),zot(f)&&(f=e.makeID()),this.id=f,zot(p)&&(p=!0),v.globalControl=p;var M,j=0;this.parseFrames=function(t,o,n,i){function r(e){Array.isArray(e)?a(e):e.constructor=={}.constructor?s(e):isNaN(e)||d.push({f:Math.floor(e),s:1})}function a(e){l(e[0],e[1],e[3]),e[2]&&!zot(v.animations[e[2]])&&r(v.animations[e[2]])}function s(e){if(!zot(e.frames)){zot(e.speed)&&(e.speed=1);for(var t=0;t<e.frames.length;t++)e.speed<c&&(c=e.speed),e.speed>u&&(u=e.speed),d.push({f:e.frames[t],s:e.speed});e.next&&!zot(v.animations[e.next])&&r(v.animations[e.next])}}function l(e,t,o){zot(o)&&(o=1);for(var n=e;n<=t;n++)o<c&&(c=o),o>u&&(u=o),d.push({f:n,s:o})}var d=[],c=Number.MAX_VALUE,u=0;if(zot(t))zot(o)&&(o=0),zot(n)&&(n=v.totalFrames-1),l(o,n);else{if(zot(v.animations)||zot(v.animations[t]))return[];r(v.animations[t])}if(i)return d;c=e.constrain(e.decimals(c),.1),u=e.constrain(e.decimals(u),.1);for(var h,f=[],p=c!=u,m=0;m<d.length;m++)if(h=d[m],p)for(var g=0;g<e.constrain(Math.round(c<1?h.s/c:h.s),.1);g++)f.push(h.f);else f.push(h.f);return f},this.run=function(t,o,n,i,r,a,s,l,d,c,u,h,f,p,m,g,z,b,y,w,x,T,C,k,E){function S(){M=v.parseFrames(o,x,T),j=0,v.gotoAndStop(M[j]),x=T=null,P={normalizedFrame:M.length-1}}var A;if(A=zob(this.run,arguments,"time, label, call, params, wait, waitedCall, waitedParams, loop, loopCount, loopWait, loopCall, loopParams, loopWaitCall, loopWaitParams, rewind, rewindWait, rewindCall, rewindParams, rewindWaitCall, rewindWaitParams, startFrame, endFrame, tweek, id, globalControl"))return A;var P;if(zot(C)&&(C=1),zot(k)||(v.id=k),zot(E)||(v.globalControl=E),Array.isArray(o)){var O,D;P=[];for(var I,B=0,L=0;L<o.length;L++){(O=o[L]).lookup=v.parseFrames(O.label,O.startFrame,O.endFrame),0==L&&(I=O.lookup[0]),delete O.startFrame,delete O.endFrame,O.obj=e.merge(O.obj,{normalizedFrame:O.lookup.length-1}),O.set=e.merge(O.set,{normalizedFrames:{noZik:O.lookup},normalizedFrame:0}),zot(O.wait)&&(O.wait=B*C),D=O.label,delete O.label,P.push(O),B=0;var X=zot(O.time)?t:O.time;T-x>0&&(B=X/(T-x)/2)}if(0==P.length)return this;1==P.length?(t=P[0].time,o=D,S()):v.gotoAndStop(I)}else S();if(zot(t)&&(t=1e3),v.running&&v.stopAnimate(v.id),v.running=!0,!Array.isArray(P)){B=0;T-x>0&&(B=t/(T-x)/2),M&&M.length>0&&(B=t/M.length/2),zot(c)&&(c=B*C),zot(g)&&(g=B*C)}return e.animate({target:v,obj:P,time:t,ease:"linear",call:function(){n&&"function"==typeof n&&n(i),v.running=!1},params:i,wait:r,waitedCall:a,waitedParams:s,loop:l,loopCount:d,loopWait:c,loopCall:u,loopParams:h,loopWaitCall:f,loopWaitParams:p,rewind:m,rewindWait:g,rewindCall:z,rewindParams:b,rewindWaitCall:y,rewindWaitParams:w,override:!1,id:v.id}),v.runPaused=!1,v},this.runPaused=!0,this.pauseRun=function(t){return zot(t)&&(t=!0),v.runPaused=t,v.globalControl?e.pauseAnimate(t,v.id):v.pauseAnimate(t,v.id),v},this.stopRun=function(){return v.runPaused=!0,v.running=!1,v.globalControl?e.stopAnimate(v.id):v.stopAnimate(v.id),v},Object.defineProperty(this,"frame",{get:function(){return this.currentFrame},set:function(e){e=Math.round(e),this.paused?this.gotoAndStop(e):this.gotoAndPlay(e)}}),Object.defineProperty(this,"normalizedFrame",{get:function(){return j},set:function(e){j=Math.round(e),this.gotoAndStop(M[j])}}),Object.defineProperty(this,"normalizedFrames",{get:function(){return M},set:function(e){M=e}}),Object.defineProperty(this,"totalFrames",{get:function(){return z.getNumFrames()},set:function(e){zog("zim.Sprite - totalFrames is read only")}}),this.clone=function(){return this.cloneProps(new e.Sprite(t,o,n,i,r,a,s,l,d,c,u,h,null,p,m))}},e.extend(e.Sprite,createjs.Sprite,"clone","cjsSprite",!1),zimify(e.Sprite.prototype),e.MovieClip=function(t,o,n,i){var r;if(r=zob(e.MovieClip,arguments,"mode, startPosition, loop, labels",this))return r;this.type="MovieClip",z_d("50.9"),this.cjsMovieClip_constructor(t,o,n,i),this.clone=function(){return this.cloneProps(new e.MovieClip(t,o,n,i))}},e.extend(e.MovieClip,createjs.MovieClip,"clone","cjsMovieClip",!1),zimify(e.MovieClip.prototype),e.Circle=function(t,o,n,i,r){function a(){v.c(),p=v.f(c).command,(zot(h)||h>0)&&(zot(u)&&zot(h)||(zot(u)&&(u="black"),m=v.s(u).command,g=v.ss(h).command,r&&(z=v.sd([10,10],5).command))),v.dc(0,0,d),l.setBounds(-d,-d,2*d,2*d)}var s;if(s=zob(e.Circle,arguments,"radius, color, borderColor, borderWidth, dashed",this))return s;z_d("51"),this.zimContainer_constructor(),this.type="Circle",zot(t)&&(t=50),zot(r)&&(r=!1),!zot(n)&&zot(i)?i=1:!zot(i)&&zot(n)&&(n="black"),zot(o)&&(o=i>0?"rgba(0,0,0,0)":"black");var l=this,d=t,c=o,u=n,h=i;this.mouseChildren=!1;var f=this.shape=new createjs.Shape;this.addChild(f);var p,m,g,z,v=f.graphics;a(),Object.defineProperty(l,"color",{get:function(){return c},set:function(e){zot(e)&&(e="black"),c=e,p.style=c}}),Object.defineProperty(l,"borderColor",{get:function(){return u},set:function(e){u=e,m?m.style=u:a()}}),Object.defineProperty(l,"borderWidth",{get:function(){return h},set:function(e){e>0||(e=0),h=e,g&&0!=h?(g.width=h,r&&(z.segments=[20,10],z.offset=5)):a()}}),Object.defineProperty(l,"radius",{get:function(){return d},set:function(e){d=e,a()}}),this.clone=function(){return l.cloneProps(new e.Circle(l.radius,l.color,l.borderColor,l.borderWidth,r))}},e.extend(e.Circle,e.Container,"clone","zimContainer",!1),e.Rectangle=function(t,o,n,i,r,a,s,l){function d(){b.c(),g=b.f(h).command,(zot(p)||p>0)&&(zot(f)&&zot(p)||(zot(f)&&(f="black"),z=b.s(f).command,v=b.ss(p).command,l&&(borderDashedObj=b.sd([10,10],5).command))),s?b.rc(0,0,t,o,a,a,0,0):a>0?b.rr(0,0,t,o,a):b.r(0,0,t,o),u.setBounds(0,0,t,o)}var c;if(c=zob(e.Rectangle,arguments,"width, height, color, borderColor, borderWidth, corner, flatBottom, dashed",this))return c;z_d("52"),this.zimContainer_constructor(),this.type="Rectangle",zot(t)&&(t=100),zot(o)&&(o=100),zot(a)&&(a=0),zot(s)&&(s=!1),zot(l)&&(l=!1),!zot(i)&&zot(r)?r=1:!zot(r)&&zot(i)&&(i="black"),zot(n)&&(n=r>0?"rgba(0,0,0,0)":"black");var u=this,h=n,f=i,p=r;this.mouseChildren=!1;var m=this.shape=new createjs.Shape;this.addChild(m);var g,z,v,b=m.graphics;d(),Object.defineProperty(u,"color",{get:function(){return h},set:function(e){zot(e)&&(e="black"),h=e,g.style=h}}),Object.defineProperty(u,"borderColor",{get:function(){return f},set:function(e){f=e,z?z.style=f:d()}}),Object.defineProperty(u,"borderWidth",{get:function(){return p},set:function(e){e>0||(e=0),p=e,v&&0!=p?(v.width=p,l&&(borderDashedObj.segments=[20,10],borderDashedObj.offset=5)):d()}}),this.clone=function(){return u.cloneProps(new e.Rectangle(t,o,u.color,u.borderColor,u.borderWidth,a,s,l))}},e.extend(e.Rectangle,e.Container,"clone","zimContainer",!1),e.Triangle=function(t,o,n,i,r,a,s,l,d){function c(){x.c(),b=x.f(f).command,(zot(m)||m>0)&&(zot(p)&&zot(m)||(zot(p)&&(p="black"),y=x.s(p).command,w=x.ss(m).command,d&&(borderDashedObj=x.sd([10,10],5).command))),x.mt(0,0),h.one={x:0,y:0},x.lt(t,0),h.two={x:t,y:0};var e=180*Math.acos((Math.pow(bb,2)+Math.pow(cc,2)-Math.pow(aa,2))/(2*bb*cc))/Math.PI,n=180*Math.asin(bb*Math.sin(e*Math.PI/180)/aa)/Math.PI,i=[e,n,180-e-n];h.angles=[i[z[1]],i[z[2]],i[z[0]]];var r=h.angles[1],a=Math.cos(r*Math.PI/180)*o,c=Math.sin(r*Math.PI/180)*o,u=Math.max(t,t-a),g=c;h.setBounds(0,0,u,g),v.y=g,x.lt(t-a,0-c),h.three={x:t-a,y:0-c},x.cp(),s&&(h.regX=u/2,h.regY=g/2),l&&(h.shape.y+=l)}var u;if(u=zob(e.Triangle,arguments,"a, b, c, color, borderColor, borderWidth, center, adjust, dashed",this))return u;z_d("53"),this.zimContainer_constructor(),this.type="Triangle",zot(t)&&(t=100),zot(o)&&(o=t),zot(n)&&(n=o),-1==n&&(n=Math.sqrt(Math.pow(t,2)+Math.pow(o,2))),zot(s)&&(s=!0),zot(l)&&(l=0),!zot(r)&&zot(a)?a=1:!zot(a)&&zot(r)&&(r="black"),zot(i)&&(i=a>0?"rgba(0,0,0,0)":"black");var h=this,f=i,p=r,m=a;this.mouseChildren=!1;var g=[t,o,n];g.sort(function(e,t){return t-e}),aa=g[0],bb=g[1],cc=g[2];var z=[g.indexOf(t),g.indexOf(o),g.indexOf(n)];if(aa>bb+cc)zog("zim display - Triangle(): invalid triangle lengths");else{var v=this.shape=new createjs.Shape;this.addChild(v);var b,y,w,x=v.graphics;c(),Object.defineProperty(h,"color",{get:function(){return f},set:function(e){zot(e)&&(e="black"),f=e,b.style=f}}),Object.defineProperty(h,"borderColor",{get:function(){return p},set:function(e){p=e,y?y.style=p:c()}}),Object.defineProperty(h,"borderWidth",{get:function(){return m},set:function(e){e>0||(e=0),m=e,w&&0!=m?(w.width=m,d&&(borderDashedObj.segments=[20,10],borderDashedObj.offset=5)):c()}}),this.clone=function(){return h.cloneProps(new e.Triangle(t,o,n,h.color,h.borderColor,h.borderWidth,s,l,d))}}},e.extend(e.Triangle,e.Container,"clone","zimContainer"),e.Blob=function(t,o,n,i,r,a,s,l,d,c,u,h,f,p,m){function g(){function t(e){if(!k.lockControlType){var t=e.target,i=b[t.index][4]?b[t.index][4]:s;Math.abs(t.rect1.x)<=2&&Math.abs(t.rect1.y)<=2&&Math.abs(t.rect2.x)<=2&&Math.abs(t.rect2.y)<=2&&(i="none"),"none"==i&&t.parent.addChildAt(t,0),"none"==(i=k.types[(k.types.indexOf(i)+(frame.shiftKey?-1:1)+k.types.length)%k.types.length])&&(t.rect1.x=t.rect1.y=t.rect2.x=t.rect2.y=0,t.parent.addChild(t),e.stopImmediatePropagation()),b[t.index][4]=i,t.rect1.color=o(i),t.rect2.color=o(i),n(),t.stage.update()}}function o(e){var t={mirror:frame.purple,free:frame.yellow,none:frame.blue};return t[e]?t[e]:frame.pink}function n(){g.c(),y=g.f(M).command,(zot(E)||E>0)&&(zot(j)&&zot(E)||(zot(j)&&(j="black"),w=g.s(j).command,x=g.ss(E).command,p&&(T=g.sd([10,10],5).command)));m=(n=b[0][0]).localToLocal(b[0][3].x,b[0][3].y,h);g.mt(m.x,m.y),z.c().s(frame.darker).ss(1);for(var e=0;e<b.length;e++){var t=e,o=(e+1)%b.length,n=b[t][0],i=b[t][3],r=b[t][1],a=b[t][2],s=b[o][0],l=b[o][3],d=b[o][1],c=(b[o][2],n.localToLocal(a.x,a.y,h)),u=s.localToLocal(d.x,d.y,h),f=s.localToLocal(l.x,l.y,h);g.bt(c.x,c.y,u.x,u.y,f.x,f.y);var m=n.localToLocal(i.x,i.y,h),v=n.localToLocal(r.x,r.y,h);z.mt(m.x,m.y).lt(v.x,v.y),z.mt(m.x,m.y).lt(c.x,c.y)}}function u(e){k.dblclick&&(k.controls=!k.controls,k.dblclickDrag&&(k.controls?k.noDrag():k.drag({currentTarget:!0,onTop:m})))}if(!((v="number"==typeof i?i:i.length)<=0)){a=4*r/v;var h=k.shape=(new e.Shape).addTo(k),f=k.sticks=(new e.Shape).addTo(k),g=h.graphics;g.c();var z=f.graphics;z.c();var A=e.mobile(),P=k.sets=(new e.Container).addTo(k).drag({onTop:!A});b=[],C=[];for(var O,D,I,B,L,X,Y,_,R=0;R<v;R++){if(I=(new e.Container).addTo(P),"number"==typeof i){var W=zik(a);(D=new e.Container(W,r).reg(W/2,r).addTo(k)).rotation=R/v*360,X=new e.Circle(8,frame.light,frame.dark,2).centerReg(D).pos(W/2,0),B=new e.Rectangle(10,10,o(s),frame.dark,2).centerReg(D).pos(0,0),L=new e.Rectangle(10,10,o(s),frame.dark,2).centerReg(D).pos(W,0);var F=D.localToLocal(X.x,X.y,P);X.x=F.x,X.y=F.y,X.addTo(I);var N=D.localToLocal(B.x,B.y,P);B.x="none"==s?0:N.x-X.x,B.y="none"==s?0:N.y-X.y,B.addTo(I);var H=D.localToLocal(L.x,L.y,P);L.x="none"==s?0:H.x-X.x,L.y="none"==s?0:H.y-X.y,L.addTo(I),I.pos(X.x,X.y),X.x=0,X.y=0,"none"==s&&X.addTo(I)}else Y=(_=i[R])[8]?_[8]:s,I=(new e.Container).addTo(P).pos(_[0],_[1]),X=new e.Circle(8,frame.light,frame.dark,2).centerReg(I).pos(_[6],_[7]),B=new e.Rectangle(10,10,o(Y),frame.dark,2).centerReg(I,0).pos(_[2],_[3]),L=new e.Rectangle(10,10,o(Y),frame.dark,2).centerReg(I,0).pos(_[4],_[5]);C.push(X),X.set=I,X.rect1=B,X.rect2=L,X.index=R,A?X.on("mousedown",function(e){G?(e.preventDefault(),t(e)):(G=!0,setTimeout(function(){G=!1},300))}):X.on("dblclick",t),B.ball=X,B.other=L,L.ball=X,L.other=B,e.mobile()&&(X.expand(),B.expand(),L.expand()),O=[I,B,L,X,_?_[8]:s],b.push(O)}G=!1;n(),P.on("mousedown",function(e){if(!k.lockControls)if(e.target.rect1)(o=e.target).startX=o.x,o.startY=o.y,o.rect1.startX=o.rect1.x,o.rect1.startY=o.rect1.y,o.rect2.startX=o.rect2.x,o.rect2.startY=o.rect2.y;else{var t=e.target,o=t.ball,n=o.index,i=s;if(zot(b[n][4])||(i=b[n][4]),"straight"==i){var r=t.other,a=r.x-o.x,l=r.y-o.y;r.stickLength=Math.sqrt(Math.pow(a,2)+Math.pow(l,2))}}}),P.on("pressmove",function(e){if(!k.lockControls){if(e.target.rect1){var t=(a=e.target).x-a.startX,o=a.y-a.startY;a.rect1.x=a.rect1.startX+t,a.rect1.y=a.rect1.startY+o,a.rect2.x=a.rect2.startX+t,a.rect2.y=a.rect2.startY+o}else{var i=e.target,r=i.other,a=i.ball,l=a.index,d=s;if(zot(b[l][4])||(d=b[l][4]),"straight"==d||"mirror"==d){var c=i.x-a.x,u=i.y-a.y;if("mirror"==d)r.x=a.x-c,r.y=a.y-u;else{var h=Math.atan2(u,c),f=-r.stickLength*Math.cos(h+Math.PI),p=-r.stickLength*Math.sin(h+Math.PI);r.x=a.x-f,r.y=a.y-p}}}n()}}),P.on("pressup",function(e){if(!k.lockControls){if(e.target.rect1){var t=e.target,o=t.set,n=t.rect1,i=t.rect2;n.x-=t.x,n.y-=t.y,i.x-=t.x,i.y-=t.y,o.x+=t.x,o.y+=t.y,t.x=0,t.y=0}k.dispatchEvent("change")}}),k.changeControl=function(e,t,o,n,i,r,a,s){var l;if(l=zob(k.changeControl,arguments,"index, type, rect1X, rect1Y, rect2X, rect2Y, circleX, circleY"))return l;if(zot(e))for(var d=0;d<b.length;d++)k.changeControl(d,t,o,n,i,r,a,s);else{var c=b[e];c[4]=t,"none"==t?(zot(a)||(c[3].x=a),zot(s)||(c[3].y=s),c[1].pos(c[3].x,c[3].y),c[2].pos(c[3].x,c[3].y),c[3].parent.addChild(c[3])):(zot(o)||(c[1].x=o),zot(n)||(c[1].y=n),zot(i)||(c[2].x=i),zot(r)||(c[2].y=r),zot(a)||(c[3].x=a),zot(s)||(c[3].y=s),c[3].parent.addChildAt(c[3],0)),k.stage&&k.stage.update()}},k.update=function(){return n(),k},A?h.on("mousedown",function(e){G?(e.preventDefault(),u(e)):(G=!0,setTimeout(function(){G=!1},300))}):h.on("dblclick",u);var G=!1;k.controls=d,k.dblclick&&k.dblclickDrag&&!k.controls&&k.drag({currentTarget:!0,onTop:m}),k.on("click",function(){k.ctrlclick&&zimDefaultFrame.ctrlKey&&(k.clone().addTo(k.stage.stage).mov(100),k.stage.stage.update())}),k.hideControls=function(){return P.visible=!1,f.visible=!1,S=!1,k.stage&&k.stage.update(),k},d||k.hideControls(),k.showControls=function(){return P.visible=!0,f.visible=!0,S=!0,P.pos(h.x,h.y),f.pos(h.x,h.y),k.addChildAt(h,0),k.stage&&k.stage.update(),k},k.record=function(t){zot(t)&&(t=!1);for(var o,n,i=[],r=0;r<b.length;r++)n=b[r],o=[e.decimals(n[0].x),e.decimals(n[0].y),e.decimals(n[1].x),e.decimals(n[1].y),e.decimals(n[2].x),e.decimals(n[2].y),e.decimals(n[3].x),e.decimals(n[3].y)],n[4]&&"straight"!==n[4]&&o.push(n[4]),i.push(o);if(t){if(!a){var a=new e.Pane({container:k.stage,width:500,height:500,drag:!0}),s=new e.TextArea(frame,400,400);s.centerReg(a)}s.text=JSON.stringify(i),a.show()}return i},k.clone=function(){return k.cloneProps(new e.Blob(k.color,k.borderColor,k.borderWidth,k.record(),r,a,s,l,P.visible,c,k.dblclick,k.dblclickDrag,k.ctrlclick,p))}}}var z;if(z=zob(e.Blob,arguments,"color, borderColor, borderWidth, points, radius, controlLength, controlType, lockControlType, showControls, lockControls, dblclick, dblclickDrag, ctrlclick, dashed, onTop",this))return z;z_d("53.5"),zot(r)&&(r=100),this.zimContainer_constructor(-r,-r,2*r,2*r),this.type="Blob",zot(p)&&(p=!1),!zot(o)&&zot(n)?n=1:!zot(n)&&zot(o)&&(o="black"),zot(t)&&(t=n>0?"rgba(0,0,0,0)":frame.green),zot(i)&&(i=4);var v="number"==typeof i?i:i.length;zot(a)&&(a=4*r/v),zot(s)&&(s="straight"),zot(l)&&(l=!1),zot(d)&&(d=!0),zot(c)&&(c=!1),zot(u)&&(u=!1),zot(h)&&(h=!0),zot(f)&&(f=!1),this.dblclick=u,this.dblclickDrag=h,this.lockControlType=l,this.ctrlclick=f,zot(m)&&(m=!0);var b,y,w,x,T,C,k=this,M=(this.types=["mirror","straight","free","none"],t),j=o,E=n;g();var S=d;Object.defineProperty(k,"controls",{get:function(){return S},set:function(e){S=e,e?k.showControls():k.hideControls()}});var A=c;Object.defineProperty(k,"lockControls",{get:function(){return A},set:function(e){A=e,e?(k.sets.mouseChildren=!1,k.sets.mouseEnabled=!1):(k.sets.mouseChildren=!0,k.sets.mouseEnabled=!0)}}),k.lockControls=A,Object.defineProperty(k,"color",{get:function(){return M},set:function(e){zot(e)&&(e="black"),M=e,y.style=M}}),Object.defineProperty(k,"borderColor",{get:function(){return j},set:function(e){j=e,w?w.style=j:drawShape()}}),Object.defineProperty(k,"borderWidth",{get:function(){return E},set:function(e){e>0||(e=0),E=e,x&&0!=E?(x.width=E,p&&(T.segments=[20,10],T.offset=5)):drawShape()}}),Object.defineProperty(k,"points",{get:function(){return b},set:function(e){k.dispose(),i=e,k.shape&&(k.shape.graphics.clear(),k.sticks.graphics.clear(),k.sets.noDrag(),k.removeAllChildren(),delete k.shape,delete k.sticks,delete k.sets),g(),k.lockControls=A}}),this.dispose=function(){if(k.shape){for(var e=0;e<k.points.length;e++)k.points[e][1].removeAllEventListeners();for(e=0;e<C.length;e++)C[e].removeAllEventListeners();k.shape.removeAllEventListeners(),k.sets.removeAllEventListeners(),k.removeAllEventListeners()}}},e.extend(e.Blob,e.Container,"clone","zimContainer",!1),e.Label=function(o,n,i,r,a,s,l,d,c,u,h,f,p,m,g){function z(){var t,o=y.getBounds();if("top"==c?(y.y=n-n/6,w&&(w.y=n-n/6),t=0):"center"==c||"middle"==c?(t=-o.height/2,y.y=.3*n,w&&(w.y=.3*n)):t=-o.height,p){var i=p.getBounds();b.setBounds(i.x,i.y,i.width,i.height)}else b.setBounds(o.x,t,o.width,o.height),x.graphics.c().f("black").r(b.getBounds().x,b.getBounds().y,b.getBounds().width,b.getBounds().height);e.center(y,b),y.y+=n/32,w&&(e.center(w,b,0),w.y+=n/32)}var v;if(v=zob(e.Label,arguments,"text, size, font, color, rollColor, shadowColor, shadowBlur, align, valign, lineWidth, lineHeight, fontOptions, backing, outlineColor, outlineWidth",this))return v;z_d("54"),this.zimContainer_constructor(),this.type="Label",zot(o)&&(o="LABEL"),""===o&&(o=" "),zot(n)&&(n=36),zot(i)&&(i="arial"),zot(r)&&(r="black"),zot(a)&&(a=r),zot(s)&&(s=-1),zot(l)&&(l=14),zot(d)&&(d="left"),zot(c)&&(c="top"),zot(f)&&(f=""),!zot(m)&&zot(g)&&(g=Math.round(.2*n)),!zot(g)&&zot(m)&&(m="#000000"),zot(g)&&(g=0);var b=this;this.mouseChildren=!1;var y=this.label=new createjs.Text(String(o),f+" "+n+"px "+i,r);if(y.textAlign=d,y.lineWidth=u,y.lineHeight=h,y.textBaseline="alphabetic",g>0){var w=this.outlineLabel=y.clone();w.color=m,w.outline=g,this.addChild(w)}if(-1!=s&&l>0&&(y.shadow=new createjs.Shadow(s,3,3,l)),this.addChild(y),zot(p)){var x=new createjs.Shape;b.hitArea=x}z(),zot(p)||(this.backing=p,e.center(p,this,0)),Object.defineProperty(b,"text",{get:function(){return" "==y.text?"":y.text},set:function(e){(zot(e)||""===e)&&(e=" "),y.text=String(e),w&&(w.text=String(e)),z()}}),Object.defineProperty(b,"color",{get:function(){return r},set:function(t){a==r&&(a=t),r=t,y.color=r,e.OPTIMIZE||!zns&&OPTIMIZE||!b.stage||b.stage.update()}}),Object.defineProperty(b,"outlineColor",{get:function(){return m},set:function(t){m=t,w&&(w.color=m),e.OPTIMIZE||!zns&&OPTIMIZE||!b.stage||b.stage.update()}}),Object.defineProperty(b,"rollColor",{get:function(){return a},set:function(e){a=e}}),this._enabled=!0,Object.defineProperty(b,"enabled",{get:function(){return b._enabled},set:function(o){t(b,o),y.color=r,b.mouseChildren=!1,e.OPTIMIZE||!zns&&OPTIMIZE||!b.stage||b.stage.update()}}),this.showRollColor=function(e){zot(e)&&(e=!0),y.color=e?a:r,b.stage&&b.stage.update()},this.on("mouseover",function(e){b.showRollColor()}),this.on("mouseout",function(e){b.showRollColor(!1)}),this.clone=function(){return b.cloneProps(new e.Label(b.text,n,i,r,a,s,l,d,c,u,h,f,zot(p)?null:p.clone(),m,g))},this.dispose=function(){return b.removeAllEventListeners(),!0}},e.extend(e.Label,e.Container,"clone","zimContainer"),e.Button=function(o,n,i,r,a,s,l,d,c,u,h,f,p,m,g,z,v,b,y,w,x,T,C){function k(e){X=!1,A.off("mouseout",k),A.rollPersist?L||M():M()}function M(){zot(g)?P.color=r:zot(z)||(zot(b)&&A.toggled?(A.removeChild(x),A.addChildAt(w,0)):(A.removeChild(z),A.addChildAt(g,0))),zot(y)||(A.toggled?(A.removeChild(x),A.addChild(w)):(A.removeChild(y),A.addChild(b))),A.label.showRollColor(!1),A.stage&&A.stage.update()}function j(){"string"==typeof w?(A.text=A.toggled?w:Y,e.OPTIMIZE||!zns&&OPTIMIZE||!A.stage||A.stage.update()):zot(b)?A.setBackings(A.toggled?w:g,A.toggled?x:z):A.setIcons(A.toggled?w:b,A.toggled?x:y)}function E(t,i,r,a,s){A.contains(A[t])?(A.removeChild(A[t]),A.addChildAt(r,s)):A.contains(A[i])&&(A.removeChild(A[i]),A.addChildAt(a,s)),A[t]=r,A[i]=a,A[t]&&(A[t].x=o/2,A[t].y=n/2),A[i]&&(A[i].x=o/2,A[i].y=n/2),e.OPTIMIZE||!zns&&OPTIMIZE||!A.stage||A.stage.update()}var S;if(S=zob(e.Button,arguments,"width, height, label, color, rollColor, borderColor, borderWidth, corner, shadowColor, shadowBlur, hitPadding, gradient, gloss, flatBottom, backing, rollBacking, rollPersist, icon, rollIcon, toggle, rollToggle, toggleEvent, dashed",this))return S;z_d("55"),this.zimContainer_constructor(),this.type="Button",zot(o)&&(o=200),zot(n)&&(n=60),zot(r)&&(r="#C60"),zot(a)&&(a="#F93"),zot(s)&&(s=null),zot(l)&&(l=null),zot(d)&&(d=20),zot(c)&&(c="rgba(0,0,0,.3)"),zot(u)&&(u=14),zot(h)&&(h=0),zot(f)&&(f=0),zot(p)&&(p=0),zot(m)&&(m=!1),zot(i)&&(i=zot(b)?"PRESS":""),!zot(w)&&zot(T)&&(T=e.mobile()?"mousedown":"click"),"string"!=typeof i&&"number"!=typeof i||(i=new e.Label(i,36,"arial","white",null,null,null,"center","middle")),zot(v)&&(v=!1),this.rollPersist=v,zot(C)&&(C=!1);var A=this;this.mouseChildren=!1,this.cursor="pointer",A.focus=!1;var P;zot(g)?P=new e.Rectangle(o,n,r,s,l,d,m,C):((P=g).x=o/2,P.y=n/2,zot(z)||(z.x=o/2,z.y=n/2,this.rollBacking=z)),this.addChild(P),this.backing=P,zot(b)||(this.addChild(b),b.x=o/2,b.y=n/2,this.icon=b),zot(y)||(this.rollIcon=y,y.x=o/2,y.y=n/2);var O=m?0:d;if(f>0&&zot(g)){var D=new createjs.Shape;D.graphics.lf(["rgba(255,255,255,"+f+")","rgba(0,0,0,"+f+")"],[0,1],0,0,0,n-l),D.graphics.rc(l/2,l/2,o-l,n-l,d,d,O,O),P.addChild(D)}if(p>0&&zot(g)){var I=new createjs.Shape;I.graphics.f("rgba(255,255,255,"+p+")"),I.graphics.rc(l/2,l/2,o-l,(n-l)/2,d,d,0,0),I.graphics.f("rgba(0,0,0,"+p+")"),I.graphics.rc(l/2,n/2,o-l,(n-l)/2,0,0,O,O),P.addChild(I)}if(h>0){var B=new createjs.Shape;B.graphics.f("#000").r(-h,-h,o+2*h,n+2*h),this.hitArea=B}-1!=c&&u>0&&(P.shadow=new createjs.Shadow(c,3,3,u),zot(z)||(z.shadow=new createjs.Shadow(c,3,3,u))),this.setBounds(0,0,o,n),this.addChild(i),i.center(this),i.y+=1,this.label=i;var L=!1;this.on("mousedown",function(){L=!0}),this.on("pressup",function(){L=!1,A.rollPersist&&!X&&M()});var X=!1;this.on("mouseover",function(e){X=!0,zot(g)?P.color=a:zot(z)||(zot(b)&&A.toggled?(A.removeChild(w),A.addChildAt(x,0)):(A.removeChild(g),A.addChildAt(z,0))),zot(y)||(A.toggled?(A.removeChild(w),A.addChild(x)):(A.removeChild(b),A.addChild(y))),A.label.showRollColor(),A.stage&&A.stage.update()}),this.on("mouseout",k),this.toggled=!1,this.toggleObj=w,this.rollToggle=x;var Y=i.text;zot(w)||this.on(T,function(){A.toggled=!A.toggled,j(A.toggled)}),Object.defineProperty(A,"text",{get:function(){return" "==i.text?"":i.text},set:function(e){i.text=e,i.center(this),i.y+=1}}),Object.defineProperty(A,"color",{get:function(){return r},set:function(t){r=t,P.color?P.color=r:zon&&zog("zim.Button - backing has no color property"),e.OPTIMIZE||!zns&&OPTIMIZE||!A.stage||A.stage.update()}}),Object.defineProperty(A,"rollColor",{get:function(){return a},set:function(e){a=e}}),this._enabled=!0,Object.defineProperty(A,"enabled",{get:function(){return A._enabled},set:function(o){t(A,o),A.mouseChildren=!1,i.color=i.color,e.OPTIMIZE||!zns&&OPTIMIZE||!A.stage||A.stage.update()}}),this.setBackings=function(e,t){E("backing","rollBacking",e,t,0)},this.setIcons=function(e,t){E("icon","rollIcon",e,t,A.numChildren-1)},this.toggle=function(e){zot(e)?A.toggled=!A.toggled:A.toggled=e,j()},this.clone=function(){var t=new e.Button(o,n,i.clone(),r,a,s,l,d,c,u,h,f,p,m,zot(g)?null:g.clone(),zot(z)?null:z.clone(),v,zot(b)?null:b.clone(),zot(y)?null:y.clone(),zot(w)?null:"string"==typeof w?w:w.clone(),zot(x)?null:x.clone(),T,C);return A.cloneProps(t)},this.dispose=function(){return A.removeAllEventListeners(),A.removeChild(P),A.removeChild(z),A.removeChild(b),A.removeChild(A.label),A.label&&A.label.dispose(),P=null,z=null,b=null,A.label=null,!0}},e.extend(e.Button,e.Container,"clone","zimContainer",!1),e.CheckBox=function(o,n,i,r,a,s){var l;if(l=zob(e.CheckBox,arguments,"size, label, startChecked, color, margin, indicatorType",this))return l;z_d("56"),this.zimContainer_constructor(),this.type="CheckBox",zot(o)&&(o=60),zot(n)&&(n=null),"string"!=typeof n&&"number"!=typeof n||(n=new e.Label(n,5*o/6,"arial",r));var d=!zot(i)&&i;zot(r)&&(r="#111"),zot(a)&&(a=10),"box"!=s&&"square"!=s&&"x"!=s&&(s="check"),this.setBounds(-a,-a,o+2*a,o+2*a);var c=this;this.cursor="pointer";var u=new createjs.Shape,h=u.graphics;h.f("rgba(255,255,255,.5)").r(0,0,o,o),h.s(r).ss(o/10).r(o/7,o/7,o-o/7*2,o-o/7*2),this.addChild(u);var f=o;n&&(this.addChild(n),n.x=1.3*o+a,n.y=o/8,this.label=n,this.setBounds(-a,-a,o+3*a+n.getBounds().width,Math.max(o+2*a,n.getBounds().height)),f=n.x+n.width);var p=new createjs.Shape;(h=p.graphics).f("rgba(0,0,0,.01)").r(this.getBounds().x,this.getBounds().y,f+2*a,this.getBounds().height),this.hitArea=p;var m=new createjs.Shape,g=m.graphics,z="#000";"check"==s?g.f(z).p("AnQAdICBiaIEEDZIF8nfICfB4In/KPg"):"box"==s||"square"==s?g.f(z).dr(-35,-35,70,70):g.f(z).p("AmJEVIEUkTIkXkWIB4h5IEWEYIETkTIB4B3IkTESIEQERIh4B4IkRkRIkSEVg");m.setBounds(-47.5,-47.5,95,95);var v=o/161;m.scaleX=m.scaleY=v,m.alpha=.9,m.x=o/2,m.y=o/2,d&&this.addChild(m),this.on("mousedown"==e.ACTIONEVENT?"mousedown":"click",function(e){d=!d,c.setChecked(d),c.dispatchEvent("change")}),Object.defineProperty(c,"checked",{get:function(){return d},set:function(e){c.setChecked(e)}}),Object.defineProperty(c,"text",{get:function(){if(n)return n.text},set:function(t){n&&(n.text=t,e.OPTIMIZE||!zns&&OPTIMIZE||!c.stage||c.stage.update())}}),Object.defineProperty(m,"color",{get:function(){return z},set:function(t){d&&c.removeChild(m),m=new createjs.Shape,g=m.graphics,z=t,g.f(z).p("AnQAdICBiaIEEDZIF8nfICfB4In/KPg"),m.scaleX=m.scaleY=v,m.alpha=.9,m.x=o/2,m.y=o/2,d&&c.addChild(m),e.OPTIMIZE||!zns&&OPTIMIZE||!c.stage||c.stage.update()}}),Object.defineProperty(c,"check",{get:function(){return m},set:function(e){zog("ZIM CheckBox - check is read only")}}),this._enabled=!0,Object.defineProperty(c,"enabled",{get:function(){return c._enabled},set:function(e){t(c,e)}}),this.setChecked=function(t){zot(t)&&(t=!0),(d=t)?c.addChild(m):c.removeChild(m),e.OPTIMIZE||!zns&&OPTIMIZE||!c.stage||c.stage.update()},this.clone=function(){return c.cloneProps(new e.CheckBox(o,n.clone(),i,r,a,s))},this.dispose=function(){return c.removeAllEventListeners(),!0}},e.extend(e.CheckBox,e.Container,"clone","zimContainer",!1),e.RadioButtons=function(o,n,i,r,a,s,l){function d(t,n){var i=new e.Container;u.buttons.push(i),i.mouseChildren=!1,i.setBounds(-s,-s,o+2*s,o+2*s);var a=new createjs.Shape,l=a.graphics;l.f("rgba(255,255,255,.5)").dc(o/2,o/2,o/1.85),l.s(r).ss(o/9).dc(o/2,o/2,o/2-o/2/5),i.addChild(a);var d=i.check=new e.Circle(o/5.2,"rgba(0,0,0,.7)");u.dots.push(d),d.mouseEnabled=!1,d.alpha=.95,d.regX=d.regY=-o/2;var c=o;n&&(i.addChild(n),n.x=i.getBounds().width,n.y=o/8,i.setBounds(-s,-s,o+2*s+n.getBounds().width,Math.max(o+2*s,n.getBounds().height)),c=n.x+n.width,i.text=n.text),t&&(i.addChild(d),u.label=n,u.label&&(u.text=n.text));var h=new createjs.Shape;return(l=h.graphics).f("rgba(0,0,0,.01)").r(i.getBounds().x,i.getBounds().y,c+2*s,i.getBounds().height),i.hitArea=h,i}var c;if(c=zob(e.RadioButtons,arguments,"size, buttons, vertical, color, spacing, margin, always",this))return c;z_d("57"),this.zimContainer_constructor(),this.type="RadioButtons",zot(o)&&(o=60),o=Math.max(5,o),zot(n)&&(n=["A","B","C"]),zot(i)&&(i=!0),zot(r)&&(r="#111"),zot(a)&&(a=i?.2*o:o),zot(s)&&(s=o/5);var u=this;this.cursor="pointer",this.labels=[],this.dots=[];var h;if("string"==typeof n){var f=n;n=[];for(var p=0;p<f.length;p++)n.push({label:f[p]})}var m=new e.Container;this.addChild(m),function(){for(var t,s=!1,l=n.length-1;l>=0;l--)(t=n[l]).selected&&!0===t.selected&&(s?t.selected="false":(s=!0,u.id=t.id));m.removeAllChildren(),u.buttons=[];for(var c,f=0,l=0;l<n.length;l++)"string"!=typeof(t=n[l])&&"number"!=typeof t||(t={selected:!1,label:new e.Label(t,5*o/6,"arial",r)}),(t.label&&"string"==typeof t.label||"number"==typeof t.label)&&(t.label=new e.Label(t.label,5*o/6,"arial",r)),u.labels.push(t.label),t.index=l,n[l]=t,(c=d(t.selected,t.label)).type="RadioButton",c.obj=t,t.selected&&(h=c.obj),m.addChild(c),i?(c.y=f,f+=c.getBounds().height+a):(c.x=f,f+=c.getBounds().width+a)}();for(var g=0;g<m.numChildren;g++)m.getChildAt(g).on("mousedown"==e.ACTIONEVENT?"mousedown":"click",function(e){var t=m.getChildIndex(e.target);l&&u.selectedIndex==t||(u.setSelected(t),u.dispatchEvent("change"))});this.getBounds()||this.setBounds(0,0,o,o),this.setBounds(-s,-s,this.getBounds().width+s,this.getBounds().height+s),this.setSelected=function(t){if(zot(t)&&(t=-1),-1==t||m.getChildAt(t)){for(var o,n=0;n<m.numChildren;n++)(o=m.getChildAt(n)).removeChild(o.check);if(t>=0){o=m.getChildAt(t);var i=-2;h&&(i=h.index),h=o.obj}-1==t||i==h.index?(h=null,u.id=null,u.label=null,u.text=""):(o.addChild(o.check),u.id=h.id,u.label=h.label,u.label&&(u.text=u.label.text)),e.OPTIMIZE||!zns&&OPTIMIZE||!u.stage||u.stage.update()}},Object.defineProperty(u,"selected",{get:function(){return h},set:function(e){zog("ZIM RadioButton - selected is read only")}}),Object.defineProperty(u,"selectedIndex",{get:function(){return h?h.index:-1},set:function(e){var t=e;l&&u.selectedIndex==t||u.setSelected(t)}}),this._enabled=!0,Object.defineProperty(u,"enabled",{get:function(){return u._enabled},set:function(e){t(u,e)}}),this.clone=function(){for(var t=e.copy(n),d=0;d<t.length;d++)t[d].label=t[d].label.clone();return u.cloneProps(new e.RadioButtons(o,t,i,r,a,s,l))},this.dispose=function(){for(var e=0;e<m.numChildren;e++)m.getChildAt(e).removeAllEventListeners();return u.removeAllEventListeners(),!0}},e.extend(e.RadioButtons,e.Container,"clone","zimContainer",!1),e.Pane=function(t,o,n,i,r,a,s,l,d,c,u,h,f,p,m,g,z){function v(e){b(),z.stage.update(),k.dispatchEvent("close"),e.stopImmediatePropagation()}function b(){function t(){z.removeChild(k);for(var t,o=0;o<k.numChildren;o++)if((t=k.getChildAt(o)).constructor==e.TextArea||t.constructor==e.Loader){var n={obj:t,depth:k.getChildIndex(t)};M.add(t,n),k.removeChild(t)}if(e.OPTIMIZE||!zns&&OPTIMIZE||z.stage.update(),a&&(isNaN(k.resetX)||(k.x=k.resetX),isNaN(k.resetY)||(k.y=k.resetY)),k.zimAccessibility){var i=k.zimAccessibility;i.resize(k),A?A.focus():k.zimTabTag.nextSibling.focus(),setTimeout(function(){i.talk("Pane has been closed.")},50)}}g>0?k.animate({obj:{alpha:0},time:g,call:t}):t()}function y(e,n){return e=Math.max(t/2,Math.min(z.getBounds().width-t/2,e)),n=Math.max(o/2,Math.min(z.getBounds().height-o/2,n)),{x:e,y:n}}var w;if(w=zob(e.Pane,arguments,"width, height, label, color, drag, resets, modal, corner, backingAlpha, shadowColor, shadowBlur, center, displayClose, backdropClose, backing, fadeTime, container",this))return w;z_d("58"),this.zimContainer_constructor(),this.type="Pane";var x="zim display - Pane(): Please pass in a reference to a container with bounds set as first parameter";if(zot(z)){if(!zimDefaultFrame)return void zog(x);z=zimDefaultFrame.stage}else{if(!z.getBounds)return void zog(x);if(zot(z.getStage))return void zog("zim display - Pane(): The container must have a stage property")}zot(t)&&(t=200),zot(o)&&(o=200),zot(n)&&(n=null),"string"!=typeof n&&"number"!=typeof n||(n=new e.Label(n,40,"arial","black")),zot(i)&&(i="white"),zot(r)&&(r=!1),zot(a)&&(a=!0),zot(s)&&(s=!0),zot(l)&&(l=20),zot(d)&&(d=.14),zot(c)&&(c="rgba(0,0,0,.3)"),zot(u)&&(u=20),zot(h)&&(h=!0),zot(f)&&(f=!0),r&&(f=!1),zot(p)&&(p=!0),zot(g)&&(g=0);var T=this.backdrop=new createjs.Shape,C=T.graphics;C.f("black"),C.drawRect(-5e3,-5e3,1e4,1e4),this.setBounds(-t/2,-o/2,t,o),T.alpha=d;var k=this;T.on("mousedown"==e.ACTIONEVENT?"mousedown":"click",p?v:function(e){e.stopImmediatePropagation()});var M=new e.Dictionary(!0);T.on("mousedown",function(e){e.stopImmediatePropagation()}),s&&this.addChild(T);var j;if(zot(m)?((C=(j=this.display=new createjs.Shape).graphics).f(i),C.rr(0,0,t,o,l),j.setBounds(0,0,t,o),j.regX=t/2,j.regY=o/2):j=m,f&&(j.cursor="pointer",j.on("mousedown"==e.ACTIONEVENT?"mousedown":"click",v)),-1!=c&&u>0&&(j.shadow=new createjs.Shadow(c,8,8,u)),j.on("click",function(e){e.stopImmediatePropagation()}),this.resetX,this.resetY,r){j.cursor="pointer";var E,S;j.on("mousedown",function(e){isNaN(k.resetX)&&(k.resetX=k.x),isNaN(k.resetY)&&(k.resetY=k.y),E=e.stageX-k.x,S=e.stageY-k.y,j.cursor="pointer"}),j.on("pressmove",function(t){var o=y(t.stageX-E,t.stageY-S);k.x=o.x,k.y=o.y;for(var n,i=0;i<k.numChildren;i++)(n=k.getChildAt(i)).constructor!=e.TextArea&&n.constructor!=e.Loader||n.resize();z.stage.update()}),this.on("pressup",function(e){j.cursor="pointer",z.stage.update()})}this.addChild(j),n&&(this.addChild(n),e.center(n,this),this.label=n,this.text=n.text,n.mouseEnabled=!1),Object.defineProperty(k,"text",{get:function(){return" "==n.text?"":n.text},set:function(e){n.text=e}}),this.hide=function(){b()};var A;this.show=function(){h&&isNaN(k.resetX)&&(k.x=z.getBounds().width/2,k.y=z.getBounds().height/2),z.addChild(k);for(var e=0;e<M.length;e++)k.addChildAt(M.objects[e].obj,M.objects[e].depth);if(g>0?(k.alpha=0,k.animate({alpha:1},g)):z.stage&&z.stage.update(),k.zimAccessibility){var t=k.zimAccessibility;setTimeout(function(){t.activatedObject&&(A=t.activatedObject.zimTabTag)},50),t.resize(k),t.tabIndex=k.zimTabIndex}return k},this.toggle=function(){return z.contains(k)?k.hide():k.show(),k},this.clone=function(){var v=n.x,b=n.y,y=k.cloneProps(new e.Pane(t,o,n.clone(),i,r,a,s,l,d,c,u,h,f,p,zot(m)?m.clone():null,g,z));return y.label.x=v,y.label.y=b,y},this.dispose=function(){return j.removeAllEventListeners(),k.removeChild(j),j=null,!0}},e.extend(e.Pane,e.Container,"clone","zimContainer",!1),e.Window=function(t,o,n,i,r,a,s,l,d,c,u,h,f,p,m,g,z,v,b,y,w,x,T){function C(){D.setBounds(0,0,t,o),I.graphics.f(n).rr(0,0,t,o,s),-1!=v&&b>0&&(I.shadow=new createjs.Shadow(v,8,8,b)),r>0&&_.graphics.c().s(i).ss(r).rr(0,0,t,o,s)}function k(){e.dragRect(X,new createjs.Rectangle(0,0,U?-D.scrollXMax:0,V?-D.scrollYMax:0))}function M(){pe=X.y,T&&me.immediate(pe),d&&j()}function j(){Y&&(Y.x=-X.x,Y.y=-X.y),U&&d&&(W.x=G.convert(X.x)),V&&d&&(N.y=Z.convert(X.y))}function E(t){e.Ticker.remove(M),te=!1,U&&f&&e.animate(W,{alpha:0},R.fadeTime),V&&f&&e.animate(N,{alpha:0},R.fadeTime)}function S(){if(!X.stage)return ue||(D.dispatchEvent("hoverout"),ue=!0),void e.Ticker.remove(S);Math.abs(re-X.stage.mouseX)>ce||Math.abs(ae-X.stage.mouseY)>ce?(ue||(D.dispatchEvent("hoverout"),ue=!0),ie=Date.now(),re=X.stage.mouseX,ae=X.stage.mouseY):Date.now()-ie>de&&((Math.abs(se-X.stage.mouseX)>ce||Math.abs(le-X.stage.mouseY)>ce)&&(D.contentMouse=X.globalToLocal(X.stage.mouseX,X.stage.mouseY),D.dispatchEvent("hoverover"),se=X.stage.mouseX,le=X.stage.mouseY,ue=!1),ie=Date.now())}function A(e){if(V&&D.stage&&D.hitTestPoint(D.stage.mouseX,D.stage.mouseY)){zot(e)&&(e=event);var t=e.detail?-19*e.detail:e.wheelDelta;pe+=t,pe=Math.max(-D.scrollYMax,Math.min(0,pe)),T||(D.scrollY=pe,X.stage.update())}}function P(t){T&&!ge&&t.stage&&(ge=!0,me=new e.Damp(D.scrollY,T),e.Ticker.add(function(){te||zot(pe)||(D.scrollY=me.convert(pe))},t.stage))}var O;if(O=zob(e.Window,arguments,"width, height, color, borderColor, borderWidth, padding, corner, swipe, indicatorActive, indicatorDrag, indicatorColor, indicatorAlpha, indicatorFade, slide, slideDamp, slideSnap, interactive, shadowColor, shadowBlur, paddingHorizontal, paddingVertical, scrollWheel, damp",this))return O;z_d("58.1"),this.zimContainer_constructor(),this.type="Window",zot(t)&&(t=300),zot(o)&&(o=200),zot(n)&&(n="#333"),zot(i)&&(i="#999"),zot(r)&&(r=1),zot(a)&&(a=10),zot(s)&&(s=0),zot(l)&&(l=!0),zot(d)&&(d=!0),zot(c)&&(c=!1),zot(u)&&(u=i),zot(h)&&(h=.3),zot(f)&&(f=!0),c&&(f=!1),zot(p)&&(p=!0),zot(m)&&(m=.6),zot(g)&&(g="vertical"),zot(z)&&(z=!0),zot(v)&&(v="rgba(0,0,0,.3)"),zot(b)&&(b=20),zot(w)&&(w=a),zot(y)&&(y=a),zot(x)&&(x=!0);var D=this;this.scrollX=this.scrollY=this.scrollXMax=this.scrollYMax=0;var I=this.backing=new createjs.Shape;this.addChild(I);var B=new createjs.Shape,L=B.graphics;this.addChild(B);var X=this.content=new e.Container;if(this.addChild(X),X.mask=B,!z)var Y=new createjs.Shape;if(r>0){var _=new createjs.Shape;this.addChild(_)}C();var R=this.indicator={};if(R.size=6,R.minSize=2*R.size,R.spacing=3.5+r/2,R.margin=0,R.corner=R.size/2,R.showTime=500,R.fadeTime=3e3,d){var W=this.hIndicator=new e.Shape,F=W.graphics;W.alpha=h,this.addChild(W),c&&W.drag({localBounds:!0});var N=this.vIndicator=new e.Shape,H=N.graphics;N.alpha=h,this.addChild(N),c&&N.drag({localBounds:!0})}var G,Z,U,V,q,K,Q,J,$,ee;this.update=function(){d&&(F.clear(),H.clear()),q=d?R.size+2*R.spacing:0,K=X.getBounds().width,Q=X.getBounds().height,U=K>t-y&&(!0===l||"auto"==l||"horizontal"==l),V=Q>o-w&&(!0===l||"auto"==l||"vertical"==l),D.scrollXMax=K+2*y-t+(V?q+R.margin:0),D.scrollYMax=Q+2*w-o+(U?q+R.margin:0),L.clear();var n=r/2,i=r/2,a=t-(V&&d?R.size+2*R.spacing:0)-(V?0:r),h=o-(U&&d?R.size+2*R.spacing:0)-(U?0:r);L.f("rgba(0,0,0,.01)").rr(n,i,a,h,s),z||(Y.graphics.c().f("red").dr(n,i,a,h),X.hitArea=Y);var f=Math.max(s,Math.min(R.corner,R.spacing)),p=f+r/2,m=f+(V?q:0)+r/2,g=f+r/2,v=f+(U?q:0)+r/2;if(U&&d&&(indicatorLength=Math.max(R.minSize,(t-p-m)*(t-p-m)/(K+y+R.margin)),F.f(u).rr(0,0,indicatorLength,R.size,R.corner),W.x=p,W.y=o-R.size-R.spacing,G=new e.Proportion(-D.scrollXMax,0,p,t-indicatorLength-m,-1),c)){W.setBounds(0,0,indicatorLength,R.size);b=new createjs.Rectangle(p,W.y,t-indicatorLength-p-m,0);W.dragRect(b),W.proportion=new e.Proportion(b.x,b.x+b.width,0,-D.scrollXMax),W.off("pressmove",J),J=W.on("pressmove",function(){X.x=W.proportion.convert(W.x)})}if(V&&d&&(indicatorLength=Math.max(R.minSize,(o-g-v)*(o-g-v)/(Q+w+R.margin)),H.f(u).rr(0,0,R.size,indicatorLength,R.corner),N.x=t-R.size-R.spacing,N.y=g,Z=new e.Proportion(-D.scrollYMax,0,g,o-indicatorLength-v,-1),c)){N.setBounds(0,0,R.size,indicatorLength);var b=new createjs.Rectangle(N.x,g,0,o-indicatorLength-g-v);N.dragRect(b),N.proportion=new e.Proportion(b.y,b.y+b.height,0,-D.scrollYMax),N.off("pressmove",$),$=N.on("pressmove",function(){pe=X.y=N.proportion.convert(N.y)})}j(),clearTimeout(ee),ee=setTimeout(function(){k()},300)},this.resize=function(e,n){zot(e)&&(e=t),zot(n)&&(n=o),t=e,o=n,C(),D.update(),pe=X.y,T&&me.immediate(pe)},this.add=function(e){P(e);{if(e.getBounds())return X.addChild(e),0==e.x&&(e.x=y),0==e.y&&(e.y=w),D.update(),D;zog("SwipeBox.add() - please add content with bounds set")}},this.remove=function(e){X.removeChild(e),D.update()};var te=!1;if(l&&X.on("mousedown",function(){te||e.Ticker.add(M,X.stage),te=!0,U&&d&&f&&e.animate(W,{alpha:h},R.showTime),V&&d&&f&&e.animate(N,{alpha:h},R.showTime)}),this.on("added",function(){P(D),l&&(e.drag({obj:X,currentTarget:!0,localBounds:!0,slide:p,slideDamp:m,slideSnap:(!0===l||"auto"==l||"vertical"==l)&&g}),X.getBounds()&&X.getBounds().width>0&&setTimeout(function(){k()},300))},null,!0),p?X.on("slidestop",E):X.on("mousedown",function(){X.stage.on("stagemouseup",E,null,!0)}),z){var oe,ne;X.on("mousedown",function(){oe=X.stage.mouseX,ne=Date.now()}),X.on("click",function(){Date.now()-ne<600&&Math.abs(X.stage.mouseX-oe)<5&&(D.contentMouse=X.globalToLocal(X.stage.mouseX,X.stage.mouseY),D.dispatchEvent("select"))}),X.on("mouseover",function(){ie=Date.now(),e.Ticker.add(S,X.stage)}),X.on("mouseout",function(){ue||(D.dispatchEvent("hoverout"),ue=!0),e.Ticker.remove(S)});var ie,re=0,ae=0,se=0,le=0,de=300,ce=2,ue=!1}var he,fe,pe=D.scrollY;x&&(he=window.addEventListener("mousewheel",A),fe=window.addEventListener("DOMMouseScroll",A));var me,ge=!1;Object.defineProperty(D,"scrollX",{get:function(){return X.x},set:function(e){X.x=e,j()}}),Object.defineProperty(D,"scrollY",{get:function(){return X.y},set:function(e){X.y=e,j()}}),this.clone=function(x){zot(x)&&(x=!0);var T=D.cloneProps(new e.Window(t,o,n,i,r,a,s,l,d,c,u,h,f,p,m,g,z,v,b,y,w));return x&&(D.content.cloneChildren(T.content),T.update()),T},this.dispose=function(){return x&&(window.removeEventListener("mousewheel",he),window.removeEventListener("DOMMouseScroll",fe)),D.removeAllEventListeners(),W.off("pressmove",J),N.off("pressmove",$),X.removeAllEventListeners(),e.Ticker.remove(S),e.Ticker.remove(M),e.noDrag(X),!0}},e.extend(e.Window,e.Container,"clone","zimContainer",!1),e.Waiter=function(t,o,n,i,r,a,s,l){var d;if(d=zob(e.Waiter,arguments,"container, speed, color, circleColor, corner, shadowColor, shadowBlur, fadeTime",this))return d;z_d("59"),this.zimContainer_constructor(),this.type="Waiter";var c="zim display - Waiter(): Please pass in a reference to a container with bounds set as first parameter";if(zot(t)){if(!zimDefaultFrame)return void zog(c);t=zimDefaultFrame.stage}else{if(!t.getBounds)return void zog(c);if(zot(t.getStage))return void zog("zim display - Waiter(): The container must have a stage property")}zot(o)&&(o=600),zot(n)&&(n="orange"),zot(i)&&(i="white"),zot(r)&&(r=16),zot(a)&&(a="rgba(0,0,0,.3)"),zot(s)&&(s=14),zot(l)&&(l=0);var u=12;this.setBounds(-52,-20,104,40);var h=this,f=this.display=new createjs.Shape;this.addChild(f),f.setBounds(0,0,104,40),f.regX=52,f.regY=20;var p=f.graphics;p.f(n),p.rr(0,0,104,40,r),-1!=a&&s>0&&(f.shadow=new createjs.Shadow(a,3,3,s)),f.on("click",function(e){e.stopImmediatePropagation()});var m=new e.Container;this.addChild(m);for(var g,z=0;z<3;z++)(g=new createjs.Shape).graphics.f(i).dc(0,0,u),g.x=32*(z-1),m.addChild(g),g.cache(-u,-u,24,24),g.alpha=0;this.hide=function(){function e(){if(h.parent&&h.parent.removeChild(h),t.stage.update(),h.zimAccessibility){var e=h.zimAccessibility;e.resize(h),v?v.focus():h.zimTabTag.nextSibling.focus(),setTimeout(function(){e.talk("Waiter has finished.")},50)}}l>0?h.animate({obj:{alpha:0},time:l,call:e}):e()};var v;this.show=function(){for(var e,n=0,i=0;i<m.numChildren;i++)h.alpha=0,createjs.Tween.get(h,{override:!0}).to({alpha:1},300),setTimeout(function(){e=m.getChildAt(n),createjs.Tween.get(e,{loop:!0}).to({alpha:1},o/3/2).wait(o/3).to({alpha:0},o/3).wait(o-o/3-o/3/2),n++},i*o/3);if(h.ticker=createjs.Ticker.on("tick",function(){t.stage.update()}),h.x=t.getBounds().width/2,h.y=t.getBounds().height/2,t.addChild(h),l>0&&(h.alpha=0,h.animate({alpha:1},l)),h.zimAccessibility){var r=h.zimAccessibility;setTimeout(function(){r.activatedObject&&(v=r.activatedObject.zimTabTag)},50),r.resize(h),r.talk(h.zimTabTag.getAttribute("aria-label"))}return h},this.clone=function(){return h.cloneProps(new e.Waiter(t,o,n,i,r,a,s,l))},this.dispose=function(){return h.ticker&&createjs.Ticker.off("tick",h.ticker),f.removeAllEventListeners(),h.removeChild(f),h.removeChild(m),f=null,m=null,!0}},e.extend(e.Waiter,e.Container,"clone","zimContainer",!1),e.Indicator=function(t,o,n,i,r,a,s,l,d,c,u,h,f,p){function m(t){t>=n&&(t=-1);for(var o,a=0;a<n;a++)o=d&&a<t?i:r,a==t&&(o=i),w.getChildAt(a).color=o;v.zimAccessibility&&v.zimAccessibility.changeTitle(v),e.OPTIMIZE||!zns&&OPTIMIZE||!v.stage||v.stage.update()}var g;if(g=zob(e.Indicator,arguments,"width, height, num, color, offColor, borderColor, backingColor, indicatorType, fill, scale, lightScale, press, shadowColor, shadowBlur",this))return g;z_d("60"),this.zimContainer_constructor(),this.type="Indicator",zot(t)&&(t=300),zot(o)&&(o=50),zot(n)&&(n=6),zot(i)&&(i="#f58e25"),zot(r)&&(r="#666"),r<0&&(r="rgba(0,0,0,.01)"),a<0&&(a=null),zot(s)&&(s=-1),zot(l)&&(l="dot"),zot(d)&&(d=!1),zot(c)&&(c=1),zot(u)&&(u=1),zot(h)&&(h=!1),zot(f)&&(f="rgba(0,0,0,.3)"),zot(p)&&(p=5);var z="mousedown"==e.ACTIONEVENT?"mousedown":"click",v=this;this.lights=[];var b;new e.Container;if(-1!=s){var y=new e.Rectangle(t,o,s);this.addChild(y),this.backing=y}var w=this.lightsContainer=new e.Container;this.addChild(w);var x,T=.5*o,C=t/(n+1),k=new createjs.Shape;"square"==l||"box"==l?k.graphics.f("black").dr(-C/2/u+T/2,-o/2+T/2,C/u,o):k.graphics.f("black").dr(-C/2/u,-o/2,C/u,o);for(var M=0;M<n;M++)"square"==l||"box"==l?((x=new e.Rectangle(T,T,r,a)).regX=x.width/2,x.regY=x.height/2):x=new e.Circle(T/2,r,a),this.lights.push(x),x.znum=M,x.scaleX=x.scaleY=u,x.hitArea=k,x.x=C+C*M,x.y=o/2,w.addChild(x);if(w.setBounds(0,0,t,o),w.regX=w.x=t/2,w.regY=w.y=o/2,this.addChild(w),-1!=f&&p>0&&(w.shadow=new createjs.Shadow(f,2,2,p)),h){w.cursor="pointer";w.on(z,function(e){b!=e.target.znum&&(m(b=e.target.znum),v.dispatchEvent("change"))})}w.scaleX=w.scaleY=c,Object.defineProperty(this,"selectedIndex",{get:function(){return b},set:function(t){b=Math.floor(t),m(b=e.constrain(b,-1,n-1))}}),Object.defineProperty(this,"num",{get:function(){return n},set:function(e){zon&&zog("num is read only")}}),this.clone=function(){return v.cloneProps(new e.Indicator(t,o,n,i,r,a,s,l,d,c,u,h,f,p))},this.dispose=function(){return v.removeAllEventListeners(),!0}},e.extend(e.Indicator,e.Container,"clone","zimContainer",!1),e.Stepper=function(o,n,i,r,a,s,l,d,c,u,h,f,p,m,g,z,v,b,y,w,x,T,C,k,M,j,E,S,A,P){function O(e){var t=String(e).split(".")[1];return t=t?t.length:0}function D(t,o,n){if(m){fe=N.stage.mouseX,holdY=N.stage.mouseY,0==fe&&(fe=1),0==holdY&&(holdY=1),v||(b=1),pe=new e.Proportion(0,y,z,z*b);var i=z;J=setTimeout(function(){function e(){$=setTimeout(function(){var r=t;if(v){var a=Math.abs(K-fe),l=Math.abs(Q-holdY);s?(o||n||(a=0),n&&(l=0)):(o||n||(l=0),n&&(a=0)),(a>=10||l>=10)&&(a>l?(H=s?k:C,r=K-fe>0?1:-1,i=pe.convert(Math.abs(fe-K))):(H=s?C:k,r=Q-holdY>0?1:-1,"number"==w&&(r*=-1),i=pe.convert(Math.abs(holdY-Q))))}B(r),e()},i)}de=!0,e()},g)}}function I(){N.zimAccessibility&&N.zimAccessibility.aria||(de=!1,clearTimeout(J),clearTimeout($))}function B(t){var n;if("number"==w){var i=W;W+=H*t*G,W=e.decimals(W,F),h?W>N.max?W=N.min:W<N.min&&(W=N.max):(W>N.max?(W=1==C?N.max:i,f&&(he.cursor="default")):f&&(he.cursor="pointer"),W<N.min&&(W=1==C?N.min:i))}else{if(n=R+t,h)n>o.length-1&&(n=0),n<0&&(n=o.length-1);else{if(n>o.length-1)return void(f&&(he.cursor="default"));if(f&&(he.cursor="pointer"),n<0)return}R=n}L("number"==w?W:o[R],"number"==w?W:R),N.dispatchEvent("change")}function L(t,n){R=n,f&&("number"==w&&0!=t&&F>0&&(t=e.decimals(t,F,!0)),a.text=t,a.x=he.x+he.getBounds().width/2,a.y=he.y+(he.getBounds().height-a.getBounds().height)/2),l&&(te.alpha=1,oe.color=i,te.cursor="pointer",ne.alpha=1,ie.color=i,ne.cursor="pointer",h||("number"==w?(R==N.min&&(G>0?X():Y()),R==N.max&&(G>0?Y():X())):(0==R&&(s?Y():X()),R==o.length-1&&(s?X():Y())))),!ne||e.OPTIMIZE||!zns&&OPTIMIZE||!ne.stage?!a||e.OPTIMIZE||!zns&&OPTIMIZE||!a.stage||a.stage.update():ne.stage.update(),N.zimAccessibility&&N.zimAccessibility.changeTitle(N,null,!0)}function X(){l&&(te.alpha=.8,oe.color="#aaa",te.cursor="default")}function Y(){l&&(ne.alpha=.8,ie.color="#aaa",ne.cursor="default")}var _;if(_=zob(e.Stepper,arguments,"list, width, color, borderColor, label, vertical, arrows, corner, shadowColor, shadowBlur, loop, display, press, hold, holdDelay, holdSpeed, drag, dragSensitivity, dragRange, stepperType, min, max, step, step2, arrows2, arrows2Scale, keyEnabled, keyArrows, rightForward, downForward",this))return _;z_d("61"),this.zimContainer_constructor(),this.type="Stepper",zot(o)&&(o=[0,1,2,3,4,5,6,7,8,9]),zot(n)&&(n=200),zot(i)&&(i="white"),zot(r)&&(r=null),zot(a)&&(a=""),"string"!=typeof a&&"number"!=typeof a||(a=new e.Label(a,64,"arial","#555",null,null,null,"center")),zot(s)&&(s=!1),zot(l)&&(l=!0),zot(d)&&(d=16),zot(c)&&(c="rgba(0,0,0,.3)"),zot(u)&&(u=14),zot(h)&&(h=!1),zot(f)&&(f=!0),zot(p)&&(p=!0),zot(m)&&(m=!0),zot(g)&&(g=400),zot(z)&&(z=200),zot(v)&&(v=!0),(zot(b)||b<=0)&&(b=.1),zot(y)&&(y=200),zot(w)&&(w="list"),zot(x)&&(x=0),zot(T)&&(T=100),zot(C)&&(C=1),zot(k)&&(k=C),zot(M)&&k!=C&&"number"==w&&(M=!0),zot(j)&&(j=.5),zot(E)&&(E=!0),zot(S)&&(S=!0),zot(A)&&(A=!0),zot(P)&&(P="number"!=w);var R,W,F,N=this,H=C,G=1;if("number"==w){if(x=Number(x),T=Number(T),NaN==x&&(x=0),NaN==T&&(T=100),T<x){G=-1;var Z=T;T=x,x=Z,W=T}else W=x;this.min=x,this.max=T,0>x&&0<T&&(W=0),C=Math.abs(C),F=Math.max(O(C),O(k))}else if("letter"==w){o="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),"string"!=typeof x&&(x="A"),"string"!=typeof T&&(T="Z"),x=x.substr(0,1).toUpperCase(),T=T.substr(0,1).toUpperCase();var U=o.indexOf(x);U<0&&(x="A",U=0);var V=o.indexOf(T);V<0&&(T="Z",V=o.length),V<U&&(o.reverse(),U=o.length-1-U,V=o.length-1-V),o=o.splice(U,V-U+1)}else w="list";var q,K=0,Q=0;v&&this.on("mousedown",function(){N.zimAccessibility&&N.zimAccessibility.aria||(this.stage.mouseMoveOutside=!0,q=this.stage.on("stagemousemove",function(e){K=e.rawX,Q=e.rawY}))},null,!0),this.label=a,a.mouseChildren=!1,a.mouseEnabled=!1;var J,$,ee,te,oe,ne,ie,re,ae,se,le,de=!1,ce=!1;if(l||M){var ue=new createjs.Shape;ue.graphics.f("rgba(255,255,255,.11)").r(0,0,150,150),ue.regX=75,ue.regY=87.5}if(l&&(te=this.prev=new e.Container,this.addChild(te),te.hitArea=ue,oe=this.arrowPrev=new e.Triangle(100,80,80,i),-1!=c&&u>0&&(te.shadow=new createjs.Shadow(c,3,3,u)),te.addChild(oe),te.cursor="pointer",te.on("mousedown",function(e){if(!N.zimAccessibility||!N.zimAccessibility.aria){H=C;var t=s?P?1:-1:A?-1:1;B(t),D(t)}}),m&&te.on("pressup",I),s?(te.rotation=180,te.x=n/2,te.y=f?te.height+25+100+te.height/2+25:2*te.height):(te.rotation=-90,te.x=te.height/2,te.y=te.width/2)),f){var he=this.textBox=new createjs.Shape;he.cursor="pointer",this.addChild(he),he.setBounds(0,0,n,100),null!=r&&he.graphics.s(r).ss(1.5),he.graphics.f(i).rr(0,0,n,100,d),-1!=c&&u>0&&(he.shadow=new createjs.Shadow(c,3,3,u)),l&&(s?l&&(he.y=oe.height+25):l&&(he.x=oe.height+25)),this.addChild(a),o.length>0&&(R=0,a.text=o[R]),a.x=50+he.x+he.getBounds().width/2,a.y=he.y+(he.getBounds().height-a.getBounds().height)/2,he.on("mousedown",function(e){N.zimAccessibility&&N.zimAccessibility.aria||(p&&B(1),D(1,!0),"number"==w&&(clearTimeout(ee),ce=!0,ee=setTimeout(function(){ce=!1},200)))}),he.on("pressup",function(){N.zimAccessibility&&N.zimAccessibility.aria||ce&&(L(W=Math.round(W),W),N.dispatchEvent("change"))})}else o.length>0&&(R=0);l&&(ne=this.next=new e.Container,this.addChild(ne),ne.hitArea=ue.clone(),ie=this.arrowNext=new e.Triangle(100,80,80,i),-1!=c&&u>0&&(ne.shadow=new createjs.Shadow(c,3,3,u)),ne.addChild(ie),ne.cursor="pointer",ne.on("mousedown",function(e){if(!N.zimAccessibility||!N.zimAccessibility.aria){H=C;var t=s?P?-1:1:A?1:-1;B(t),D(t)}}),m&&ne.on("pressup",I),s?(ne.rotation=0,ne.x=n/2,ne.y=ne.getBounds().height/2):(ne.rotation=90,ne.x=f?he.x+he.getBounds().width+ne.getBounds().height/2+25:te.x+te.getBounds().width,ne.y=ne.getBounds().width/2));var fe,pe;m&&f&&he.on("pressup",I),M&&((re=this.prev2=new e.Container).hitArea=ue.clone(),ae=this.arrowPrev2=new e.Triangle(100,80,80,"rgba(0,0,0,.2)",i,2),re.addChild(ae),re.cursor="pointer",re.sca(j),re.alpha=.5,re.on("mousedown",function(e){if(!N.zimAccessibility||!N.zimAccessibility.aria){H=k;var t=s?A?-1:1:P?1:-1;B(t),D(t,null,!0)}}),m&&re.on("pressup",I),(se=this.next2=new e.Container).hitArea=ue.clone(),le=this.arrowNext2=new e.Triangle(100,80,80,"rgba(0,0,0,.2)",i,2),se.addChild(le),se.cursor="pointer",se.sca(j),se.alpha=.5,se.on("mousedown",function(e){if(!N.zimAccessibility||!N.zimAccessibility.aria){H=k;var t=s?A?1:-1:P?-1:1;B(t),D(t,null,!0)}}),m&&se.on("pressup",I),s?(re.y=this.height/2,re.x=-re.width/2-25*Math.max(.2,Math.min(1,j)),re.rotation=270,se.y=this.height/2,se.x=this.width+se.width/2+25*Math.max(.2,Math.min(1,j)),se.rotation=90):(se.x=this.width/2,se.y=-se.height/2-25*Math.max(.2,Math.min(1,j)),se.rotation=0,re.x=this.width/2,re.y=this.height+re.height/2+25*Math.max(.2,Math.min(1,j)),re.rotation=180),this.addChild(re,se)),L("number"==w?W:o[R],"number"==w?W:R),Object.defineProperty(this,"selectedIndex",{get:function(){return"number"==w?N.stepperArray.indexOf(N.currentValue):R},set:function(e){zot(e)||(e=Math.min(o.length-1,Math.max(0,e)),L(o[R=e],R))}}),Object.defineProperty(this,"currentValue",{get:function(){return"number"==w?W:o[R]},set:function(e){if(!zot(e))if("number"==w){if(e=Number(e),N.max>N.min){if(e>N.max||e<N.min)return}else if(e<N.max||e>N.min)return;L(W=e,W)}else{if(!(o.indexOf(e)>-1))return;if((e=o.indexOf(e))==N.selectedIndex)return;L(o[R=e],R)}}}),Object.defineProperty(this,"currentValueEvent",{get:function(){return N.currentValue},set:function(e){String(e)!=String(N.currentValue)&&(N.currentValue=e,N.dispatchEvent("change"))}}),Object.defineProperty(this,"loop",{get:function(){return h},set:function(e){h=e,"number"==w?L(W,W):L(o[N.selectedIndex],N.selectedIndex)}}),Object.defineProperty(this,"stepperArray",{get:function(){if("number"==w){o=[];for(var e=N.min;e<=N.max;e+=Math.min(C,k))o.push(e)}return o},set:function(e){o=e,N.selectedIndex=N.selectedIndex}}),this._enabled=!0,Object.defineProperty(N,"enabled",{get:function(){return N._enabled},set:function(n){t(N,n),n?("number"==w?L(W,W):L(o[N.selectedIndex],N.selectedIndex),window.addEventListener("keydown",N.keyDownEvent)):(X(),Y(),window.removeEventListener("keydown",N.keyDownEvent),f&&(a.mouseChildren=!1),f&&(a.mouseEnabled=!1)),!ne||e.OPTIMIZE||!zns&&OPTIMIZE||!ne.stage?!a||e.OPTIMIZE||!zns&&OPTIMIZE||!a.stage||a.stage.update():ne.stage.update()}});var me=!1,ge=!1,ze=!1;this.on("mousedown",function(){N.zimAccessibility&&N.zimAccessibility.aria||(N.focus=!0,me=!0,ge=!1,ze=!1)}),this.keyDownEvent=function(e){if(N.focus){e||(e=event);var t=e.keyCode;if(S&&t>=37&&t<=40){var o=P?40:38,n=A?39:37,i=P?38:40,r=A?37:39;t==o||t==n?(H=s&&t==o||!s&&t==n?C:k,B(1)):t!=i&&t!=r||(H=s&&t==i||!s&&t==r?C:k,B(-1))}if(E)if("number"==w){var l;!e.shiftKey&&t>=48&&t<=57?l=t-48:t>=96&&t<=105?l=t-96:190==t?ge=!0:173==t||189==t?(N.currentValue=-1*N.currentValue,N.dispatchEvent("change"),ze=!ze):46==t&&(me=!0,ge=!1),me&&!zot(l)?(ge&&(l/=10),ze&&(l*=-1),N.currentValue=l,me=!1,N.dispatchEvent("change")):zot(l)||(ge&&(l=String(l/10).substr(1)),N.currentValue=Number(Math.floor(Number(a.text))+String(l)),N.dispatchEvent("change"))}else{var d=N.currentValue;N.currentValue=String.fromCharCode(e.keyCode),N.currentValue!=d&&N.dispatchEvent("change")}}},window.addEventListener("keydown",this.keyDownEvent),this.next=function(){B(1)},this.prev=function(){B(-1)},this.clone=function(){return N.cloneProps(new e.Stepper(o,n,i,r,a.clone(),s,l,d,c,u,h,f,p,m,g,z,v,b,y,w,x,T,C,k,M,j,E,S,A,P))},this.dispose=function(){return N.removeAllEventListeners(),window.removeEventListener("keydown",N.keyDownEvent),N.stage&&N.stage.off(q),!0}},e.zut=function(t){if(zot(t)||!t.key)return!0;e.async("http://zimjs.com/code/gamdata.php?id="+t.key+"&player="+t.player+"&score="+t.score+"&reverse="+t.info.reverse+"&total="+t.info.total+"&allowZero="+t.info.allowZero,t.info.type)},e.extend(e.Stepper,e.Container,"clone","zimContainer",!1),e.Slider=function(o,n,i,r,a,s,l,d,c,u,h,f){function p(e){return 0==i?e:Math.round(e/i)*i}function m(t){var i=T.globalToLocal(t.stageX,t.stageY),a=z(i.x-L,i.y-X,j);d?(r.x=a.x,C=p((a.y-j.y)/j.height*(o-n)),r.y=j.y+C*j.height/(o-n),C+=n,r.y!=k&&T.dispatchEvent("change"),k=r.y):(C=p((a.x-j.x)/j.width*(n-o)),r.x=j.x+C*j.width/(n-o),C+=o,r.y=a.y,r.x!=k&&T.dispatchEvent("change"),k=r.x),g(),e.OPTIMIZE||!zns&&OPTIMIZE||!T.stage||T.stage.update()}function g(){T.zimAccessibility&&T.zimAccessibility.changeTitle(T,null,!0)}function z(e,t,o){return e=Math.max(o.x,Math.min(o.x+o.width,e)),t=Math.max(o.y,Math.min(o.y+o.height,t)),{x:e,y:t}}var v;if(v=zob(e.Slider,arguments,"min, max, step, button, barLength, barWidth, barColor, vertical, useTicks, inside, keyArrows, keyArrowsStep",this))return v;if(z_d("62"),this.zimContainer_constructor(),this.type="Slider",zot(o)&&(o=0),zot(n)&&(n=10),n-o!=0){if(zot(i)&&(i=0),zot(a)&&(a=300),zot(s)&&(s=3),zot(l)&&(l="#666"),zot(d)&&(d=!1),zot(c)&&(c=!1),zot(u)&&(u=!1),zot(h)&&(h=!0),zot(f)&&(f=(n-o)/100),zot(r)){var b=30,y=40;d&&(b=50,y=40),r=new e.Button(b,y,"","#fff","#ddd","#666",1,0,null,null,30)}r.rollPersist=!0;var w,x;d?(w=r.width,u?(x=a,this.setBounds(0,0,w,x)):(x=a+r.height,this.setBounds(-r.width/2,-r.height/2,w,x))):(x=r.height,u?(w=a,this.setBounds(0,0,w,x)):(w=a+r.width,this.setBounds(-r.width/2,-r.height/2,w,x)));var T=this,C=o,k=0;this.button=r,this.cursor="pointer";var M,j,E,S,A;if(c&&0!=i){S=this.ticks=new e.Shape,this.addChild(S),(A=S.graphics).ss(1).s(l);var P=Math.round((n-o)/i),O=(n-o)/P;if(O!=i&&zon&&zog("zim.Slider() : non-divisible step ("+i+") adjusted"),i=O,u)D=(a-(d?r.height:r.width))/P;else var D=a/P}if(d){I=u?r.height/2:0;if(c&&0!=i){for(B=0;B<=P;B++)A.mt(0,I+D*B).lt(20,I+D*B);S.x=10}(M=this.bar=new e.Rectangle(s,a,l)).expand(20,0),this.addChild(M),e.centerReg(r),this.addChild(r),E=M.getBounds(),j=new createjs.Rectangle(E.width/2,E.y+I,0,E.height-2*I)}else{var I=u?r.width/2:0;if(c&&0!=i){for(var B=0;B<=P;B++)A.mt(I+D*B,0).lt(I+D*B,-20);S.y=-10}(M=this.bar=new e.Rectangle(a,s,l)).expand(0,20),this.addChild(M),e.centerReg(r),this.addChild(r),E=M.getBounds(),j=new createjs.Rectangle(E.x+I,E.height/2,E.width-2*I,0)}r.x=j.x,r.y=j.y;var L,X;r.on("mousedown",function(e){T.focus=!0;var t=T.globalToLocal(e.stageX,e.stageY);L=t.x-r.x,X=t.y-r.y,T.stage&&(T.stage.mouseMoveOutside=!0)}),r.on("pressmove",function(e){m(e)}),M.on("mousedown",function(e){L=0,X=0,T.zimAccessibility&&T.zimAccessibility.aria||m(e)}),Object.defineProperty(this,"currentValue",{get:function(){return C},set:function(t){zot(t)||(o<n?(t<o&&(t=o),t>n&&(t=n)):(t>o&&(t=o),t<n&&(t=n)),C=t=p(t),d?(r.y=(t-n)/(o-n)*j.height+I,k=r.y):(r.x=(t-o)/(n-o)*j.width+I,k=r.x),g(),e.OPTIMIZE||!zns&&OPTIMIZE||!T.stage||T.stage.update())}}),Object.defineProperty(this,"currentValueEvent",{get:function(){return C},set:function(e){e!=T.currentValue&&(T.currentValue=e,T.dispatchEvent("change"))}}),Object.defineProperty(this,"min",{get:function(){return o},set:function(e){zon&&zog("min is read only")}}),Object.defineProperty(this,"max",{get:function(){return n},set:function(e){zon&&zog("max is read only")}}),Object.defineProperty(this,"step",{get:function(){return i},set:function(e){zon&&zog("step is read only")}}),this.keyDownEvent=function(e){(T.focus||!T.zimAccessibility&&h)&&(37==e.keyCode||40==e.keyCode?T.currentValueEvent-=i>0?i:f:38!=e.keyCode&&39!=e.keyCode||(T.currentValueEvent+=i>0?i:f))},window.addEventListener("keydown",this.keyDownEvent),this._enabled=!0,Object.defineProperty(T,"enabled",{get:function(){return T._enabled},set:function(e){t(T,e),e?window.addEventListener("keydown",T.keyDownEvent):window.removeEventListener("keydown",T.keyDownEvent)}}),this.clone=function(){return T.cloneProps(new e.Slider(o,n,i,r.clone(),a,s,l,d,c,u,h,f))},this.dispose=function(){return window.removeEventListener("keydown",T.keyDownEvent),r.removeAllEventListeners(),!0}}else zog("ZIM Slider range must not be 0")},e.extend(e.Slider,e.Container,"clone","zimContainer",!1),e.Dial=function(o,n,i,r,a,s,l,d,c,u,h,f,p,m,g,z){function v(e){return 0==i?e:Math.round(e/i)*i}function b(){x.zimAccessibility&&x.zimAccessibility.changeTitle(x,null,!0)}function y(t){var r;t<0&&(t+=360),t%=360,0!=i?(r=v((t=Math.min(t,360-360/(A+1)))/(360-360/(A+1))*(n-o)),D.rotation=r*(360-360/(A+1))/(n-o)):(D.rotation=t,r=t/360*(n-o)),r!=k&&(k=r,C=r+o,x.dispatchEvent("change"),e.OPTIMIZE||!zns&&OPTIMIZE||!x.stage||x.stage.update()),b()}var w;if(w=zob(e.Dial,arguments,"min, max, step, width, color, indicatorColor, indicatorScale, indicatorType, innerCircle, innerScale, useTicks, innerTicks, tickColor, limit, keyArrows, keyArrowsStep",this))return w;if(z_d("63"),this.zimContainer_constructor(),this.type="Dial",zot(o)&&(o=0),zot(n)&&(n=10),n-o!=0){zot(i)&&(i=1),zot(r)&&(r=100),zot(a)&&(a="#666"),zot(s)&&(s="#222"),zot(l)&&(l=1),zot(d)&&(d="arrow"),zot(c)&&(c=!0),zot(u)&&(u=.5),zot(h)&&(h=!0),zot(f)&&(f=!1),zot(p)&&(p=s),zot(m)&&(m=!0),zot(g)&&(g=!0),zot(z)&&(z=(n-o)/100);var x=this;this.cursor="pointer";var T=r/2,C=o,k=0,M=this.backing=new e.Circle(T,a);if(this.addChild(M),c){var j=f?"rgba(0,0,0,.2)":"rgba(0,0,0,.1)";"black"!=a&&"#000"!=a&&"#000000"!=a&&"#111"!=a&&"#111111"!=a||(j="#222");var E=this.inner=new e.Circle(T*u,j);if(this.addChild(E),!f){var S=this.inner2=new e.Circle(T*(u-.1),"rgba(0,0,0,.1)");this.addChild(S)}}var A=Math.abs(n-o)/i;if(h&&0!=i){ticks=this.ticks=new e.Container,this.addChild(ticks);for(var P,O=0;O<A+1;O++)(P=new e.Rectangle(1,.2*T,p)).regY=T*(f?u-.05:1.28),P.regX=.5,P.rotation=360/(A+1)*O,ticks.addChild(P)}if(this.setBounds(-T,-T,r,r),"dot"==d||"circle"==d){var D=this.indicator=new e.Container,I=this.indicatorShape=new e.Circle(.19*T,s);D.addChild(I),e.sca(D,l),D.regY=T-D.getBounds().width*l/2-.07*T}else if("line"==d||"rectangle"==d){var D=this.indicator=new e.Container,I=this.indicatorShape=new e.Rectangle(.1*T,.3*T,s);D.addChild(I),e.sca(D,l),D.regY=T-D.getBounds().width*l/2-.07*T,D.regX=.05*T}else{var D=this.indicator=new e.Container,I=this.indicatorShape=new e.Triangle(.4*T,.4*T,.4*T,s);D.addChild(I),e.sca(D,l),D.regY=T-D.getBounds().height*l*(f?.85:.75),f&&(I.rotation=180)}D.regY/=l,this.addChild(D);var B,L,X,Y,_=0;this.on("mousedown",function(){if(!x.zimAccessibility||!x.zimAccessibility.aria){B=D.rotation;var e=x.parent.globalToLocal(x.stage.mouseX,x.stage.mouseY),t=e.x-x.x,o=x.y-e.y;L=180*Math.atan2(t,o)/Math.PI;var n=(new Date).getTime();X=x.on("pressmove",function(){e=x.parent.globalToLocal(x.stage.mouseX,x.stage.mouseY),t=e.x-x.x,o=x.y-e.y;var n=B+180*Math.atan2(t,o)/Math.PI-L;m&&(n<0&&(n+=360),n%=360,Math.abs(n-_)>180)||(_=n,y(n))}),Y=this.on("pressup",function(){(new Date).getTime()-n<200&&(e=x.parent.globalToLocal(x.stage.mouseX,x.stage.mouseY),t=e.x-x.x,o=x.y-e.y,y(180*Math.atan2(t,o)/Math.PI)),B=D.rotation,x.off("pressmove",X),x.off("pressup",Y)})}}),Object.defineProperty(this,"currentValue",{get:function(){return C},set:function(t){zot(t)||(o<n?(t<o&&(t=o),t>n&&(t=n)):(t>o&&(t=o),t<n&&(t=n)),C=t,t=v(t),D.rotation=0!=i?(t-o)*(360-360/(A+1))/(n-o):360*(t-o)/(n-o),k=t-o,_=D.rotation,b(),e.OPTIMIZE||!zns&&OPTIMIZE||!x.stage||x.stage.update())}}),Object.defineProperty(this,"currentValueEvent",{get:function(){return C},set:function(e){e!=x.currentValue&&(x.currentValue=e,x.dispatchEvent("change"))}}),Object.defineProperty(this,"min",{get:function(){return o},set:function(e){zon&&zog("min is read only")}}),Object.defineProperty(this,"max",{get:function(){return n},set:function(e){zon&&zog("max is read only")}}),Object.defineProperty(this,"step",{get:function(){return i},set:function(e){zon&&zog("step is read only")}}),this.keyDownEvent=function(e){(x.focus||!x.zimAccessibility&&g)&&(37==e.keyCode||40==e.keyCode?x.currentValueEvent-=i>0?i:z:38!=e.keyCode&&39!=e.keyCode||(x.currentValueEvent+=i>0?i:z))},window.addEventListener("keydown",this.keyDownEvent),this._enabled=!0,Object.defineProperty(x,"enabled",{get:function(){return x._enabled},set:function(e){t(x,e),e?window.addEventListener("keydown",x.keyDownEvent):window.removeEventListener("keydown",x.keyDownEvent)}}),this.clone=function(){return x.cloneProps(new e.Dial(o,n,i,r,a,s,l,d,c,u,h,f,p,m,g,z))},this.dispose=function(){return x.removeAllEventListeners(),!0}}else zog("ZIM Dial range must not be 0")},e.extend(e.Dial,e.Container,"clone","zimContainer",!1),e.Tabs=function(o,n,i,r,a,s,l,d,c,u,h,f,p,m){function g(e){var t=i[y];t&&(x[y].color=zot(t.offColor)?s:t.offColor,d||(x[y].enabled=!0)),(t=i[y=e])&&(x[y].color=zot(t.color)?r:t.color,d||(x[y].enabled=!1))}var z;if(z=zob(e.Tabs,arguments,"width, height, tabs, color, rollColor, offColor, spacing, currentEnabled, corner, labelColor, flatBottom, keyEnabled, gradient, gloss",this))return z;z_d("65"),this.zimContainer_constructor(),this.type="Tabs",zot(o)&&(o=240),zot(n)&&(n=60),(zot(i)||i.length<=0)&&(i=[{label:1},{label:2},{label:3},{label:4}]),zot(r)&&(r="#333"),zot(a)&&(a="#555"),zot(s)&&(s="#777"),zot(d)&&(d=!1),zot(l)&&(l=1),zot(c)&&(c=0),zot(u)&&(u="white"),zot(h)&&(h=!0),zot(f)&&(f=!0);var v=this;this.keyEnabled=f;var b,y=0,w=[],x=[],T=i.length,C=(o-l*(T-1))/T;if("number"==typeof i[0]||"string"==typeof i[0])for(S=0;S<i.length;S++)i[S]={label:String(null!=i[S])?i[S]:"1"};for(var k,M,j=0,E=0,S=0;S<i.length;S++)zot((k=i[S]).width)&&E++,j+=zot(k.width)?C:k.width;if(j>o-l*(T-1))for(S=0;S<i.length;S++)(k=i[S]).width=(o-l*(T-1))/j*(zot(k.width)?C:k.width);else if(Math.round(j)<Math.round(o-l*(T-1)))if(E>0)for(M=(T*C-(j-E*C))/E,S=0;S<i.length;S++)(k=i[S]).width=zot(k.width)?M:k.width;else zon&&zog("ZIM Tabs - total less than width"),o=j+l*(T-1);var A,P=0;for(S=0;S<i.length;S++)zot((k=i[S]).label)&&(k.label=" "),A=0==S?zot(k.color)?r:k.color:zot(k.offColor)?s:k.offColor,"string"!=typeof k.label&&"number"!=typeof k.label||(k.label=new e.Label(k.label,n/2,"arial",u)),(b=new e.Button(zot(k.width)?C:k.width,n,k.label,A,zot(k.rollColor)?a:k.rollColor,null,null,c,-1,null,null,p,m,h)).on("mousedown"==e.ACTIONEVENT?"mousedown":"click",function(t){g(t.currentTarget.znum),v.dispatchEvent("change"),e.OPTIMIZE||!zns&&OPTIMIZE||!v.stage||v.stage.update()}),b.znum=S,k.label.znum=S,b.type="TabsButton",w.push(k.label),x.push(b),this.addChild(b),b.x=P,P=b.x+b.width+l,0!=S||d||(b.enabled=!1);window.addEventListener("keydown",function(t){if(v.keyEnabled&&!v.zimAccessibility&&9==t.keyCode){var o=y;g(t.shiftKey?--o<0?i.length-1:o:++o>i.length-1?0:o),v.dispatchEvent("change"),e.OPTIMIZE||!zns&&OPTIMIZE||!v.stage||v.stage.update(),t.preventDefault()}}),Object.defineProperty(this,"selected",{get:function(){return x[y]},set:function(e){zon&&zog("selected is read only - try selectedIndex")}}),Object.defineProperty(this,"selectedIndex",{get:function(){return y},set:function(t){g(t),e.OPTIMIZE||!zns&&OPTIMIZE||!v.stage||v.stage.update()}}),Object.defineProperty(this,"tabs",{get:function(){return y},set:function(t){g(Math.min(Math.max(t,0),i.length-1)),e.OPTIMIZE||!zns&&OPTIMIZE||!v.stage||v.stage.update()}}),Object.defineProperty(this,"color",{get:function(){return r},set:function(t){r=t,zot(i[y].color)&&(x[y].color=r,e.OPTIMIZE||!zns&&OPTIMIZE||!v.stage||v.stage.update())}}),Object.defineProperty(this,"rollColor",{get:function(){return a},set:function(e){a=e;for(var t=0;t<i.length;t++)zot(i[y].rollColor)&&(x[t].rollColor=a)}}),Object.defineProperty(this,"offColor",{get:function(){return s},set:function(t){s=t;for(var o=0;o<i.length;o++)zot(i[y].offColor)&&(x[o].color=s);e.OPTIMIZE||!zns&&OPTIMIZE||!v.stage||v.stage.update()}}),Object.defineProperty(this,"label",{get:function(){return w[y]},set:function(e){zon&&zog("selected is read only - try selectedIndex")}}),Object.defineProperty(this,"text",{get:function(){return null!=w[y]?w[y].text:void 0},set:function(e){zon&&zog("selected is read only - try selectedIndex")}}),Object.defineProperty(this,"buttons",{get:function(){return x},set:function(e){zon&&zog("buttons is read only")}}),Object.defineProperty(this,"labels",{get:function(){return w},set:function(e){zon&&zog("labels is read only")}}),this._enabled=!0,Object.defineProperty(v,"enabled",{get:function(){return v._enabled},set:function(e){t(v,e)}}),this.clone=function(){for(var t=e.copy(i),g=0;g<t.length;g++)t[g].label=t[g].label.clone();return v.cloneProps(new e.Tabs(o,n,t,r,a,s,l,d,c,u,h,f,p,m))},this.dispose=function(){for(var e=0;e<v.buttons.length;e++)v.buttons[e].dispose(),v.labels[e].dispose(),v.buttons[e].removeAllEventListeners();return v.removeAllEventListeners(),!0}},e.extend(e.Tabs,e.Container,"clone","zimContainer",!1),e.Pad=function(o,n,i,r,a,s,l,d,c,u,h){var f;if(f=zob(e.Pad,arguments,"width, cols, rows, keys, color, rollColor, offColor, spacing, currentEnabled, corner, labelColor",this))return f;if(z_d("66"),this.zimContainer_constructor(),this.type="Pad",zot(o)&&(o=150),zot(n)&&(n=3),zot(i)&&(i=n),zot(r)){r=[];for(y=1;y<=i*n;y++)r.push(y)}zot(c)&&(c=!0),zot(d)&&(d=1);var p,m=this;this.cols=n,this.rows=i;var g,z=o/n-d,v=[],b=0;this.labels=[],this.buttons=[];for(var y=0;y<i;y++){for(var w=[],x=0;x<n;x++)w.push(null!=r[b]?r[b]:""),b++;g=v[y]=new e.Tabs(o,z,w,a,s,l,d,c,u,h,!1,!1),this.labels=this.labels.concat(g.labels),this.buttons=this.buttons.concat(g.buttons),this.addChild(g),g.selectedIndex=-1,g.y=(z+d)*y,g.znum=y,g.on("change",function(t){var o=t.target;m.selected=o.selected,m.text=o.text,m.label=o.label;for(var i=o.selectedIndex,r=0;r<v.length;r++)v[r].selectedIndex=-1;o.selectedIndex=i,p=o.znum*n+i,m.dispatchEvent("change"),e.OPTIMIZE||!zns&&OPTIMIZE||!m.stage||m.stage.update()})}this.tabs=v,Object.defineProperty(this,"selectedIndex",{get:function(){return p},set:function(e){p=e;for(var t=0;t<v.length;t++)v[t].selectedIndex=-1;var o=Math.floor(p/n);o>=0&&o<m.tabs.length&&(m.tabs[o].selectedIndex=p%n)}}),this._enabled=!0,Object.defineProperty(m,"enabled",{get:function(){return m._enabled},set:function(e){t(m,e)}}),this.clone=function(){return m.cloneProps(new e.Pad(o,n,i,r,a,s,l,d,c,u,h))},this.dispose=function(){for(var e=0;e<m.tabs.length;e++)m.tabs[e].dispose();return m.removeAllEventListeners(),!0}},e.extend(e.Pad,e.Container,"clone","zimContainer",!1),e.Tile=function(t,o,n,i,r,a,s,l){var d;if(d=zob(e.Tile,arguments,"obj, cols, rows, spacingH, spacingV, mirrorH, mirrorV, snapToPixel",this))return d;z_d("66.5"),this.zimContainer_constructor(),this.type="Tile",zot(o)&&(o=1),zot(n)&&(n=1),zot(i)&&(i=0),zot(r)&&(r=0),zot(a)&&(a=!1),zot(s)&&(s=!1),zot(l)&&(l=!0),l&&(t.stage?t.stage.snapToPixelEnabled=!0:zimDefaultFrame&&(zimDefaultFrame.stage.snapToPixelEnabled=!0));var c,u=this,h=t.width,f=t.height;if(h&&f){for(var p=0;p<n;p++)for(var m=0;m<o;m++)(c=m+p==0?zik(t):zik(t).clone()).snapToPixel=l,this.addChild(c),a&&m%2==1?(c.scaleX=-c.scaleX,c.x=m*(h+i)+h):c.x=m*(h+i),s&&p%2==1?(c.scaleY=-c.scaleY,c.y=p*(f+r)+f):c.y=p*(f+r);this.clone=function(){return u.cloneProps(new e.Tile(t,o,n,i,r,a,s))}}else zon&&zog("ZIM Display: Tile() obj must have width and height")},e.extend(e.Tile,e.Container,"clone","zimContainer",!1),e.ColorPicker=function(t,o,n,i,r,a,s,l,d,c,u,h,f,p,m){function g(e){return(e=Math.floor(e).toString(16))+""+e}function z(e){"#000"==Y||"#000000"==Y||"black"==Y?(f.color="#222",f.alpha=1):(f.color="black",f.alpha=.5),f.x=j.x+e%n*(S+i)+S/2,f.y=j.x+Math.floor(e/n)*(S+i)+S/2}function v(){if(Y!=N||M!=k){if(A&&r){var t=[C=T,T=N];for(I=0;I<2;I++){var o=j.graphics;R=Math.floor(I/n),W=(_=I%n)*(S+i),F=R*(S+i)+U,P[I]=t[I],o.f(de.color).r(W-1,F-1,S+2,S+2).f(t[I]).r(W,F,S,S)}e.OPTIMIZE||!zns&&OPTIMIZE||!x.stage||x.stage.update()}N=Y,k=M,x.dispatchEvent("change")}else x.dispatchEvent("close")}function b(){x.zimAccessibility&&x.zimAccessibility.changeTitle(x,null,!0)}function y(e){return Math.round(e*Math.pow(10,2))/Math.pow(10,2)}var w;if(w=zob(e.ColorPicker,arguments,"width, colors, cols, spacing, greyPicker, alphaPicker, startColor, drag, shadowColor, shadowBlur, buttonBar, circles, indicator, backingColor, keyArrows",this))return w;z_d("67"),this.zimContainer_constructor(),this.type="ColorPicker",zot(t)&&(t=500),zot(o)&&(A=!0),zot(n)&&(n=10),zot(i)&&(i=2),zot(a)&&(a=!0),zot(r)&&(r=!0),zot(d)&&(d="rgba(0,0,0,.3)"),zot(c)&&(c=14),zot(u)&&(u=!0),zot(l)&&(l=!!u),zot(h)&&(h=!1),zot(f)&&(f=!1,u||(f=!0)),zot(p)&&(p="black"),zot(m)&&(m=!0);var x=this,T="#e472c4",C="#50c4b7",k=1,M=1,j=new createjs.Shape;this.addChild(j),j.x+=i,j.y+=i;var E,S,A=!1,P=[];if(zot(o)){A=!0;var O=6,D=O*O*O;O=Math.ceil(Math.pow(D,.5)),S=(t-i)/18-i;G=Math.floor(Math.pow(O*O,1/3));E=[];for(var I=0;I<6;I++)for(var B=0;B<6;B++)for(var L=0;L<6;L++)E.push("#"+g(3*I)+g(3*B)+g(3*L));o=[];for(I=0;I<E.length;I++)R=Math.floor(I/6),o[18*((_=I%6)+6*(G=R>=18?1:0))+(R-6*G*3)]=E[I];n=18,P=[C,T]}else S=(t-i)/n-i;var X=Math.ceil(o.length/n),Y=String(o[o.length-1]);zot(s)||(Y=String(s));var _,R,W,F,N=C,H=j.graphics,G=0;for(I=0;I<o.length;I++)R=I%n,_=Math.floor(I/n),W=R*(S+i),F=_*(S+i),h?H.f(o[I]).dc(W+S/2,F+S/2,S/2):H.f(o[I]).r(W,F,S,S);var Z=F+S+i,U=Z;if(r){for(I=0;I<16;I++)P.push("#"+g(I)+g(I)+g(I));for(I=0;I<P.length;I++)R=Math.floor(I/n),W=(_=I%n)*(S+i),F=R*(S+i)+Z,h?H.f(P[I]).dc(W+S/2,F+S/2,S/2):H.f(P[I]).r(W,F,S,S);Z=F+S+i;var V=n,q=Math.ceil(P.length/n)}f&&((f=this.indicator=h?new e.Circle(S/2*.5):new e.Rectangle(.5*S,.5*S)).alpha=.5,f.centerReg(),this.addChild(f),z(o.indexOf(Y)));if(a){var K=new e.Container;K.setBounds(0,0,600,70),this.addChild(K),K.x=0,K.y=Z;var Q=this.alphaBacking=new e.Rectangle(580,50,"#222",null,null,0);K.addChild(Q),e.centerReg(Q,K);var J=this.alphaBut=new e.Button({width:20,height:30,label:"",corner:0,hitPadding:20}),$=this.alphaSlider=new e.Slider(0,1,.05,J,330);$.currentValue=1,K.addChild($),$.x=40,$.y=K.height/2;var ee=this.alphaText=new e.Label("Alpha: 1",30,null,"orange");K.addChild(ee),ee.x=$.x+$.bar.width+40,ee.y=K.height/2-ee.height/2,K.scaleX=K.scaleY=t/600,$.on("change",function(){ee.text="Alpha: "+y($.currentValue),se&&(se.alpha=M=$.currentValue),u?x.dispatchEvent("set"):x.dispatchEvent("change"),x.stage&&x.stage.update()}),Z+=K.height-10}if(u){var te=new e.Container;te.setBounds(0,0,600,100),this.addChild(te),te.x=0,te.y=Z+10;var oe=this.swatchText=new e.Label(Y.toUpperCase().substr(0,7),30,null,"orange");if(te.addChild(oe),e.centerReg(oe),oe.x=90,oe.y=48,l){var ne=this.grip=new createjs.Shape;te.addChild(ne),ne.graphics.f("rgba(256,256,256,.25)").r(0,0,5,20).r(10,0,5,20).r(20,0,5,20).r(30,0,5,20),ne.x=70,ne.y=65,oe.y=40}var ie=this.closeBut=new e.Button(90,90,"X","#222","#444",null,null,0);te.addChild(ie),ie.x=600-ie.width-10,ie.y=0,ie.on("mousedown"==e.ACTIONEVENT?"mousedown":"click",function(){x.dispatchEvent("close")});var re=this.okBut=new e.Button(150,90,"OK","#222","#444",null,null,0);te.addChild(re),re.x=ie.x-re.width-10,re.y=0,re.on("mousedown"==e.ACTIONEVENT?"mousedown":"click",v);var ae=this.swatchBacking=new createjs.Shape;te.addChild(ae),(H=ae.graphics).f("black").r(.5,.5,50,89).f("#666").r(50,.5,50,89).f("white").r(100,.5,49.5,89),ae.x=re.x-150-10,ae.y=0;var se=this.swatch=new e.Rectangle(150,90,Y);te.addChild(se),se.x=ae.x,se.y=0,se.on("mousedown"==e.ACTIONEVENT?"mousedown":"click",v),se.cursor="pointer",te.scaleX=te.scaleY=t/600,Z+=te.height}else j.cursor="pointer";a||u||(Z-=10-i);var le=Z+10;this.setBounds(0,0,t,le);var de=this.backing=new e.Rectangle(t,le,p);if(this.addChildAt(de,0),-1!=d&&c>0&&(de.shadow=new createjs.Shadow(d,8,8,c)),l){var ce,ue;de.on("mousedown",function(e){ce=e.stageX-x.x,ue=e.stageY-x.y,de.cursor="move"}),de.on("pressmove",function(e){x.x=e.stageX-ce,x.y=e.stageY-ue,x.stage&&x.stage.update()}),de.on("pressup",function(e){de.cursor="default",x.stage&&x.stage.update()})}var he=n*(S+i),fe=X*(S+i);if(r)var pe=V*(S+i),me=q*(S+i);j.on("mousedown"==e.ACTIONEVENT?"mousedown":"click",function(){var t=e.hitTestGrid(j,he,fe,n,X,x.stage.mouseX,x.stage.mouseY,0,0,i,i);zot(t)||(Y=o[t],u?(se.color=Y,oe.text=String(o[t]).toUpperCase().substr(0,7),e.centerReg(oe),Y!=N&&x.dispatchEvent("set")):v()),r&&(t=null,zot(t=e.hitTestGrid(j,pe,me,V,q,x.stage.mouseX,x.stage.mouseY,0,fe,i,i))||(Y=P[t],u?(se.color=Y,oe.text=P[t].toUpperCase(),e.centerReg(oe),Y!=N&&x.dispatchEvent("set")):v())),f&&z(o.indexOf(Y)),u?x.stage&&x.stage.update():f&&x.stage&&x.stage.update(),b()}),Object.defineProperty(this,"selectedColor",{get:function(){return Y},set:function(t){N=Y=t,u&&(se.color=Y,oe.text=Y,e.centerReg(oe),x.stage&&x.stage.update()),f&&z(o.indexOf(Y)),b()}}),Object.defineProperty(this,"currentValue",{get:function(){return Y},set:function(e){x.selectedColor=e}}),Object.defineProperty(this,"currentValueEvent",{get:function(){return Y},set:function(e){e!=x.selectedColor&&(x.selectedColor=e,x.dispatchEvent("change"))}}),Object.defineProperty(this,"selectedIndex",{get:function(){return o.indexOf(Y)},set:function(t){N=Y=o[t],u&&(se.color=Y,oe.text=Y,e.centerReg(oe),x.stage&&x.stage.update()),f&&z(o.indexOf(Y)),b()}}),Object.defineProperty(this,"selectedAlpha",{get:function(){return a?y($.currentValue):1},set:function(e){a&&(k=$.currentValue=e,se&&(se.alpha=k),ee&&(ee.text="Alpha: "+y($.currentValue)),x.stage&&x.stage.update())}}),Object.defineProperty(this,"colors",{get:function(){return r?o.concat(P):o},set:function(e){zon&&zog("Display - ColorPicker() colors is read only - make a new ColorPicker to change")}}),this.keyDownEvent=function(e){function t(){o<0&&(o=x.colors.length-1),o>x.colors.length-1&&(o=0),x.selectedIndex=o,x.dispatchEvent("change"),x.stage&&x.stage.update()}if(x.focus||!x.zimAccessibility&&m){var o=x.selectedIndex;37==e.keyCode||40==e.keyCode?(o--,t()):38!=e.keyCode&&39!=e.keyCode||(o++,t())}},window.addEventListener("keydown",this.keyDownEvent),this.clone=function(){return x.cloneProps(new e.ColorPicker(t,A?null:o,n,i,r,a,s,l,d,c,u,h,f,p,m))},this.dispose=function(){return window.removeEventListener("keydown",x.keyDownEvent),$.dispose(),j.removeAllEventListeners(),de.removeAllEventListeners(),ie.removeAllEventListeners(),se.removeAllEventListeners(),re.removeAllEventListeners(),!0}},e.extend(e.ColorPicker,e.Container,"clone","zimContainer",!1),e.Loader=function(t,o,n,i,r,a,s,l,d,c,u,h,f,p,m,g,z,v,b,y,w,x,T,C){function k(t){var o;o=t.dataTransfer&&t.dataTransfer.files&&t.dataTransfer.files.length>0?t.dataTransfer.files:t.target.files;for(var n,i=[],r=0;r<o.length;r++)!function(t){var r=new FileReader;r.onload=function(t){var r=new Image;r.onload=function(){var t=new e.Bitmap(r);if(i.push(t),1==i.length&&(n=t),i.length==o.length){var a=new createjs.Event("loaded");a.bitmaps=i,a.bitmap=n,a.lastBitmap=t,a.total=i.length,j.dispatchEvent(a),S.value=""}},r.src=t.target.result},r.readAsDataURL(t)}(o[r])}var M;if(M=zob(e.Loader,arguments,"width, height, label, color, rollColor, borderColor, borderWidth, corner, shadowColor, shadowBlur, hitPadding, gradient, gloss, flatBottom, backing, rollBacking, rollPersist, icon, rollIcon, toggle, rollToggle, toggleEvent, dashed, frame",this))return M;if(z_d("67.5"),zot(t)&&(t=250),zot(o)&&(o=70),zot(i)&&(i="rgba(0,0,0,.05)"),zot(r)&&(r="rgba(0,0,0,.1)"),zot(a)&&(a="rgba(0,0,0,.3)"),zot(s)&&(s=1),zot(T)&&(T=!0),zot(l)&&(l=0),zot(n)&&(n=new e.Label({text:"UPLOAD PIC",color:"rgba(0,0,0,.4)",valign:"center",align:"center"})),zot(C)){if(!zimDefaultFrame)return void(zon&&zog("zim.Loader - please provide a reference to zim Frame"));C=zimDefaultFrame}this.zimButton_constructor(t,o,n,i,r,a,s,l,d,c,u,h,f,p,m,g,z,v,b,y,w,x,T),this.type="Loader";var j=this,E=C.stage;n=j.label;var S=j.tag=document.createElement("input");document.body.appendChild(S),S.setAttribute("type","file"),S.setAttribute("multiple","multiple"),S.setAttribute("aria-hidden",!0),S.hidden=!0,S.style.cssText="border:thin solid grey; z-index:2; width:"+t+"px; height:"+o+"px; overflow:hidden; outline:none;position:absolute; left:0px; top:0px; display:none; cursor:pointer; opacity: 0; filter: alpha(opacity=0);",this.addEventListener("mousedown",function(){S.click()}),S.addEventListener("change",k);var A=new createjs.DOMElement(S);E.addChild(A),A.alpha=0,this.resize=function(){if(!j.stage)return S.setAttribute("aria-hidden",!0),S.hidden=!0,void(S.style.display="none");S.setAttribute("aria-hidden",!1),S.hidden=!1,S.style.display="block",setTimeout(function(){var t=j.localToGlobal(0,0);A.x=C.x+t.x*C.scale,A.y=C.y+t.y*C.scale,e.sca(A,C.scale*j.scaleX,C.scale*j.scaleY),E.update()},50)},this.resize(),j.on("added",function(){S.style.display="block",S.hidden=!1,S.style.display="block",j.resize()}),j.on("removed",function(){S.style.display="none",S.hidden=!0,S.style.display="none"}),C.on("resize",j.resize),(new XMLHttpRequest).upload&&S.addEventListener("drop",function(e){S.removeEventListener("change",k),k(e),setInterval(function(){S.addEventListener("change",k)},100)}),this.save=function(e,t,o,n,i,r,a,s){var l;return(l=zob(j.save,arguments,"content, x, y, width, height, cached, cachedBounds, type"))?l:(zot(e)&&(e=C.stage),zot(t)&&(t=0),zot(o)&&(o=0),zot(n)&&(n=C.width),zot(i)&&(i=C.height),zot(s)&&(s="png"),e.cache(t,o,n,i),zgo(e.cacheCanvas.toDataURL("image/"+s),"_blank"),r?a&&e.cache(cashedBound.x,cashedBound.y,cashedBound.width,cashedBound.height):e.uncache(),j)},this.clone=function(){var k=new e.Loader(t,o,zot(n)?null:n.clone(),i,r,a,s,l,d,c,u,h,f,p,zot(m)?null:m.clone(),zot(g)?null:g.clone(),z,zot(v)?null:v.clone(),zot(b)?null:b.clone(),zot(y)?null:"string"==typeof y?y:y.clone(),zot(w)?null:w.clone(),x,T,C);return j.cloneProps(k)},this.dispose=function(){return j.zimButton_dispose(),j.removeAllEventListeners(),j.removeChild(A),document.body.removeChild(S),!0}},e.extend(e.Loader,e.Button,["clone","dispose"],"zimButton",!1),e.TextArea=function(t,o,n,i,r,a,s,l,d,c,u,h,f,p,m,g,z){var v;if(v=zob(e.TextArea,arguments,"width, height, size, padding, color, backingColor, borderColor, borderWidth, corner, shadowColor, shadowBlur, dashed, id, placeholder, readOnly, spellCheck, frame",this))return v;if(z_d("67.6"),zot(t)&&(t=250),zot(o)&&(o=70),zot(n)&&(n=20),zot(i)&&(i=5),zot(r)&&(r="#666"),zot(a)&&(a="rgba(256,256,256,.1)"),zot(s)&&(s="rgba(0,0,0,.1)"),zot(d)&&(d=0),!zot(u)&&zot(c)&&(c="rgba(0,0,0,.3)"),!zot(c)&&zot(u)&&(u=10),zot(z)){if(!zimDefaultFrame)return void(zon&&zog("zim.TextArea - please provide a reference to zim Frame"));z=zimDefaultFrame}this.zimContainer_constructor(t,o),this.type="TextArea";var b=this,y=z.stage,w=this.backing=new e.Rectangle(t,o,a,s,l,d,null,h);-1!=c&&u>0&&(w.shadow=new createjs.Shadow(c,3,3,u)),b.addChild(w);var x=b.tag=document.createElement("textarea");document.body.appendChild(x),zot(f)||(x.setAttribute("id",f),x.setAttribute("name",f)),m&&(x.readonly=!0),g||(x.spellcheck=!1),zot(p)||x.setAttribute("placeholder",p),x.style.cssText="background-color:transparent; color:"+r+"; resize:none; z-index:3; width:"+(t-2*i)+"px; height:"+(o-2*i)+"px; overflow:hidden; outline:none;font-size:"+n+"px; font-family:verdana; border:none; position:absolute; left:0px; top:0px; display:none;",x.addEventListener("change",function(){b.dispatchEvent("change")}),x.addEventListener("input",function(){b.dispatchEvent("input")}),x.addEventListener("focus",function(){window.removeEventListener("keydown",z.zil[0]),b.dispatchEvent("focus")}),x.addEventListener("blur",function(){window.addEventListener("keydown",z.zil[0]),b.dispatchEvent("blur")});var T=new createjs.DOMElement(x);T.alpha=0,this.on("mousedown",function(){setTimeout(function(){x.focus()},100)}),this.focus=function(){return x.focus(),b},this.resize=function(){setTimeout(function(){var t=b.localToGlobal(i,i);T.x=z.x+t.x*z.scale,T.y=z.y+t.y*z.scale,e.sca(T,z.scale*b.scaleX,z.scale*b.scaleY),T.alpha=1,b.stage&&y.update()},50)},this.resize(),b.on("added",function(){y.addChild(T),x.style.display="block",b.resize()}),b.on("removed",function(){y.removeChild(T),x.style.display="none"}),z.on("resize",b.resize),Object.defineProperty(this,"currentValue",{get:function(){return x.value},set:function(e){x.value=e}}),Object.defineProperty(this,"text",{get:function(){return x.value},set:function(e){x.value=e}}),Object.defineProperty(this,"readOnly",{get:function(){return x.readOnly},set:function(e){x.readOnly=e}}),this.clone=function(){var v=new e.Loader(t,o,n,i,r,a,s,l,d,c,u,h,f,p,m,g,z);return b.cloneProps(v)},this.dispose=function(){return b.removeAllEventListeners(),b.removeChild(T),document.body.removeChild(x),!0}},e.extend(e.TextArea,e.Container,["clone","dispose"],"zimContainer",!1),e.drag=function(t,o,n,i,r,a,s,l,d,c,u,h,f,p,m){function g(){x=0,T=0,t.zimDragRect&&(s?(k=e.boundsToGlobal(t.parent,t.zimDragRect),d&&(M=t.zimDragRect)):(k=t.zimDragRect,d&&(M=e.boundsToGlobal(t.parent,t.zimDragRect,!0)))),k&&m&&(C=t.parent.localToGlobal(t.x,t.y),z(t,C.x,C.y)),c&&(t.zimDragMoving=!0,b())}function z(o,n,i){if(zot(o)&&(o=F||t),o.parent&&o.stage){if(zot(n)||zot(i)){var r=o.parent.localToGlobal(o.x,o.y);x=T=0,t.zimDragRect&&(s?(k=e.boundsToGlobal(o.parent,t.zimDragRect),d&&(M=o.zimDragRect)):(k=t.zimDragRect,d&&(M=e.boundsToGlobal(o.parent,t.zimDragRect,!0)))),n=r.x,i=r.y,c&&(L=o.x,X=o.y,F=o,E.immediate(L),S.immediate(X))}var a,l=o.parent.globalToLocal(n,i);c&&h?"vertical"==h?(a=v(o,l.x-x,l.y-T),o.x=a.x,o.y=l.y-T):"horizontal"==h?(a=v(o,l.x-x,l.y-T),o.x=l.x-x,o.y=a.y):(o.x=l.x-x,o.y=l.y-T):(a=v(o,l.x-x,l.y-T),o.x=a.x,o.y=a.y),o.zimMask&&(o.zimMask.x=o.x,o.zimMask.y=o.y)}}function v(e,t,o){if(k)if(d){var n=e.getBounds().width,i=e.getBounds().height,r=e.getBounds().x,a=e.getBounds().y;n<M.width?t=M.x+(M.width-n)/2+(e.regX-r):(t-(e.regX-r)>M.x&&(t=M.x+(e.regX-r)),t-(e.regX-r)+n<M.x+M.width&&(t=M.x+M.width+(e.regX-r)-n)),e.height<M.height?o=M.y+(M.height-i)/2+(e.regY-a):(o-(e.regY-a)>M.y&&(o=M.y+(e.regY-a)),o-(e.regY-a)+i<M.y+M.height&&(o=M.y+M.height+(e.regY-a)-i))}else{var s=e.parent.localToGlobal(t,o);t=Math.max(k.x,Math.min(k.x+k.width,s.x)),o=Math.max(k.y,Math.min(k.y+k.height,s.y)),t=(s=e.parent.globalToLocal(t,o)).x,o=s.y}return{x:t,y:o}}function b(){function o(e,o,n,i,r){Math.abs(e.x-R)<.1&&Math.abs(e.y-W)<.1?(t.zimDragMoving=!1,e.x=i,e.y=r,e.dispatchEvent("slidestop")):(R=o,W=n)}var n=t.stage;t.zimDragTicker=function(){if(F||(F=t),j){var e=F.parent.globalToLocal(n.mouseX,n.mouseY);P++,O.push(e.x),D.push(e.y),P>=A?(Y=O.shift(),_=D.shift()):(Y=O[0],_=D[0])}else{if(!t.zimDragMoving)return;var i=L+I-Y,r=X+B-_;if(k&&(i=(a=v(F,i,r)).x,r=a.y),h)F.x=E.convert(i),F.y=S.convert(r),o(F,F.x,F.y,i,r);else{var a=v(F,E.convert(i),S.convert(r));F.x=a.x,F.y=a.y,o(F,F.x,F.y,F.x,F.y)}}},e.Ticker.add(t.zimDragTicker,n)}var y;if(y=zob(e.drag,arguments,"obj, rect, overCursor, dragCursor, currentTarget, swipe, localBounds, onTop, surround, slide, slideDamp, slideSnap, reg, removeTweens, startBounds"))return y;if(z_d("31"),!zot(t)&&t.on){t.cursor=zot(n)?"pointer":n,zot(r)&&(r=!1),zot(a)&&(a=!1),zot(s)&&(s=!1),zot(l)&&(l=!0),zot(d)&&(d=!1),zot(c)&&(c=!1),zot(u)&&(u=.3),zot(h)&&(h=!0);var w=["horizontal","vertical","auto"];!0!==h&&w.indexOf(h)<0&&(h=!1),zot(f)&&(f=!1),zot(p)&&(p=!0),zot(m)&&(m=!0),e.setSwipe(t,a),t.zimDragRect=o,t.zimLocalBounds=s;var x,T,C,k,M,j=!1;if(t.zimAdded=t.on("added",g,null,!0),t.zimRemoved=t.on("removed",function(){t.zimDragTicker&&e.Ticker.remove(t.zimDragTicker)},null,!0),t.parent&&g(),c)var E=new e.Damp(t.x,u),S=new e.Damp(t.y,u),A=3,P=0,O=[],D=[],I=t.x,B=t.y,L=t.x,X=t.y,Y=t.x,_=t.y,R=-1e4,W=-1e4;var F;return t.pointers={},t.zimDown=t.on("mousedown",function(o){var n="id"+Math.abs(o.pointerID+1);if(t.pointers[n]=!0,F=r?o.currentTarget:o.target,!t.zimDragRect||F.getBounds()){j=!0,t.stage.mouseMoveOutside=!0,c||(t.zimDragTicker&&e.Ticker.remove(t.zimDragTicker),t.zimDragTicker=e.Ticker.add(function(){},t.stage)),p&&createjs.Tween.removeTweens(F),l&&F.parent.setChildIndex(F,F.parent.numChildren-1);var a=F.parent.globalToLocal(o.stageX,o.stageY);f&&(F.x=a.x,F.y=a.y),x=a.x-F.x,T=a.y-F.y,t.zimDragRect&&(s?(k=e.boundsToGlobal(F.parent,t.zimDragRect),d&&(M=t.zimDragRect)):(k=t.zimDragRect,d&&(M=e.boundsToGlobal(F.parent,t.zimDragRect,!0)))),t.cursor=zot(i)?"pointer":i,c&&(P=0,O=[a.x],D=[a.y],R=-1e4,W=-1e4,t.zimDragMoving=!0)}else zog("zim.drag() - drag object needs bounds set")},!0),t.zimMove=t.on("pressmove",function(e){j&&z(F,e.stageX,e.stageY)},!0),t.zimPosition=z,t.zimUp=t.on("pressup",function(o){var i="id"+Math.abs(o.pointerID+1);if(delete t.pointers[i],j){if(t.cursor=zot(n)?"pointer":n,c){var r=F.parent.globalToLocal(o.stageX,o.stageY);j=!1,I=r.x,B=r.y,L=F.x,X=F.y,E.immediate(F.x),S.immediate(F.y)}else{var a=0;for(var s in t.pointers)a++;0==a&&e.Ticker.remove(t.zimDragTicker)}t.stage&&t.stage.update()}},!0),t}},e.noDrag=function(t){if(z_d("32"),!zot(t)&&t.on)return t.cursor="default",e.setSwipe(t,!0),t.off("added",t.zimAdded),t.off("removed",t.zimRemoved),t.off("mousedown",t.zimDown),t.off("pressmove",t.zimMove),t.off("pressup",t.zimUp),e.Ticker&&t.zimDragSlide&&e.Ticker.remove(t.zimDragSlide),t.zimDragMoving=t.zimAdded=t.zimRemoved=t.zimDown=t.zimMove=t.zimUp=t.zimDragRect=t.zimDragSlide=null,t},e.dragRect=function(e,t){if(z_d("33"),!zot(e)&&e.on&&!zot(t))return e.zimDragRect=t,e.zimDragMoving=!0,e.zimPosition&&e.zimPosition(),e},e.transform=function(t,o,n,i,r,a,s,l,d,c,u,h,f,p,m,g,z,v,b,y,w,x,T){function C(e){e==ue&&new Triangle(16,12,12,"white").addTo(e).mov(0,-13.5),new Triangle(16,12,12,"white").addTo(e).mov(13.5).rot(90),e==ue&&new Triangle(16,12,12,"white").addTo(e).mov(0,13.5).rot(180),new Triangle(16,12,12,"white").addTo(e).mov(-13.5).rot(-90),e==ue&&new Triangle(10,7,7,"black").addTo(e).mov(0,-13),new Triangle(10,7,7,"black").addTo(e).mov(13).rot(90),e==ue&&new Triangle(10,7,7,"black").addTo(e).mov(0,13).rot(180),new Triangle(10,7,7,"black").addTo(e).mov(-13).rot(-90),T&&e.cache(-20,-20,40,40)}function k(){var e=t;for(q=0,K=1,Q=1,J=0,$=0;e.parent;)q+=e.rotation,K*=e.scaleX,Q*=e.scaleY,J+=e.skewX,$+=e.skewY,e=e.parent}function M(){var t=b*Te*e.sign(K),o=b*Te*e.sign(Q);ce.getChildAt(0).reg(t,o),ce.getChildAt(1).reg(-t,o),ce.getChildAt(2).reg(-t,-o),ce.getChildAt(3).reg(t,-o),W.update()}function j(){ie.c(),re.c(),F=t.localToGlobal(ee.x,ee.y),N=t.localToGlobal(ee.x+ee.width,ee.y),H=t.localToGlobal(ee.x+ee.width,ee.y+ee.height),G=t.localToGlobal(ee.x,ee.y+ee.height),pTM=t.localToGlobal(ee.x+ee.width/2,ee.y),pRM=t.localToGlobal(ee.x+ee.width,ee.y+ee.height/2),pBM=t.localToGlobal(ee.x+ee.width/2,ee.y+ee.height),pLM=t.localToGlobal(ee.x,ee.y+ee.height/2),Z=t.localToGlobal(t.regX,t.regY),pMid=t.localToGlobal(ee.x+ee.width/2,ee.y+ee.height/2),V=[F,N,H,G],mids=[pTM,pRM,pBM,pLM],p&&(ie.s(m),z&&ie.sd([10,5],0),ie.ss(g).mt(F.x,F.y).lt(N.x,N.y).lt(H.x,H.y).lt(G.x,G.y).lt(F.x,F.y).cp()),te.setBounds(F.x,F.y,N.x-F.x,G.y-F.y),f&&(re.s("#eee").ss(g).f("rgba(0,0,0,.1)").dc(0,0,y),re.s("#222").ss(g).dc(0,0,.3*y)),k();for(var o=Math.min(50,Math.abs(J))*e.sign(J),n=Math.min(50,Math.abs($))*e.sign($),i=q*e.sign(K*Q)*e.sign(t.scaleX*t.scaleY),r=0;r<V.length;r++){var a=V[r];se.getChildAt(r).pos(a.x,a.y).ske(o,n).rot(i),ce.getChildAt(r).pos(a.x,a.y).rot(i);var s=mids[r],l=r%2==0?de:le;l.getChildAt(Math.floor(r/2)).pos(s.x,s.y).ske(o,n).rot(i),c||l.getChildAt(Math.floor(r/2)).sca(r%2==0?K/2:1,r%2==0?1:Q/2)}oe.pos(Z.x,Z.y)}function E(){Ce.pos(0,0),Ce.graphics.c().f("rgba(0,0,0,.01)").mt(F.x,F.y).lt(N.x,N.y).lt(H.x,H.y).lt(G.x,G.y).lt(F.x,F.y).cp(),Ce.reg(Z.x,Z.y),Ce.pos(Z.x,Z.y)}function S(e){Xe?(e.preventDefault(),A()):(Xe=!0,setTimeout(function(){Xe=!1},300))}function A(){frame.ctrlKey&&t.transformControls.visible?(t.scaleX=1,t.scaleY=1,t.rotation=0,v&&ue.rot(t.rotation),j(),E(),W.update()):s&&(t.transformControls.visible?(t.transformControls.hide(),t.dispatchEvent("transformhide"),frame.canvas.style.cursor="default"):(t.transformControls.show(),t.dispatchEvent("transformshow"),o&&(v?(frame.canvas.style.cursor="none",Y()):frame.canvas.style.cursor="move"))),D()}function P(o){if(_e=!0,d&&(t.parent.setChildIndex(t,t.parent.numChildren-1),W.addChild(ae)),Le&&W.off("stagemousemove",Le),ke=o.target.x,Me=o.target.y,Oe=t.x,De=t.y,startSX=t.scaleX,startSY=t.scaleY,"rotate"==o.target.controlType){Ye=!0,je=t.rotation;var n=W.mouseX,i=W.mouseY,r=ne.localToGlobal(Oe,De);Ie=r.x,Be=r.y,Ee=180*Math.atan2(i-Be,n-Ie)/Math.PI}frame.ctrlKey||"rotate"==o.target.controlType?(Se=Math.abs(ke-t.x),Ae=Math.abs(Me-t.y)):(Se=Math.abs(ke-o.target.op.x),Ae=Math.abs(Me-o.target.op.y)),"rotate"!=o.target.controlType&&(Pe={x:o.target.op.x,y:o.target.op.y}),We.addTo(W).pos(W.mouseX,W.mouseY),We.cursor=v?"none":o.target.cu,v&&(he.rotation=t.rotation*e.sign(K*Q)*e.sign(t.scaleX*t.scaleY)+fe[o.target.cu],"side"!=o.target.controlType&&K*Q<0&&(he.rotation+=90),Fe.addTo(W,1).pos(W.mouseX,W.mouseY)),Ce.visible=!1,t.cursor="none"}function O(o){var n;if(n=frame.ctrlKey&&"corner"==o.target.controlType?Se>Ae?(o.target.x-Oe)/(ke-Oe):(o.target.y-De)/(Me-De):Se>Ae?(o.target.x-o.target.op.x)/(ke-o.target.op.x):(o.target.y-o.target.op.y)/(Me-o.target.op.y),"corner"==o.target.controlType?(t.scaleX=n*startSX,t.scaleY=n*startSY):(t.scaleX="e-resize"==o.target.cu?n*startSX:startSX,t.scaleY="n-resize"==o.target.cu?n*startSY:startSY),j(),We.pos(W.mouseX,W.mouseY),v&&Fe.pos(W.mouseX,W.mouseY),!frame.ctrlKey||"side"==o.target.controlType){var i={x:o.target.op.x,y:o.target.op.y};t.x-=(i.x-Pe.x)*e.sign(K)*e.sign(t.scaleX),t.y-=(i.y-Pe.y)*e.sign(Q)*e.sign(t.scaleY)}j()}function D(e){M();var o=e?e.target.controlType:"move";v&&Fe.removeFrom(W),"move"==o&&Ce.hitTestPoint(W.mouseX,W.mouseY)||"corner"==o&&se.hitTestPoint(W.mouseX,W.mouseY)||"side"==o&&le.hitTestPoint(W.mouseX,W.mouseY)||"side"==o&&de.hitTestPoint(W.mouseX,W.mouseY)||"rotate"==o&&ce.hitTestPoint(W.mouseX,W.mouseY)?Le&&W.on("stagemousemove",Le):(We.removeFrom(W),frame.canvas.style.cursor="default",t.cursor=Re),W.update(),t.dispatchEvent("transformed")}function I(o){_e||(We.addTo(W),Fe.addTo(W,1),We.pos(W.mouseX,W.mouseY),Fe.pos(W.mouseX,W.mouseY),he.rotation=t.rotation*e.sign(K*Q)*e.sign(t.scaleX*t.scaleY)+fe[o.target.cu],"side"!=o.target.controlType&&K*Q<0&&(he.rotation+=90),W.update(),Le=W.on("stagemousemove",function(e){We.pos(W.mouseX,W.mouseY),W.update()}))}function B(e){W.off("stagemousemove",Le),_e||(t.cursor=Re,We.removeFrom(W),Fe.removeFrom(W),W.update())}function L(){d&&(t.parent.setChildIndex(t,t.parent.numChildren-1),W.addChild(ae))}function X(){W.off("stagemousemove",Le),_e||(ue.removeFrom(ae),W.update())}function Y(o){!_e&&v&&(ue.addTo(ae).rot(t.rotation*e.sign(K*Q)*e.sign(t.scaleX*t.scaleY)).pos(W.mouseX,W.mouseY),W.update(),Le=W.on("stagemousemove",function(e){ue.pos(W.mouseX,W.mouseY),Ce.hitTestPoint(W.mouseX,W.mouseY)||X(),W.update()}))}var _;if(_=zob(e.transform,arguments,"obj, move, stretchX, stretchY, scale, rotate, dblclick, visible, onTop, showStretch, showRotate, showScale, showReg, showBorder, borderColor, borderWidth, dashed, customCursors, handleSize, regSize, snapDistance, snapRotation, cache"))return _;if(z_d("33.5"),zot(t)||!t.getBounds)return zog("zim methods - transform(): please provide object with bounds set"),t;if(!t.getBounds())return zog("zim methods - transform(): please setBounds() on object"),t;if(!t.parent)return zog("zim methods - transform(): object should be on stage first"),t;zot(o)&&(o=!0),zot(n)&&(n=!0),zot(i)&&(i=!0),zot(r)&&(r=!0),zot(a)&&(a=!0);var R=e.mobile();zot(s)&&(s=!1),zot(l)&&(l=!0),zot(d)&&(d=!0),zot(c)&&(c=!!R),zot(u)&&(u=!!R),zot(h)&&(h=!0),zot(f)&&(f=!0),zot(p)&&(p=!0),zot(m)&&(m="brown"),zot(g)&&(g=1),zot(v)&&(v=!R),zot(b)&&(b=e.mobile()?20:10),zot(y)&&(y=16),zot(w)&&(w=10),zot(x)&&(x=5),zot(T)&&(T=!0);var W;if(t.stage)W=t.stage;else{if(!zimDefaultFrame)return t;W=zimDefaultFrame.stage}if(!frame){if(!zimDefaultFrame)return t;frame=zimDefaultFrame}var F,N,H,G,Z,U,V,q,K,Q,J,$,ee=t.getBounds(),te=new e.Shape,oe=new e.Shape,ne=t.parent,ie=te.graphics,re=oe.graphics,ae=new e.Container,se=new e.Container,le=new e.Container,de=new e.Container,ce=new e.Container;if(v){var ue=new Container,he=new Container;C(ue),C(he);var fe={"nw-resize":45,"ne-resize":-45,"n-resize":90,"e-resize":0}}k();for(var pe=["nw-resize","ne-resize","nw-resize","ne-resize"],me=[2,3,0,1],ge=0;ge<4;ge++){ye=new e.Rectangle(b,b,h?"#e472c4":"rgba(0,0,0,0)",h?"#333":"rgba(0,0,0,0)",2);T&&ye.cache(-1,-1,b+2,b+2),ye.centerReg(se),ye.expand(0),ye.rotation=q,U=v?"none":pe[ge],ye.drag({overCursor:U,dragCursor:U,onTop:!1}),ye.controlType="corner",ye.cu=pe[ge]}for(ge=0;ge<me.length;ge++)se.getChildAt(ge).op=se.getChildAt(me[ge]);var ze=["n-resize","e-resize","n-resize","e-resize"];me=[1,1,0,0];for(ge=0;ge<4;ge++){var ve=ge%2==0?t.width/2:b,be=ge%2==0?b:t.height/2;if(c){ye=new e.Rectangle(b,b,"#AAA","#333",2);T&&ye.cache(-1,-1,b+2,b+2)}else var ye=new e.Rectangle(ve,be,"rgba(0,0,0,0)");ye.centerReg(ge%2==0?de:le),ye.rotation=q,ye.expand(0),U=v?"none":ze[ge],ye.drag({overCursor:U,dragCursor:U,onTop:!1}),ye.controlType="side",ye.cu=ze[ge]}for(ge=0;ge<me.length;ge++){var we=ge%2==0?de:le;we.getChildAt(Math.floor(ge/2)).op=we.getChildAt(me[ge])}for(var xe=["ne-resize","nw-resize","ne-resize","nw-resize"],ge=0;ge<4;ge++)(ye=new e.Circle(b,u?"#e472c4":"rgba(0,0,0,0)")).addTo(ce),T&&ye.cache(-b,-b,2*b,2*b),ye.expand(0),U=v?"none":xe[ge],ye.drag({overCursor:U,dragCursor:U,onTop:!1}),ye.controlType="rotate",ye.cu=xe[ge];var Te=1.8;ce.alpha=.5,M(),j();var Ce=new e.Shape(1e3,1e3);E(),R?(t.on("mousedown",S),Ce.on("mousedown",S)):(t.on("dblclick",A),Ce.on("dblclick",A));var ke,Me,je,Ee,Se,Ae,Pe,Oe,De,Ie,Be,Le,Xe=!1,Ye=!1,_e=!1,Re=t.cursor,We=new Circle(30,"rgba(0,0,0,0)").expand(20);if(v){We.mouseEnabled=!1,We.mouseChildren=!1,We.addChild(he),se.on("mouseover",I),se.on("mouseout",B),le.on("mouseover",I),le.on("mouseout",B),de.on("mouseover",I),de.on("mouseout",B),ce.on("mouseover",I),ce.on("mouseout",B);var Fe=new Circle(30,"rgba(0,0,0,0)").expand(20);Fe.cursor="none"}se.on("mousedown",P),se.on("pressmove",O),se.on("pressup",D),le.on("mousedown",P),le.on("pressmove",O),le.on("pressup",D),de.on("mousedown",P),de.on("pressmove",O),de.on("pressup",D),ce.on("mousedown",P),ce.on("pressmove",function(o){var n=180*Math.atan2(W.mouseY-Be,W.mouseX-Ie)/Math.PI;frame.shiftKey?t.rot(45*Math.round((je+(n-Ee)*e.sign(K)*e.sign(t.scaleX))/45)):t.rot(je+(n-Ee)*e.sign(K)*e.sign(t.scaleX)),j(),We.pos(W.mouseX,W.mouseY),v&&(he.rotation=t.rotation*e.sign(K*Q)*e.sign(t.scaleX*t.scaleY)+fe[o.target.cu],"side"!=o.target.controlType&&K*Q<0&&(he.rotation+=90),Fe.pos(W.mouseX,W.mouseY)),j()}),ce.on("pressup",D),oe.drag(),oe.on("mousedown",L),oe.on("pressup",function(){if(!frame.ctrlKey){for(var o=0;o<V.length;o++)if(e.dist(oe.x,oe.y,V[o].x,V[o].y)<w){oe.x=V[o].x,oe.y=V[o].y;break}e.dist(oe.x,oe.y,pMid.x,pMid.y)<w&&(oe.x=pMid.x,oe.y=pMid.y)}var n=t.rotation,i=t.globalToLocal(oe.x,oe.y),r=ne.globalToLocal(oe.x,oe.y);t.reg(i.x,i.y),t.rotation=0,t.pos(t.x+r.x-t.x,t.y+r.y-t.y),t.rotation=n,j(),E(),D(),W.update()}),U=v?"none":"move",Ce.drag({overCursor:U,dragCursor:U,onTop:!1}),Ce.controlType="move",v&&(Ce.on("mouseover",Y),Ce.on("mouseout",X)),Ce.on("mousedown",L),Ce.on("pressmove",function(){var e=ne.globalToLocal(Ce.x,Ce.y);t.x=e.x,t.y=e.y,j()}),Ce.on("pressup",D),W.on("stagemouseup",function(){_e=!1,Ce.visible=!0,Ye&&!frame.ctrlKey&&x>1&&(t.rotation=Math.round(t.rotation/x)*x,j()),E(),Ye=!1,W.update()}),ae.addChild(te),o&&ae.addChild(Ce),r&&ae.addChild(se),n&&ae.addChild(le),i&&ae.addChild(de),a&&ae.addChild(ce),ae.addChild(oe);var Ne=s;return t.transformControls={visible:l,show:function(){return d&&t.parent.setChildIndex(t,t.parent.numChildren-1),W.addChild(ae),t.transformControls.visible=!0,W.update(),t},hide:function(){return W.removeChild(ae),t.transformControls.visible=!1,t.cursor=Re,v&&(_e=!1,We.removeFrom(W),Fe.removeFrom(W)),W.update(),t},remove:function(){t.transformControls.hide(),s=!1},add:function(){t.transformControls.show(),s=Ne},dblclickOn:function(){s=Ne=!0},dblclickOff:function(){s=Ne=!1},disable:function(){ae.mouseChildren=!1,ae.mouseEnabled=!1},enable:function(){ae.mouseChildren=!0,ae.mouseEnabled=!0},record:function(e){var o={index:ne.getChildIndex(t),x:t.x,y:t.y,scaleX:t.scaleX,scaleY:t.scaleY,rotation:t.rotation,skewX:t.skewX,skewY:t.skewY,regX:t.regX,regY:t.regY,controls:t.transformControls.visible};return e?JSON.stringify(o):o},set:function(e,o){if(!zot(e)){o&&(e=JSON.parse(e));var n=e.controls;delete e.controls;var i=e.index;zot(i)&&(i=0),delete e.index;for(var r in e)t[r]=e[r];return j(),E(),M(),ne.setChildIndex(t,i),n?t.transformControls.show():t.transformControls.hide(),t}},resize:function(){return j(),E(),M(),t},scaleControls:se,stretchXControls:le,stretchYControls:de,rotateControls:ce},l&&t.transformControls.show(),t},e.setSwipe=function(e,t){function o(t){for(var n,i=t.numChildren,r=0;r<i;r++)(n=t.getChildAt(r)).zimNoSwipe=e.zimNoSwipe,n instanceof createjs.Container&&o(n)}if(z_d("34"),!zot(e)&&e.on)return e.zimNoSwipe=!t||null,e instanceof createjs.Container&&o(e),e},e.gesture=function(t,o,n,i,r,a,s,l,d,c,u){function h(){t.zimTouch.pair=[],e.loop(t.zimTouch.pointers,function(e,o,n){o.startX=o.x,o.startY=o.y,n<=1&&t.zimTouch.pair.push(o)}),t.zimTouch.startX=t.x,t.zimTouch.startY=t.y,t.zimTouch.startSX=t.scaleX,t.zimTouch.startSY=t.scaleY,t.zimTouch.startR=t.rotation}var f;if(f=zob(e.gesture,arguments,"obj, move, scale, rotate, rect, minScale, maxScale, snapRotate, localBounds, slide, slideEffect"))return f;if(z_d("34.5"),!zot(t)&&t.on){zot(o)&&(o=!0),zot(n)&&(n=!0),zot(i)&&(i=!0),zot(d)&&(d=!1),zot(l)&&(l=1),zot(c)&&(c=!1),zot(u)&&(u=5);var p,m;if(!t.zimTouch){var g=new e.Damp(t.scaleX,.05),z=new e.Damp(t.scaleY,.05),v=t.scaleX/t.scaleY;if(t.zimTouch={move:o,scale:n,rotate:i,pointers:{},checkBounds:function(e,o){if(t.zimTouch.rect){var n=t.zimTouch.rect,i=t.parent.localToGlobal(e,o);e=Math.max(n.x,Math.min(n.x+n.width,i.x)),o=Math.max(n.y,Math.min(n.y+n.height,i.y)),e=(i=t.parent.globalToLocal(e,o)).x,o=i.y}return{x:e,y:o}}},r){t.zimTouch.rect=r,d&&(t.zimTouch.rect=e.boundsToGlobal(t.parent,r));var b=t.zimTouch.checkBounds(t.x,t.y);t.x=b.x,t.y=b.y}c&&(slideSlice=10,slideTotal=5,m=0,p=[],t.zimTouch.slideInterval=e.interval(slideSlice,function(){p[m++%slideTotal]=[t.x,t.y]}),t.zimTouch.slideInterval.pause(),t.move(t.x,t.y,10,"quadOut")),t.zimTouch.mousedown=t.on("mousedown",function(o){var n="id"+Math.abs(o.pointerID+1),i=t.parent.globalToLocal(o.stageX,o.stageY);t.zimTouch.pointers[n]={startX:i.x,startY:i.y,x:i.x,y:i.y},(t.zimTouch.move||t.zimTouch.rotate)&&(t.zimTouch.total=0,e.loop(t.zimTouch.pointers,function(e){t.zimTouch.total++})),c&&1==t.zimTouch.total&&t.zimTouch.slideInterval.pause(!1),h()}),t.zimTouch.pressmove=t.on("pressmove",function(o){var n="id"+Math.abs(o.pointerID+1),i=t.parent.globalToLocal(o.stageX,o.stageY);if(t.zimTouch.pointers[n].x=i.x,t.zimTouch.pointers[n].y=i.y,t.zimTouch.move){var r=0,l=0;e.loop(t.zimTouch.pointers,function(e,t){r+=t.x-t.startX,l+=t.y-t.startY}),r=t.zimTouch.startX+r/t.zimTouch.total,l=t.zimTouch.startY+l/t.zimTouch.total;var d=t.zimTouch.checkBounds(r,l);t.x=d.x,t.y=d.y,t.dispatchEvent("move")}if(2==t.zimTouch.pair.length){var c=t.zimTouch.pair[0],u=t.zimTouch.pair[1];if(t.zimTouch.scale){var h=Math.sqrt(Math.pow(u.startX-c.startX,2)+Math.pow(u.startY-c.startY,2)),f=Math.sqrt(Math.pow(u.x-c.x,2)+Math.pow(u.y-c.y,2)),p=t.zimTouch.startSX+(f/h-1),m=t.zimTouch.startSY+(f/h-1);t.scaleX=g.convert(p),t.scaleY=z.convert(m);var b=!zot(a)&&Math.min(p,m)<a,y=!zot(s)&&Math.max(p,m)>s;(b||y)&&(b?v>1?(t.scaleY=a,t.scaleX=a*v):(t.scaleX=a,t.scaleY=a/v):y&&(v>1?(t.scaleX=s,t.scaleY=s/v):(t.scaleY=s,t.scaleX=s*v)),g.immediate(t.scaleX),z.immediate(t.scaleY)),t.dispatchEvent("scale")}if(t.zimTouch.rotate){var w=Math.atan2(c.startY-u.startY,c.startX-u.startX)*(180/Math.PI),x=Math.atan2(c.y-u.y,c.x-u.x)*(180/Math.PI);t.rotation=t.zimTouch.startR+(x-w),t.dispatchEvent("rotate")}}t.getStage&&t.stage&&t.stage.update()}),t.zimTouch.pressup=t.on("pressup",function(e){var o="id"+Math.abs(e.pointerID+1);if(delete t.zimTouch.pointers[o],(t.zimTouch.move||t.zimTouch.rotate)&&t.zimTouch.total--,i&&!zot(l)&&0==t.zimTouch.total&&(l>0?t.rotation=Math.round(t.rotation/l)*l:0==l&&(t.rotation=Math.round(t.rotation))),c&&0==t.zimTouch.total){t.zimTouch.slideInterval.pause();var n=p[(m+1)%p.length],r=p[m%p.length],a=t.x+(n[0]-r[0])*u,s=t.y+(n[1]-r[1])*u,d=t.zimTouch.checkBounds(a,s),f=slideTotal*slideSlice*u*Math.min((t.x-d.x)/(t.x-a)||1,(t.y-d.y)/(t.y-s)||1);t.move(d.x,d.y,f,"quadOut",function(){t.dispatchEvent("slidestop")})}t.getStage&&t.stage&&t.stage.update(),h()})}return t}},e.noGesture=function(t,o,n,i){var r;return(r=zob(e.noGesture,arguments,"obj, move, scale, rotate"))?r:(z_d("34.6"),!zot(t)&&t.on&&t.zimTouch?(zot(o)&&(o=!0),zot(n)&&(n=!0),zot(i)&&(i=!0),t.zimTouch.move=!o,t.zimTouch.scale=!n,t.zimTouch.rotate=!i,t.zimTouch.move||t.zimTouch.scale||t.zimTouch.rotate||(t.off("mousedown",t.zimTouch.mousedown),t.off("pressmove",t.zimTouch.pressmove),t.off("pressup",t.zimTouch.pressup),delete t.zimTouch),t):void 0)},e.gestureRect=function(e,t){if(z_d("34.7"),!zot(e)&&e.on&&!zot(t)&&e.zimTouch){e.zimTouch.rect=t;var o=e.zimTouch.checkBounds(e.x,e.y);return e.x=o.x,e.y=o.y,e}},e.hitTestPoint=function(e,t,o){if(z_d("35"),!e.stage)return!1;if(!zot(e)&&e.globalToLocal){var n=e.globalToLocal(t,o),i=e.getBounds();if(i){if(n.x>i.x+i.width||n.x<i.x)return!1;if(n.y>i.y+i.height||n.y<i.y)return!1}return e.hitTest(n.x,n.y)}},e.hitTestReg=function(e,t){if(z_d("36"),!e.stage||!t.stage)return!1;if(!zot(e)&&!zot(t)&&e.localToLocal&&t.localToLocal){var o=t.localToLocal(t.regX,t.regY,e),n=e.getBounds();if(n){if(o.x>n.x+n.width||o.x<n.x)return!1;if(o.y>n.y+n.height||o.y<n.y)return!1}return e.hitTest(o.x,o.y)}},e.hitTestRect=function(t,o,n){if(z_d("37"),!t.stage||!o.stage)return!1;if(!zot(t)&&!zot(o)&&t.hitTest&&o.getBounds){zot(n)&&(n=0);var i=o.getBounds();if(i){if(t.getBounds()&&!e.hitTestBounds(t,o))return!1;var r=i.x+i.width/2,a=i.y+i.height/2,s=o.localToLocal(r,a,t);if(t.hitTest(s.x,s.y))return!0;for(var l,d,c=0;c<=n;c++){if(l=i.width*(c+1)/(n+1),d=i.height*(c+1)/(n+1),s=o.localToLocal(i.x+l,i.y,t),t.hitTest(s.x,s.y))return!0;if(s=o.localToLocal(i.x+i.width,i.y+d,t),t.hitTest(s.x,s.y))return!0;if(s=o.localToLocal(i.x+i.width-l,i.y+i.height,t),t.hitTest(s.x,s.y))return!0;if(s=o.localToLocal(i.x,i.y+i.height-d,t),t.hitTest(s.x,s.y))return!0}}else zog("zim methods - hitTestRect():\n please setBounds() on param b object")}},e.hitTestCircle=function(t,o,n){if(z_d("38"),t.stage&&o.stage&&!zot(t)&&!zot(o)&&t.hitTest&&o.getBounds){zot(n)&&(n=8);var i=o.getBounds();if(i){if(t.getBounds()&&!e.hitTestBounds(t,o))return!1;var r=i.x+i.width/2,a=i.y+i.height/2,s=o.localToLocal(r,a,t);if(t.hitTest(s.x,s.y))return!0;for(var l,d,c,u=(i.width+i.height)/2/2,h=0;h<n;h++)if(l=h/n*2*Math.PI,d=r+u*Math.cos(l),c=a+u*Math.sin(l),s=o.localToLocal(d,c,t),t.hitTest(s.x,s.y))return!0}else zog("zim methods - hitTestCircle():\n please setBounds() on param b object")}},e.hitTestBounds=function(t,o,n){if(z_d("39"),t.stage&&o.stage&&!zot(t)&&!zot(o)&&t.getBounds&&o.getBounds){var i=!1;n&&n.graphics&&(i=!0);var r=t.getBounds(),a=o.getBounds();if(r&&a){var s=e.boundsToGlobal(t),l=e.boundsToGlobal(o);if(i){var d=n.graphics;d.c(),d.ss(1).s("blue"),d.r(s.x,s.y,s.width,s.height),d.s("green"),d.r(l.x,l.y,l.width,l.height),n.stage.update()}return function(e,t){return!(e.x>=t.x+t.width||e.x+e.width<=t.x||e.y>=t.y+t.height||e.y+e.height<=t.y)}(s,l)}zog("zim methods - hitTestBounds():\n please setBounds() on both objects")}},e.boundsToGlobal=function(e,t,o){if(z_d("40"),!zot(e)&&e.getBounds){zot(o)&&(o=!1);var n=e.getBounds();if(n||!zot(t)){if(t&&(n=t),o)var i=e.globalToLocal(n.x,n.y),r=e.globalToLocal(n.x+n.width,n.y),a=e.globalToLocal(n.x+n.width,n.y+n.height),s=e.globalToLocal(n.x,n.y+n.height);else var i=e.localToGlobal(n.x,n.y),r=e.localToGlobal(n.x+n.width,n.y),a=e.localToGlobal(n.x+n.width,n.y+n.height),s=e.localToGlobal(n.x,n.y+n.height);var l=Math.min(i.x,r.x,a.x,s.x),d=Math.min(i.y,r.y,a.y,s.y),c=Math.max(i.x,r.x,a.x,s.x),u=Math.max(i.y,r.y,a.y,s.y);return new createjs.Rectangle(l,d,c-l,u-d)}zog("zim methods - boundsToGlobal():\n please setBounds() on object (or a rectangle)")}},e.hitTestGrid=function(e,t,o,n,i,r,a,s,l,d,c,u,h){if(z_d("41"),!e.stage)return!1;if(!zot(e)&&!u){var f=e.globalToLocal(r,a);r=f.x,a=f.y}zot(s)&&(s=0),zot(l)&&(l=0),zot(d)&&(d=0),zot(c)&&(c=0);var p=t/n,m=o/i,g=Math.min(n-1,Math.max(0,Math.floor((r-s)/p))),z=Math.min(i-1,Math.max(0,Math.floor((a-l)/m)));if(!(r-s>p*(g+1)-d||r-s<p*g||a-l>m*(z+1)-c||a-l<m*z)){var v=z*n+g;return zot(h)||"index"==h?v:"col"==h?g:"row"==h?z:"array"==h?[v,g,z]:void 0}},e.move=function(t,o,n,i,r,a,s,l,d,c,u,h,f,p,m,g,z,v,b,y,w,x,T,C,k,M,j,E,S,A,P,O,D,I){var B;if(B=zob(e.move,arguments,"target, x, y, time, ease, call, params, wait, waitedCall, waitedParams, loop, loopCount, loopWait, loopCall, loopParams, loopWaitCall, loopWaitParams, rewind, rewindWait, rewindCall, rewindParams, rewindWaitCall, rewindWaitParams, sequence, sequenceCall, sequenceParams, sequenceReverse, ticker, props, protect, override, from, set, id"))return B;if(z_d("44"),!zot(o)||!zot(n)){var L={x:zik(o),y:zik(n)};return zot(o)?L={y:zik(n)}:zot(n)&&(L={x:zik(o)}),e.animate(t,L,i,r,a,s,l,d,c,u,h,f,p,m,g,z,v,b,y,w,x,T,C,k,M,j,E,S,null,A,P,O,D,I)}},e.animate=function(t,o,n,i,r,a,s,l,d,c,u,h,f,p,m,g,z,v,b,y,w,x,T,C,k,M,j,E,S,A,P,O,D,I){function B(){for(var t,n,i=s,r=0,a=0;a<o.length;a++)if(t=o[a],!zot(t.target)){zot(t.time)&&(t.time=ie),i+=t.wait?t.wait:0,n=t.time,t.rewind&&(n=2*n+(t.rewindWait?t.rewindWait:0)),t.loop&&(n*=t.loopCount,n+=(t.loopCount-1)*(t.loopWait?t.loopWait:0));var l={target:t.target,obj:e.copy(t.obj),wait:r+i,waitedCall:t.waitedCall,waitedParams:t.waitedParams,time:t.time,ease:t.ease,from:t.from,rewind:t.rewind,call:t.call,params:t.params,loop:t.loop,loopCount:t.loopCount,loopWait:t.loopWait,loopCall:t.loopCall,loopParams:t.loopParams,loopWaitCall:t.loopWaitCall,loopWaitParams:t.loopWaitParams,rewind:t.rewind,rewindWait:t.rewindWait,rewindCall:t.rewindCall,rewindParams:t.rewindParams,rewindWaitCall:t.rewindWaitCall,rewindWaitParams:t.rewindWaitParams,set:e.copy(t.masterSet),override:!1,id:I};a==o.length-1&&L(l),e.animate(l),r+=i+n,i=0}}function L(e){E.loop&&(!E.count||de<E.count)?e.call=function(){function e(){for(var e=0;e<le.objects.length;e++)le.objects[e].set&&le.objects[e].set(le.values[e]);E.loopWaitCall&&"function"==typeof E.loopWaitCall&&E.loopWaitCall(E.loopWaitParams),B()}E.loopCall&&"function"==typeof E.loopCall&&E.loopCall(E.loopParams),E.loopWait?re=t.zimTweens[I]=t.zimTween=createjs.Tween.get(t,{override:E.override}).wait(E.loopWait).call(e):e()}:e.call=function(){r&&"function"==typeof r&&r(a),q(I)},de++}function X(){zot(I)?I=e.makeID(10):(I=String(I),se=I),zot(t.zimIdSets)&&(t.zimIdSets={}),zot(t.zimIdSets[I])?zot(t.zimTweens[I])||(ae=I,I=e.makeID(10),t.zimIdSets[ae]=[ae],t.zimTweens[ae].zimIdSet=ae,t.zimIdSets[ae].push(I)):(ae=I,I=e.makeID(10),t.zimIdSets[ae].push(I))}function Y(e,t,o,n){var i={};for(oe in t)o&&!zot(o[oe])?i[oe]=o[oe]:i[oe]=e[oe],n&&(e[oe]=t[oe]);return i}function _(){pe&&"function"==typeof pe&&pe(me)}function R(){ge&&"function"==typeof ge&&ge(ze)}function W(){ye&&"function"==typeof ye&&ye(we)}function F(){xe&&"function"==typeof xe&&xe(Te)}function N(){var e=Z();t.set&&!O&&t.set(D),re=t.zimTweens[I]=t.zimTween=createjs.Tween.get(t,E).to(o,ie,createjs.Ease[i]).call(F).wait(be).call(W).to(e,ie,createjs.Ease[ve]).call(G).wait(fe).call(_),V()}function H(){t.set&&!O&&t.set(D),re=t.zimTweens[I]=t.zimTween=createjs.Tween.get(t,E).to(o,ie,createjs.Ease[i]).call(G).wait(fe).call(_),V()}function G(){if(E.loop){if(!(he>0))return void R();if(de<he)return R(),void de++;z?t.set&&t.set(Z()):t.set&&t.set(o)}q(I),r&&"function"==typeof r&&r(a)}function Z(){var e={};for(var n in o)S?zot(D[n])||O?e[n]=t.style[n]:e[n]=D[n]:zot(D[n])||O?e[n]=t[n]:e[n]=D[n];return e}function U(o){if(t.zimBusy){for(var n in o)delete t.zimBusy[n];e.isEmpty(t.zimBusy)&&(t.zimBusy=null)}}function V(){re.zimObj=o,re.zimTicker=Ce,re.zimPaused=ke,ae&&(re.zimIdSet=ae),se&&(zot(e.idSets)&&(e.idSets={}),zot(e.idSets[se])?e.idSets[se]=[t]:e.idSets[se].indexOf(t)<0&&e.idSets[se].push(t)),e.animatedObjects||(e.animatedObjects=new e.Dictionary(!0)),e.animatedObjects.add(t,!0)}function q(o){if(!zot(t.zimTweens)&&!zot(t.zimTweens[o])){U(t.zimTweens[o].zimObj),t.zimTweens[o].paused=!0,K(o);var n=t.zimTweens[o].zimIdSet;if(!zot(n)&&t.zimIdSets){var i=t.zimIdSets[n];i&&i.splice(i.indexOf(o),1),i&&0==i.length&&(delete t.zimIdSets[n],e.isEmpty(t.zimIdSets)&&delete t.zimIdSets)}if(delete t.zimTweens[o],e.isEmpty(t.zimTweens)&&t.stopAnimate(),t.zimTweens&&t.zimTweens[o]||t.zimIdSets&&t.zimIdSets[n||o]);else if(e.idSets&&e.idSets[n||o]){e.idSets[n||o];var r=e.idSets[n||o].indexOf(t);r>=0&&e.idSets[n||o].splice(r,1),e.idSets[n||o].length<=0&&(delete e.idSets[n||o],e.isEmpty(e.idSets)&&delete e.idSets)}}}function K(o){-function(){var n=t.zimTweens[o].zimTicker;setTimeout(function(){n&&e.Ticker.remove(n),n=null},200)}()}function Q(o,n){var i=t.zimTweens[o];i.paused=n,n!=i.zimPaused&&(i.zimPaused=n,n?i.zimTicker&&(i.zimAnimateTimeout=setTimeout(function(){e.Ticker.remove(i.zimTicker)},200)):(clearTimeout(i.zimAnimateTimeout),i.zimTicker&&e.Ticker.add(i.zimTicker,ce)))}function J(e){for(var o=[],n=0;n<e.length;n++)t.zimIdSets&&!zot(t.zimIdSets[e[n]])?o=o.concat(t.zimIdSets[e[n]]):o.push(e[n]);return o}var $;if($=zob(e.animate,arguments,"target, obj, time, ease, call, params, wait, waitedCall, waitedParams, loop, loopCount, loopWait, loopCall, loopParams, loopWaitCall, loopWaitParams, rewind, rewindWait, rewindCall, rewindParams, rewindWaitCall, rewindWaitParams, sequence, sequenceCall, sequenceParams, sequenceReverse, ticker, props, css, protect, override, from, set, id"))return $;if(z_d("45"),0!=e.ANIMATE&&(window.zns||ANIMATE)){t=zik(t),n=zik(n),i=zik(i),s=zik(s),u=zik(u),h=zik(h),z=zik(z),v=zik(v),M=zik(M),O=zik(O),D=zik(D);var ee={override:!0};if(zot(c)||(ee.loop=c),zot(u)||(ee.count=u),zot(h)||(ee.loopWait=h),zot(f)||(ee.loopCall=f),zot(g)||(ee.loopWaitParams=g),zot(m)||(ee.loopWaitCall=m),zot(p)||(ee.loopParams=p),zot(z)||(ee.rewind=z),zot(v)||(ee.rewindWait=v),zot(b)||(ee.rewindCall=b),zot(y)||(ee.rewindParams=y),zot(w)||(ee.rewindWaitCall=w),zot(x)||(ee.rewindWaitParams=x),zot(E)||(ee=e.merge(ee,E)),E=ee,zot(T)&&(T=0),T>0&&t.addChild){for(var te=[],oe=0;oe<t.numChildren;oe++)te.push(t.getChildAt(oe));t=te}if(t instanceof Array){M&&t.reverse();for(var ne=0,oe=0;oe<t.length;oe++)-function(){var l=oe;if(O){var d;t[oe].zimObj={};for(var c in o)d=o[c],t[oe].zimObj[c]=t[oe][c],t[oe][c]=d}else t[oe].zimObj=o;setTimeout(function(){var o=t[ne];if(ne++,e.animate(o,o.zimObj,n,i,r,a,s,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,j,e.copy(E),S,A,P,null,D,I),l==t.length-1&&C){var d=n||1e3;E&&E.rewind&&(d+=(n||1e3)+(E.rewindWait?E.rewindWait:0)),E&&E.loop&&E.loopWait&&(d+=E.loopWait),setTimeout(function(){C(k)},d)}},T*oe)}()}else{var ie=n;zot(ie)&&(ie=1e3),zot(i)&&(i="quadInOut"),zot(s)&&(s=0),zot(E)&&(E={override:!0}),zot(a)&&(a=t),zot(j)&&(j=!0),zot(S)&&(S=!1),zot(A)&&(A=!1),zot(O)&&(O=!1),zot(D)&&(D={}),D.scale&&(D.scaleX=D.scaleY=D.scale,delete D.scale),zot(P)||(E.override=P);var re,ae,se;if(o instanceof Array){var le,de=1;return 0==o.length?this:(function(){var n=new e.Dictionary;le=new e.Dictionary;for(var r=0;r<o.length;r++)if(ue=o[r],t||(t=ue.target),zot(ue.target)&&(ue.target=t),zot(ue.ease)&&(ue.ease=i),!zot(ue.target)){if(ue.loop&&(zot(ue.loopCount)||ue.loopCount<=0)&&(ue.loopCount=0,o.splice(r+1,o.length)),zot(ue.obj.scale)||(ue.obj.scaleX=ue.obj.scaleY=ue.obj.scale,delete ue.obj.scale),ue.from){var a=n.at(ue.target);if(a){if(ue.set){var s=e.copy(ue.obj),l=e.merge(a,ue.set);ue.obj=Y(ue.target,ue.obj,l),ue.set=e.merge(ue.set,s)}else ue.set=e.copy(ue.obj),ue.obj=Y(ue.target,ue.obj,a);ue.from=!1}else n.add(ue.target,Y(ue.target,ue.obj,ue.set))}var d={};for(var c in ue.obj)d[c]=ue.set&&ue.set[c]?ue.set[c]:ue.target[c];zot(le.at(ue.target))&&le.add(ue.target,{});var u=e.merge(le.at(ue.target),d);le.remove(ue.target),le.add(ue.target,u),ue.masterSet=e.copy(ue.set)}zot(t.zimTweens)&&(t.zimTweens={})}(),X(),B(),t)}if(!zot(t)){S&&(j=!1),zot(t.zimTweens)&&(t.zimTweens={});var ce;if(t.stage)ce=t.stage;else{if(!zimDefaultFrame)return;ce=zimDefaultFrame.stage}zot(o.scale)||(o.scaleX=o.scaleY=zik(o.scale),delete o.scale);for(var ue in o){if(!t.zimBusy)break;t.zimBusy[ue]&&delete o[ue]}if(!e.isEmpty(o)){(A||E.loop||E.rewind)&&(t.mouseEnabled=!1,setTimeout(function(){t.zimBusy||(t.zimBusy={});for(var e in o)t.zimBusy[e]=!0;t.mouseEnabled=!0},70)),X();for(var oe in o)o[oe]=zik(o[oe]);for(oe in D)D[oe]=zik(D[oe]);for(oe in E)"waitedCall"!=oe&&"waitedParams"!=oe&&"loopCall"!=oe&&"rewindCall"!=oe&&"loopWaitCall"!=oe&&"rewindWaitCall"!=oe&&(E[oe]=zik(E[oe]));for(oe in o)"string"==typeof o[oe]&&(o[oe]=t[oe]+Number(o[oe].replace(/\s/g,"")));for(oe in D)"string"==typeof D[oe]&&(D[oe]=t[oe]+Number(D[oe].replace(/\s/g,"")));O&&(o=Y(t,o,D,!0));var he=0;if(E.loop&&!zot(E.count)){he=E.count,delete E.count;de=1}var fe=0;E.loopWait&&(fe=E.loopWait,delete E.loopWait);var pe;E.loopCall&&(pe=E.loopCall,delete E.loopCall);var me=t;E.loopParams&&(me=E.loopParams,delete E.loopParams);var ge;E.loopWaitCall&&(ge=E.loopWaitCall,delete E.loopWaitCall);var ze=t;if(E.loopWaitParams&&(ze=E.loopWaitParams,delete E.loopWaitParams),E.rewind){if(i){var ve=i;-1==ve.indexOf("InOut")&&(-1!=ve.indexOf("Out")?ve=ve.replace("Out","In"):-1!=ve.indexOf("In")&&(ve=ve.replace("In","Out")))}var be=0;delete E.rewind,E.rewindWait&&(be=E.rewindWait,delete E.rewindWait);var ye;if(E.rewindCall){ye=E.rewindCall;var we=E.rewindParams;zot(we)&&(we=t),delete E.rewindCall,delete E.rewindParams}var xe;if(E.rewindWaitCall){xe=E.rewindWaitCall;var Te=E.rewindWaitParams;zot(Te)&&(Te=t),delete E.rewindWaitCall,delete E.rewindWaitParams}s>0?re=t.zimTweens[I]=t.zimTween=createjs.Tween.get(t,{override:E.override}).wait(s).call(function(){l&&"function"==typeof l&&l(zot(d)?t:d),N()}):N()}else s>0?re=t.zimTweens[I]=t.zimTween=createjs.Tween.get(t,{override:E.override}).wait(s).call(function(){l&&"function"==typeof l&&l(zot(d)?t:d),H()}):H();var Ce;!S&&j&&(Ce=t.zimMask?e.Ticker.add(function(){e.copyMatrix(t.zimMask,t),t.zimMask.regX=t.regX,t.zimMask.regY=t.regY},ce):e.Ticker.add(function(){},ce));var ke=!1;return V(),t.stopAnimate&&t.stopAnimate.real||(t.stopAnimate=function(o,n){if(zot(n)&&(n=!0),zot(o)){if(!n)return;t.zimBusy=null,createjs.Tween.removeTweens(t);for(var i in t.zimTweens)K(i);t.zimTweens=null,t.zimIdSets=null,e.idSets&&e.idSets[ae||i]&&(delete e.idSets[ae||i],e.isEmpty(e.idSets)&&delete e.idSets),e.animatedObjects.remove(t)}else{Array.isArray(o)||(o=[o]);var r=J(o);for(var i in t.zimTweens)n&&r.indexOf(i)>=0&&q(i),!n&&r.indexOf(i)<0&&q(i)}return t},t.stopAnimate.real=!0,t.pauseAnimate=function(e,o,n){if(zot(e)&&(e=!0),zot(n)&&(n=!0),!zot(o)||n){if(zot(o))for(var i in t.zimTweens)Q(i,e);else{Array.isArray(o)||(o=[o]);var r=J(o);for(var i in t.zimTweens)n&&r.indexOf(i)>=0&&Q(i,e),!n&&r.indexOf(i)<0&&Q(i,e)}return t}}),t}}}}},e.stopAnimate=function(t){if(z_d("45.12"),zot(t)){if(e.animatedObjects)for(i=e.animatedObjects.length-1;i>=0;i--)e.animatedObjects.objects[i].stopAnimate()}else if(Array.isArray(t)||(t=[t]),e.idSets)for(var o=0;o<t.length;o++){var n=t[o];if(e.idSets[n])for(var i=e.idSets[n].length-1;i>=0;i--)e.idSets[n][i].stopAnimate(n)}},e.stopZimAnimate=function(t){z_d("45.1"),e.stopAnimate(t)},e.pauseAnimate=function(t,o){if(z_d("45.22"),zot(t)&&(t=!0),zot(o)){if(e.animatedObjects)for(r=e.animatedObjects.length-1;r>=0;r--)e.animatedObjects.objects[r].pauseAnimate(t)}else if(Array.isArray(o)||(o=[o]),e.idSets)for(var n=0;n<o.length;n++){var i=o[n];if(e.idSets[i])for(var r=e.idSets[i].length-1;r>=0;r--)e.idSets[i][r].pauseAnimate(t,i)}},e.pauseZimAnimate=function(t,o){z_d("45.2"),e.pauseAnimate(t,o)},e.wiggle=function(t,o,n,i,r,a,s,l,d,c,u,h){function f(){var p=e.rand(a,s),z={},v={};if(v[o]=n,"negative"==l||0==g&&"negative"==h)b=-e.rand(i,r,c);else if("positive"==l||0==g&&"positive"==h)b=e.rand(i,r,c);else if(0==g)b=e.rand(i,r,c,!0);else var b=e.rand(i,r,c)*e.sign(m)*-1;z[o]=n+b,0==g&&(p/=2),m=b,g++,"negative"==l||"positive"==l?e.animate({target:t,obj:z,set:v,ease:d,time:2*p,rewind:!0,override:!1,call:f,id:u,ticker:!!t.stage}):e.animate({target:t,obj:z,ease:d,time:p,override:!1,call:f,id:u,ticker:!!t.stage})}var p;if(p=zob(e.wiggle,arguments,"target, property, baseAmount, minAmount, maxAmount, minTime, maxTime, type, ease, integer, id, startType"))return p;if(z_d("45.25"),zot(t)||zot(n)||zot(i))return t;zot(r)&&(r=i),zot(a)&&(a=1e3),zot(s)&&(s=a),zot(d)&&(d="quadInOut"),zot(c)&&(c=!1),zot(u)&&(u=e.makeID()),zot(l)&&(l="both"),zot(h)&&(h="both");var m,g=0;return f(),t},e.loop=function(t,o,n,i,r,a){function s(e){return zot(r)&&(r=n?e:0),zot(a)&&(a=n?0:e),n&&a>r||!n&&r>a?0:(r<0&&a)<0||r>e&&a>e?0:(r=Math.max(0,Math.min(r,e)),a=Math.max(0,Math.min(a,e)),Math.floor((n?r-a:a-r)/i)+1)}var l;if(l=zob(e.loop,arguments,"obj, call, reverse, step, start, end"))return l;if(z_d("45.3"),!zot(t)&&!zot(o)){zot(n)&&(n=!1),(zot(i)||i<=0)&&(i=1);var d="number"==typeof t?"number":t.constructor===Array?"array":t.constructor==={}.constructor?"object":"container";if("container"!=d||t.addChild)if("number"==d||"array"==d){if(0==(p=s((u="number"==d?t:t.length)-1)))return;if(n)for(f=r;f>=a;f-=i){if("number"==d)c=o(f,p,r,a,t);else c=o(t[f],f,p,r,a,t);if(void 0!==c)return c}else for(f=r;f<=a;f+=i){if("number"==d)c=o(f,p,r,a,t);else var c=o(t[f],f,p,r,a,t);if(void 0!==c)return c}}else if("object"==d){var u=0,h=[];for(var f in t)u++,h.push(f);if(0==(p=s(u-1)))return;if(n){for(f=r;f>=a;f-=i)if(void 0!==(c=o(h[f],t[h[f]],f,p,r,a,t)))return c}else for(f=r;f<=a;f+=i)if(void 0!==(c=o(h[f],t[h[f]],f,p,r,a,t)))return c}else{var p=s(t.numChildren-1);if(0==p)return;if(n){for(f=r;f>=a;f-=i)if(void 0!==(c=o(t.getChildAt(f),f,p,r,a,t)))return c}else for(f=r;f<=a;f+=i)if(void 0!==(c=o(t.getChildAt(f),f,p,r,a,t)))return c}}},e.copyMatrix=function(e,t){return z_d("45.5"),e.x=t.x,e.y=t.y,e.scaleX=t.scaleX,e.scaleY=t.scaleY,e.regX=t.regX,e.regY=t.regY,e.rotation=t.rotation,e.skewX=t.skewX,e.skewY=t.skewY,e},e.pos=function(e,t,o){if(z_d("41.5"),!zot(e))return zot(t)||(e.x=t),zot(o)||(e.y=o),e},e.mov=function(e,t,o){if(z_d("41.6"),!zot(e))return zot(t)||(e.x+=t),zot(o)||(e.y+=o),e},e.alp=function(e,t){if(z_d("41.7"),!zot(e))return zot(t)||(e.alpha=t),e},e.rot=function(e,t){if(z_d("41.8"),!zot(e))return zot(t)||(e.rotation=t),e},e.siz=function(e,t,o,n){if(z_d("41.85"),!zot(e))return zot(n)&&(n=!1),zot(t)||zot(o)?zot(t)?zot(o)||(n?e.heightOnly=o:e.height=o):n?e.widthOnly=t:e.width=t:(e.widthOnly=t,e.heightOnly=o),e},e.ske=function(e,t,o){if(z_d("41.9"),!zot(e))return zot(t)||(e.skewX=t),zot(o)||(e.skewY=o),e},e.reg=function(e,t,o){if(z_d("41.95"),!zot(e))return zot(t)||(e.regX=t),zot(o)||(e.regY=o),e},e.sca=function(e,t,o){if(z_d("41.97"),!zot(e)&&!zot(e.scaleX))return zot(t)&&(t=e.scaleX),zot(o)&&(o=t),e.scaleX=t,e.scaleY=o,e},e.scaleTo=function(t,o,n,i,r,a){var s;if(s=zob(e.scaleTo,arguments,"obj, boundObj, percentX, percentY, type, boundsOnly"))return s;if(z_d("43"),!zot(t)&&t.getBounds&&t.getBounds()){if(!zot(o)&&o.getBounds&&o.getBounds()){zot(n)&&(n=-1),zot(i)&&(i=-1),-1==n&&-1==i&&(n=i=100),zot(r)&&(r="smallest"),zot(a)&&(a=!1);var l=o.getBounds().width*n/100*(a?1:o.scaleX),d=o.getBounds().height*i/100*(a?1:o.scaleY);if((-1==n||-1==i)&&"both"!=r&&"stretch"!=r)return-1==n?e.sca(t,d/t.getBounds().height):e.sca(t,l/t.getBounds().width),t;if("both"==r||"stretch"==r)return t.scaleX=-1!=n?l/t.getBounds().width:t.scaleX,t.scaleY=-1!=i?d/t.getBounds().height:t.scaleY,t;if("biggest"==r||"largest"==r||"outside"==r)c=Math.max(l/t.getBounds().width,d/t.getBounds().height);else var c=Math.min(l/t.getBounds().width,d/t.getBounds().height);return e.sca(t,c),t}zog("zim methods - scaleTo(): please provide a boundObject (with setBounds) to scale to")}else zog("zim methods - scaleTo(): please provide an object (with setBounds) to scale")},e.fit=function(t,o,n,i,r,a){var s;if(s=zob(e.fit,arguments,"obj, left, top, width, height, inside"))return s;if(z_d("46"),!zot(t)&&t.getBounds){if(t.getBounds()){if(zot(o)){if(!t.stage)return void zog("zim methods - fit(): please add boundary dimensions or add obj to stage first");if(!t.stage.getBounds())return void zog("zim methods - fit(): please add boundary dimensions or add obj with bounds to stage first");o=0,n=0,i=t.stage.getBounds().width,r=t.stage.getBounds().height}zot(a)&&(a=!0),t.scaleX=t.scaleY=1;var l,d=i,c=r,u=t.getBounds().width,h=t.getBounds().height;l=a?d/c>=u/h?c/h:d/u:d/c>=u/h?d/u:c/h,t.scaleX=t.scaleY=l;var f=u*l,p=h*l;return t.x=(t.regX-t.getBounds().x)*l+o+(d-f)/2,t.y=(t.regY-t.getBounds().y)*l+n+(c-p)/2,{x:t.x,y:t.y,width:f,height:p,scale:l,bX:o,bY:n,bWidth:i,bHeight:r}}zog("zim methods - fit(): please setBounds() on object")}},e.outline=function(t,o,n){var i;if(i=zob(e.outline,arguments,"obj, color, size"))return i;if(z_d("47"),zot(t)||!t.getBounds)return zog("zim methods - outline(): please provide object with bounds set"),t;if(!t.getBounds())return zog("zim methods - outline(): please setBounds() on object"),t;if(!t.parent)return zog("zim methods - outline(): object should be on stage first"),t;zot(o)&&(o="brown"),zot(n)&&(n=2);var r=t.getBounds(),a=new createjs.Shape,s=new createjs.Shape,l=t.parent,d=t.localToLocal(r.x,r.y,l),c=t.localToLocal(r.x+r.width,r.y,l),u=t.localToLocal(r.x+r.width,r.y+r.height,l),h=t.localToLocal(r.x,r.y+r.height,l),f=t.localToLocal(0,0,l),p=a.graphics,m=s.graphics;p.s(o).ss(n).mt(d.x,d.y).lt(c.x,c.y).lt(u.x,u.y).lt(h.x,h.y).lt(d.x,d.y).cp();var g=10;return m.s("white").ss(n+2),m.mt(-11,0).lt(11,0),m.mt(0,-11).lt(0,11),m.s(o).ss(n),m.mt(-g,0).lt(g,0),m.mt(0,-g).lt(0,g),s.x=f.x,s.y=f.y,s.rotation=t.rotation,p.s("white").ss(n+2).dc(t.x,t.y,16),p.s(o).ss(n).dc(t.x,t.y,16),t.parent.addChild(a),t.parent.addChild(s),a.mouseEnabled=!1,s.mouseEnabled=!1,t.stage&&t.stage.update(),t},e.addTo=function(e,t,o){if(z_d("47.5"),zot(e))zog("zim methods - addTo(): please provide object");else{if(!zot(t))return zot(o)||isNaN(o)?t.addChild(e):t.addChildAt(e,o),e;zog("zim methods - addTo(): please provide container")}},e.removeFrom=function(e,t){if(z_d("47.6"),zot(e))zog("zim methods - removeFrom(): please provide object");else{if(!zot(t))return t.removeChild(e),e;zog("zim methods - removeFrom(): please provide container")}},e.added=function(e,t,o,n){if(z_d("47.7"),!zot(e)&&!zot(t)&&"function"==typeof t){if(zot(o)&&(o=100),!e.stage){var i=Date.now(),r=setInterval(function(){n>0&&i-Date.now()>n&&clearInterval(r),e.stage&&(t(e.stage,e),clearInterval(r))},o);return r}t(e.stage,e)}},e.centerReg=function(t,o,n,i){var r;if(r=zob(e.centerReg,arguments,"obj, container, index, add"))return r;if(z_d("48"),zot(t)||!t.getBounds||!t.getBounds())return zog("zim methods - centerReg(): please provide object with bounds set"),t;var a=t.getBounds();return t.regX=a.x+a.width/2,t.regY=a.y+a.height/2,o?e.center(t,o,n,i):t},e.center=function(t,o,n,i){var r;if(r=zob(e.center,arguments,"obj, container, index, add"))return r;if(z_d("48.1"),!zot(t)&&t.getBounds){if(!zot(o)&&o.getBounds){var a=t.getBounds(),s=o.getBounds();if(zot(i)&&(i=!0),i&&o.addChild&&(zot(n)||"number"==typeof n&&isNaN(n)?o.addChild(t):o.addChildAt(t,n)),zot(s))return t;if(zot(a))return t.x=o.getBounds().width/2,t.y=o.getBounds().height/2,t;var l=t.localToLocal(t.regX,t.regY,o),d=e.boundsToGlobal(t),c=e.boundsToGlobal(o,d,!0);if(t.x=s.x+s.width/2-c.width/2+(l.x-c.x),t.y=s.y+s.height/2-c.height/2+(l.y-c.y),!i&&o.getStage&&o.stage&&t.parent){var u=o.localToLocal(t.x,t.y,t.parent);t.x=u.x,t.y=u.y}return t}zog("zim.center(): please provide container with bounds")}else zog("zim.center(): please provide object with bounds")},e.place=function(t,o){if(z_d("49"),!zot(t))return zot(o)&&(o="obj"),e.drag({obj:t,currentTarget:!0,dragCursor:"crosshair"}),zog("place "+o+" - to get new position"),t.on("click",function(){zog(o+".x = "+Math.round(t.x)+"; "+o+".y = "+Math.round(t.y)+";"),zog(o+".pos("+Math.round(t.x)+", "+Math.round(t.y)+");")}),t},e.placeReg=function(t,o){if(z_d("49.5"),!zot(t)){var n=t.stage;if(zot(n))zog("zim.placeReg() - add object to stage before calling placeReg()");else{zot(o)&&(o="obj");var i=t.parent.localToGlobal(t.x,t.y),r=new e.Shape(-25,-25,50,50).addTo(n).pos(i.x,i.y);r.graphics.s("white").mt(-25,0).lt(25,0).mt(0,-25).lt(0,20),r.compositeOperation="difference",r.expand(0),e.drag({obj:r}),zog("place cursor to get new registration point location"),n.on("stagemouseup",function(){var e=t.globalToLocal(r.x,r.y);zog(o+".regX = "+Math.round(e.x)+"; "+o+".regY = "+Math.round(e.y)+";"),zog(o+".reg("+Math.round(e.x)+", "+Math.round(e.y)+");")})}}},e.expand=function(e,t,o){if(z_d("50"),zot(e)||!e.getBounds||!e.getBounds())return zog("zim methods - expand(): please provide object with bounds set"),e;zot(t)&&(t=20),zot(o)&&(o=t);var n=e.getBounds(),i=new createjs.Shape;return i.graphics.f("0").r(n.x-t,n.y-o,n.width+2*t,n.height+2*o),e.hitArea=i,e},e.setMask=function(t,o){z_d("50.1");{if(!zot(t)){var n;return o&&o.shape?(o.zimMask=n=o.shape.clone(),e.copyMatrix(n,o),n.regX=o.regX,n.regY=o.regY,n.centerReg||zimify(n),o.addChildAt(n,0),n.alpha=0):n=o,t.mask=n,n}zog("zim methods - setMask(): please provide obj")}},e.ANIMATE=!0,e.OPTIMIZE=!1,e.ACTIONEVENT="mousedown",e.Ticker={stages:null,myUpdate:null,alwaysList:new e.Dictionary,list:new e.Dictionary,setFPS:function(t,o){zot(t)&&zot(o)?(t=30,o=60):zot(t)?t=30:zot(o)&&(o=t),e.Ticker.framerate=createjs.Ticker.framerate=e.mobile()?t:o},setTimingMode:function(e){createjs.Ticker.timingMode=createjs.Ticker.RAF,"synched"==e&&(createjs.Ticker.timingMode=createjs.Ticker.RAF_SYNCHED),"timeout"==e&&(createjs.Ticker.timingMode=createjs.Ticker.TIMEOUT)},add:function(t,o){z_d("30");var n=e.Ticker;return n.has(t,o)?t:(n.framerate||n.setFPS(),!zot(o)&&o.update||(o=zimDefaultFrame.stage),zot(t)||"function"!=typeof t?void zog("zim.Ticker.add() - only add functions"):(n.ticker||(n.ticker=createjs.Ticker.on("tick",n.call)),n.list.at(o)?n.list.at(o).push(t):n.list.add(o,[t]),t))},call:function(t){for(var o,n,i=e.Ticker,r=0;r<i.list.length;r++){o=i.list.objects[r],n=i.list.values[r];for(var a=0;a<n.length;a++)n[a]();i.alwaysList.at(o)?o.update():n.length>0&&(!zot(i.update)||e.OPTIMIZE||!zns&&OPTIMIZE?i.update&&o.update():o.update())}for(r=0;r<i.alwaysList.length;r++)o=i.alwaysList.objects[r],null==i.list[o]&&o.update()},always:function(t){z_d("30");var o=e.Ticker;o.framerate||o.setFPS(),!zot(t)&&t.update||(t=zimDefaultFrame.stage),o.alwaysList.add(t,!0),o.ticker||(o.ticker=createjs.Ticker.on("tick",o.call))},alwaysOff:function(t){var o=e.Ticker;!zot(t)&&t.update||(t=zimDefaultFrame.stage),o.alwaysList.remove(t)},remove:function(t){var o=e.Ticker;if(zot(t)||"function"!=typeof t)zog("zim.Ticker - only remove functions");else{for(var n=0,i=0;i<o.list.length;i++){o.list.objects[i];var r=o.list.values[i].indexOf(t);r>-1&&o.list.values[i].splice(r,1),n+=o.list.values[i].length}o.alwaysList.length>0||0==n&&(createjs.Ticker.off("tick",o.ticker),o.ticker=null)}},removeAll:function(t){for(var o,n=e.Ticker,i=0,r=0;r<n.list.length;r++)o=n.list.objects[r],(zot(t)||t===o)&&(n.list.values[r]=[]),i+=n.list.values[r].length;n.alwaysList.length>0||0==i&&(createjs.Ticker.off("tick",n.ticker),n.ticker=null)},has:function(t,o){return!zot(o)&&o.update||(o=zimDefaultFrame.stage),e.Ticker.list&&e.Ticker.list.at(o)&&e.Ticker.list.at(o).indexOf(t)>=0},dispose:function(t){for(var o,n=e.Ticker,i=0,r=n.list.length-1;r>=0;r--)o=n.list.objects[r],zot(t)||t===o?(n.list.remove(t),n.alwaysList.remove(t)):i+=n.list.values[r].length;if(!(n.alwaysList.length>0))return 0==i&&(createjs.Ticker.off("tick",n.ticker),n.ticker=null),!0}},Object.defineProperty(e.Ticker,"update",{get:function(){return e.Ticker.myUpdate},set:function(t){var o=e.Ticker;"boolean"!=typeof t&&(t=null),o.myUpdate=t,!1===o.myUpdate&&(cancelAnimationFrame(o.ticker),o.alwaysList=new e.Dictionary)}}),e.Accessibility=function(t,o,n,i,r,a,s,l,d,c,u,h,f,p){function m(e){var t=e.currentTarget.boundsToGlobal(),o=t.x+t.width/2,n=t.y+t.height/2;e.stageX<o-5||e.stageX>o+5||e.stageY<n-5||e.stageY>n+5?v():z()}function g(){Y&&(Y.innerHTML="")}function z(){Q=!0,x(),Y&&Y.setAttribute("aria-hidden",!1),e.ACTIONEVENT="click",a.stage.removeChild(B),I.alwaysHighlight=!1,a.stage.update();for(var t,o,n=0;n<N.length;n++)(o=(t=N[n]).obj.zimTabTag).disabled=!1,t.title=t.title.replace(/\s\(use arrow keys\)/,""),o.setAttribute("aria-label",t.title),o.addEventListener("focus",b)}function v(){Q=!1;for(var e=0;e<N.length;e++)N[e].obj.zimTabTag.disabled=!1;x(),s&&T()}function b(e){var t=e.currentTarget,o=t.zimObject;H=o.zimTabIndex,o.focus=!0;var n=new createjs.Event("change");n.title=t.getAttribute("aria-label"),I.dispatchEvent(n)}function y(e){Q=!1,e.target.focusTab.focus()}function w(){zot(Q)||Q?z():v()}function x(){K=!0,L.removeEventListener("focus",w),X.removeEventListener("focus",w),_.removeEventListener("focus",y),R.removeEventListener("focus",y),_.parentNode.removeChild(_),R.parentNode.removeChild(R),W.removeEventListener("focus",y),F.removeEventListener("focus",y),W.parentNode.removeChild(W),F.parentNode.removeChild(F);for(var e=0;e<J.length;e++)J[e][0].off("mousedown",J[e][1])}function T(){for(var e=0;e<G.length;e++){var t=G[e];(!t.zimObject||"Loader"!=t.zimObject.type&&"TextArea"!=t.zimObject.type)&&(G[e].style.left="-2000px")}}function C(e){var t=e.currentTarget;if("RadioButton"==t.type||"TabsButton"==t.type||"PadButton"==t.type)for(var o=0;o<t.zimTabParent.buttons.length;o++){var n=t.zimTabParent.buttons[o];n.zimTabTag.setAttribute("aria-label",n.zimTabTag.getAttribute("aria-label").split(" - currently")[0]+(t.zimTabParent.selectedIndex==n.tabIndex?" - currently selected.":" - currently not selected."))}I.tabIndex=e.currentTarget.zimTabIndex,I.activatedObject=t}function k(e){return"TextArea"==e.type||"RadioButtons"==e.type||"Tabs"==e.type||"Pad"==e.type?e.type:"Waiter"==e.type?"Waiter active - please wait":e.text?e.type+" - "+("a"==e.text||"A"==e.text?"eh":e.text):e.type+("Dial"==e.type||"Slider"==e.type||"ColorPicker"==e.type||"Stepper"==e.type?" (use arrow keys)":"")+("TextArea"==e.type?" (press ENTER to edit)":"")}function M(t){var o=t.obj;t.title=t.title.replace(/\.$/,""),"RadioButton"==o.type||"TabsButton"==o.type||"PadButton"==o.type?t.title=t.title+(o.tabIndex==o.zimTabParent.selectedIndex?" - currently selected":" - currently not selected"):"CheckBox"==o.type?t.title=t.title+(o.checked?" - currently checked":" - currently not checked"):"Stepper"==o.type?t.title=t.title+" - currently displaying "+o.currentValue:"Slider"==o.type||"Dial"==o.type?t.title=t.title+" - currently at "+e.decimals(o.currentValue,I.decimals):"ColorPicker"==o.type?t.title=t.title+" - currently at "+o.selectedColor:"TextArea"==o.type?t.title=t.title+(""!=o.tag.value?"":" - placeholder: "+o.tag.placeholder):"Indicator"==o.type&&(t.title=t.title+" - currently "+(o.selectedIndex>=0?"at "+(o.selectedIndex+1)+" of "+o.num:"not indicating")),t.title+="."}function j(e,t,o,n,i){var r,s;if(n&&(r=n.obj),n&&("TextArea"==r.type||"Loader"==r.type))return(s=r.tag).setAttribute("aria-label",t),r&&s.setAttribute("aria-hidden",!r.stage),"before"==i?o.parentNode.insertBefore(s,o):o.parentNode.insertBefore(s,o.nextSibling),s.style.zIndex=-5,s.zimObject=r,n.obj.zimTabTag=s,G.push(s),s;if(!n||"Dial"!=r.type&&"Slider"!=r.type&&"Stepper"!=r.type&&"ColorPicker"!=r.type)s=document.createElement("div"),r&&(s.zimObject=r),s.innerHTML="tag",s.setAttribute("role","button");else{var l=[];if("Dial"==r.type||"Slider"==r.type)for(var d=r.step<=0?(r.max-r.min)/20:r.step,c=r.min;c<r.max;c+=d)l.push(r.min+c);else"Stepper"==r.type?l=r.stepperArray:"ColorPicker"==r.type&&(l=r.colors);(s=document.createElement("select")).disabled=!0,s.zimObject=r,s.addEventListener("change",function(e){Q&&(e.currentTarget.zimObject.zimTabParent.currentValueEvent=e.target.value,a.stage.update())}),s.size=1;for(var u,h,c=0;c<l.length;c++)u=l[c],(h=document.createElement("option")).setAttribute("aria-label",u),h.innerHTML=u,s.add(h),u==r.zimTabParent.currentValue&&h.setAttribute("selected","selected");s.setAttribute("role","button")}if(s.setAttribute("id",e),s.setAttribute("tabindex",0),s.setAttribute("aria-label",t),r&&s.setAttribute("aria-hidden",!r.stage),"before"==i?o.parentNode.insertBefore(s,o):o.parentNode.insertBefore(s,o.nextSibling),s.style.position="absolute",n){var f=(r=n.obj).boundsToGlobal();s.style.left=a.x+f.x*a.scale+"px",s.style.top=a.y+f.y*a.scale+"px",s.style.width=f.width*a.scale+"px",s.style.height=f.height*a.scale+"px",n.obj.zimTabTag=s}else s.style.left="-1000px",s.style.top=a.y+"px";return s.style.overflow="hidden",s.style.zIndex=-5,s.style.fontSize="20px",G.push(s),s}function E(){for(var e=!1,t=0;t<G.length;t++)if(document.activeElement==G[t]){e=!0;break}return!(document.activeElement!=a.canvas&&!e)}function S(e){a.shiftKey||zid(V+"PrefixTab")!=document.activeElement&&a.canvas!=document.activeElement?!a.shiftKey||zid(V+"SuffixTab")!=document.activeElement&&zid(V+"BufferTab")!=document.activeElement||(N.length>0&&(N[0].obj.focus=!0),te=!0,ee=!0,A(e)):(N.length>0&&(N[N.length-1].obj.focus=!0),te=!0,ee=!0,A(e))}function A(e){e.ctrlKey?P(e.shiftKey?-1:1):(e.shiftKey?I.tab(-1):I.tab(1),e.preventDefault())}function P(e){ee=!1,zid(V+(1==e?"SuffixTab":"PrefixTab")).focus(),a.stage.removeChild(f),a.stage.update(),I.tabIndex=-1}var O;if(O=zob(e.Accessibility,arguments,"appName, tabOrder, tabIndex, cycle, decimals, frame, alwaysHighlight, AHTime, AHColor, AHBorderWidth, AHBorderPadding, AHAlpha, AHObject, AHObjectScale",this))return O;if(z_d("30.5"),this.cjsEventDispatcher_constructor(),zot(t)&&(t="application"),zot(i)&&(i=!1),zot(r)&&(r=2),zot(a)&&(a=zimDefaultFrame),zot(s)&&(s=!1),zot(l)&&(l=700),zot(d)&&(d="brown"),zot(c)&&(c=3),zot(u)&&(u=5),zot(h)&&(h=.8),zot(p)&&(p=.8),zot(f)){var D=new e.Shape;D.mouseEnabled=!1}else f.mouseEnabled&&(f.mouseEnabled=!1);var I=this;I.cycle=i,I.decimals=r,I.alwaysHighlight=s,I.AHTime=l,I.AHColor=d,I.AHBorderWidth=c,I.AHBorderPadding=u,I.AHAlpha=h,I.AHObjectScale=p;var B,L,X,Y,_,R,W,F,N=-1,H=-1,G=[],Z=[],U={RadioButtons:"option",Tabs:"tab",Pad:"key"},V=a.canvas.id,q=e.mobile(),K=!1,Q=null,J=[];Object.defineProperty(this,"tabOrder",{get:function(){return N},set:function(e){L&&L.removeEventListener("focus",g),X&&X.removeEventListener("focus",g);for(l=0;l<G.length;l++)G[l].outerHTML="";G=[];var o,n;for(l=0;l<Z.length;l++)(o=N[l])&&Z[l][0].off("mousedown",Z[l][1]);Z=[],N=[];for(var i=[],r=a.canvas,s=0,l=0;l<e.length;l++){if((o=e[l]).constructor=={}.constructor){if(!(n=o.obj)||!n.getStage)continue;o.title||(o.title=k(n))}else n=o,o={obj:o,title:k(o)};if("RadioButtons"==n.type||"Tabs"==n.type||"Pad"==n.type){var d=[];s--;for(var c=0;c<n.buttons.length;c++){s++;var u=n.buttons[c],h={obj:u,title:o.title+" - "+U[n.type]+": "+("a"==u.text||"A"==u.text?"eh":u.text)};d.push(h),u.zimTabParent=n,u.zimTabParent.zimAccessibility=I,u.zimTabIndex=l+s,u.tabIndex=c,u.zimAccessibility=I,M(h),r=j(V+"Tab"+(l+s),h.title,r,h),Z.push([u,u.on("mousedown",C)]),K||J.push([u,u.on("mousedown",m)])}i=i.concat(d)}else n.zimTabIndex=l+s,n.zimTabParent=n,M(o),n.zimAccessibility=I,Z.push([n,n.on("mousedown",C)]),K||J.push([n,n.on("mousedown",m)]),i.push(o),r=j(V+"Tab"+(l+s),o.title,r,o)}(L=I.startAppTag=j(V+"PrefixTab",t+" start",a.canvas,null,"before")).addEventListener("focus",g),K||(L.addEventListener("focus",w),(_=j(V+"noAriaTab","",L,null,"before")).setAttribute("aria-hidden",!0),_.focusTab=L,_.addEventListener("focus",y),(W=j(V+"noAriaTab","",L)).setAttribute("aria-hidden",!0),W.focusTab=L,W.addEventListener("focus",y)),r=j(V+"BufferTab","",r),q&&r.setAttribute("aria-hidden",!0),r=X=I.endAppTag=j(V+"SuffixTab",t+" end",r),X.addEventListener("focus",g),K||(X.addEventListener("focus",w),r=R=j(V+"noAriaTab","",X),R.setAttribute("aria-hidden",!0),R.focusTab=X,R.addEventListener("focus",y),(F=j(V+"noAriaTab","",X,null,"before")).setAttribute("aria-hidden",!0),F.focusTab=X,F.addEventListener("focus",y)),N=i}}),Object.defineProperty(this,"tabIndex",{get:function(){return H},set:function(t){function o(){if(H&&H>-1)N[H].obj.focus=!1;else for(var e=0;e<N.length;e++)N[e].obj.focus=!1}function n(){o(),ee=!1,I.AHObject&&a.stage.removeChild(I.AHObject),I.alwaysHighlightShape&&a.stage.removeChild(I.alwaysHighlightShape),a.stage.update(),H=-1}if(_state)if(t<0||t>=N.length)n();else{t!=H&&o();var i=N[t].obj;if(i.stage){if(H=t,i.focus=!0,ee=!0,te=!1,I.changeTitle(i),i.zimTabTag.focus(),setTimeout(function(){i.zimTabTag.focus();var e=new createjs.Event("change");e.title=i.zimTabTag.getAttribute("aria-label"),I.dispatchEvent(e)},150),I.alwaysHighlight&&!Q){if(I.AHObject){B=I.AHObject;var r=e.boundsToGlobal(i);I.AHObject.alp(I.AHAlpha).addTo(a.stage),I.AHObject.fit(r.x,r.y,r.width,r.height),I.AHObject.sca(I.AHObject.scaleX*I.AHObjectScale),I.AHTime>0&&($=setTimeout(function(){a.stage.removeChild(I.AHObject),a.stage.update()},I.AHTime))}else{B=D;var s=i.getBounds(),l=i.localToGlobal(s.x-5,s.y-5),d=i.localToGlobal(s.x+s.width+5,s.y-5),c=i.localToGlobal(s.x+s.width+5,s.y+s.height+5),u=i.localToGlobal(s.x-5,s.y+s.height+5),h=D.graphics;h.clear(),h.s(I.AHColor).ss(I.AHBorderWidth).mt(l.x,l.y).lt(d.x,d.y).lt(c.x,c.y).lt(u.x,u.y).lt(l.x,l.y).cp(),D.alpha=I.AHAlpha,I.AHTime>0&&($=setTimeout(function(){a.stage.removeChild(D),a.stage.update()},I.AHTime))}a.stage.addChild(B),a.stage.update()}}else n()}}}),Object.defineProperty(this,"aria",{get:function(){return Q},set:function(e){(Q=e)&&z()}}),zot(o)?setTimeout(function(){if(-1==N){N=[];var t=[];e.loop(a.stage,function(e){e.type&&t.push(e)}),I.tabOrder=t,zot(n)||(I.tabIndex=n)}},50):(N=[],I.tabOrder=o,zot(n)||(I.tabIndex=n));var $,ee=!1,te=!0,oe=a.on("keydown",function(e){if(9==e.keyCode&&(E()||(ee=!1,-1!=I.tabIndex&&(I.tabIndex=-1)),ee?A(e):S(e)),ee&&N.length>0&&I.tabIndex>=0&&13==e.keyCode){var t=N[I.tabIndex],o=t.obj;if(t&&o.stage){var n=new createjs.Event("mousedown"),i=new createjs.Event("click");n.fromEnter=i.fromEnter=!0,"Pane"==o.type?(o.backdrop.dispatchEvent(n),o.backdrop.dispatchEvent(i)):(o.dispatchEvent(n),o.dispatchEvent(i))}}});this.tab=function(e){if(clearTimeout($),B&&a.stage.removeChild(B),zot(e)&&(e=1),0!=N.length)for(var t=0;t<N.length;t++){var o=N[t].obj;if(o.focus){o.focus=!1;var n=t+e,i=(n+1e4*N.length)%N.length,r=N[i];o=r.obj;for(var s=0,l=!1;!o.stage||!(!o.zimTabParent&&(zot(o.enabled)||o.enabled)||o.zimTabParent&&(zot(o.zimTabParent.enabled)||o.zimTabParent.enabled));)if(s++,n+=e,i=(n+100*N.length)%N.length,r=N[i],o=r.obj,s==N.length){l=!0;break}if(l||!I.cycle&&n!=i&&!te)return void P(e);te=!1,I.tabIndex=i;break}}else P(e)},this.changeTitle=function(e,t,o){if("number"!=typeof e&&(e=e.zimTabIndex),!zot(e))if(o&&zot(t))I.tabIndex=e;else{var n=N[e],i=n.obj;zot(t)&&(t=i.zimTabTag.getAttribute("aria-label").split(" - currently")[0]),n.title=t,M(n),i.zimTabTag.setAttribute("aria-label",n.title),o&&(I.tabIndex=e)}};var ne=!1;this.talk=function(e){ne||((Y=j(V+"TalkTab","",X)).setAttribute("role","alert"),Y.setAttribute("aria-hidden",!Q),ne=!0),Y.setAttribute("aria-label",e),Y.innerHTML=" ",Y.innerHTML=e;var t=new createjs.Event("change");t.title=e,I.dispatchEvent(t)},this.resize=function(e){function t(e){if("TextArea"!=e.type&&"Loader"!=e.type){var t=e.boundsToGlobal(),o=e.zimTabTag;o.style.left=a.x+t.x*a.scale+"px",o.style.top=a.y+t.y*a.scale+"px",o.style.width=t.width*a.scale+"px",o.style.height=t.height*a.scale+"px",o.setAttribute("aria-hidden",!e.stage),o.hidden=!e.stage}else e.resize()}if(zot(e)){if(I.alwaysHighlight&&!zot(Q))return;for(var o=0;o<N.length;o++)t(N[o].obj)}else{if("number"!=typeof e&&(e=e.zimTabIndex),e<0)return;var n=N[e].obj;if(!n.stage&&B&&n==I.currentObject&&(a.stage.removeChild(B),a.stage.update()),I.alwaysHighlight&&!zot(Q))return;t(n)}},Object.defineProperty(this,"currentObject",{get:function(){return N[H]&&N[H].obj?N[H].obj:null},set:function(e){for(var t=0;t<N.length;t++)if(N[t].obj==e){I.tabIndex=t;break}}}),_state=!0,Object.defineProperty(this,"enabled",{get:function(){return _state},set:function(e){_state=e}}),this.dispose=function(){I.tabOrder=[];for(var e=0;e<G.length;e++)G[e].outerHTML&&(G[e].outerHTML="");I.removeAllEventListeners(),a.off("keydown",oe)}},e.extend(e.Accessibility,createjs.EventDispatcher,null,"cjsEventDispatcher",!1),e.Swipe=function(t,o,n){var i;if(i=zob(e.Swipe,arguments,"obj, distance, duration",this))return i;if(z_d("70"),this.cjsEventDispatcher_constructor(),!zot(t)&&t.on){zot(o)&&(o=30),zot(n)&&(n=80),this.distance=o,this.duration=n,this.active=!0;var r,a,s,l,d,c,u=this;t.on("mousedown",function(e){function o(){var e=new createjs.Event("swipe");e.obj=u.obj,e.swipeX=e.swipeY=0,u.direction="none",Math.abs(s-r)>Math.abs(l-a)?(s-r>u.distance&&(e.swipeX=1,u.direction="right"),r-s>u.distance&&(e.swipeX=-1,u.direction="left")):(l-a>u.distance&&(e.swipeY=1,u.direction="down"),a-l>u.distance&&(e.swipeY=-1,u.direction="up")),u.dispatchEvent(e)}u.active&&!e.target.zimNoSwipe&&(u.obj=e.target,s=r=e.stageX,l=a=e.stageY,d=!0,u.dispatchEvent("swipedown"),clearTimeout(c),c=setTimeout(function(){d&&(o(),d=!1)},u.duration),t.on("pressmove",function(e){s=e.stageX,l=e.stageY}),t.on("pressup",function(e){d&&(o(),d=!1,clearTimeout(c))}))}),this.disable=function(){u.active=!1},this.enable=function(){u.active=!0}}else zog("zim controls - Swipe():\nPlease pass in object")},e.extend(e.Swipe,createjs.EventDispatcher,null,"cjsEventDispatcher",!1),e.Pages=function(t,o,n,i,r){function a(){(d=new createjs.Shape).graphics.f("black").r(0,0,u,h+1),(c=new createjs.Shape).graphics.f("white").r(0,0,u,h+1)}var s;if(s=zob(e.Pages,arguments,"pages, transition, speed, transitionTable, holder",this))return s;if(z_d("71"),this.zimContainer_constructor(),this.type="Pages",zot(t)&&(t=[]),this.pages=t,zot(o)&&(o="none"),zot(n)&&(n=200),zot(i)&&(i=[]),this.transitionTable=i,zot(r)&&zimDefaultFrame&&(r=zimDefaultFrame.stage),r.getBounds&&r.getBounds()){this.speed=n,this.active=!0;var l=this;l.transitioning=!1;var d,c,u=r.getBounds().width,h=r.getBounds().height;"none"==o&&i==[]||a();for(var f,p,m=["left","right","up","down"],g=0;g<t.length;g++)(f=t[g]).constructor!=={}.constructor&&(f=t[g]={page:t[g]}),f.page.zimSwipeArray=f.swipe?f.swipe:[],f.page.zimOriginalAlpha=f.page.alpha,f.page.parent&&f.page.parent.removeChild(f.page);var z=this.page=t[0]?t[0].page:null;this.addChild(z),this.swipe=new e.Swipe(r);var v,b=!1,y=this.swipe.on("swipe",function(e){if(l.active){var t=e.currentTarget.direction;if("none"!=t){var o="";"left"==t?o="right":"right"==t?o="left":"up"==t?o="down":"down"==t&&(o="up"),t=o;var n=m.indexOf(t);p=z.zimSwipeArray[n],v=[p,t,null,null,!0],l.page=z,l.nextPage=p,l.direction=t,l.dispatchEvent("swipe"),setTimeout(function(){b||l.go(p,t,null,null,!0)},50)}}});this.addPage=function(e,t){zot(t)&&(t=[]);var o={page:e,swipe:t};o.page.zimSwipeArray=o.swipe?o.swipe:[],o.page.zimOriginalAlpha=o.page.alpha,z?o.page.parent&&o.page.parent.removeChild(o.page):(z=l.page=o.page,l.addChild(z))},this.removePage=function(e){l.currentPage==e&&(l.removeChild(e),r.stage&&r.stage.update()),e.zimSwipeArray=null},this.setSwipe=function(e,t){zot(t)&&(t=[]);var o={page:e,swipe:t};o.page.zimSwipeArray=o.swipe?o.swipe:[]},this.pause=function(){b=!0},this.unpause=function(){b&&l.go(v[0],v[1],v[2],v[3],v[4])};var w=!0;this.go=function(t,i,a,s,f){function p(e){e[0].uncache(),e[1].uncache(),l.transitioning=!1,l.dispatchEvent("pagetransitioned"),l.removeChild(l.lastPage),l.removeChild(d),l.removeChild(c),w=!0}function g(t){l.removeChild(l.lastPage),e.animate(t.shift(),{alpha:0},l.speed/2,null,p,t)}if("number"==typeof t){var v=l.pages[t];if(zot(v))return;t=v.page}setTimeout(function(){b=!1},200);for(var y=[{x:u},{x:-u},{y:h},{y:-h}],x=[{x:0},{x:0},{y:0},{y:0}],T=[{x:u/2,alpha:0},{x:-u/2,alpha:0},{y:h/2,alpha:0},{y:-h/2,alpha:0}],C=o,k=n,M=0;M<l.transitionTable.length;M++)if(l.transitionTable[M][0]==z&&l.transitionTable[M][1]==t){C=l.transitionTable[M][2],k=l.transitionTable[M][3];break}if(zot(a)&&(a=C),zot(s)&&(s=k),l.speed=s,l.direction=i,""==t||null==t)l.page=z,l.dispatchEvent("nothing");else if("string"==typeof t)l.page=z,l.dispatchEvent(t);else{if(t==z)return;zot(i)&&(i="right");var j=m.indexOf(i);if(!w)return;w=!1,t.x=0,t.y=0,t.alpha=t.zimOriginalAlpha,l.transitioning=!0,"slide"==a?(t.x=-(0|y[j].x),t.y=-(0|y[j].y),t.cache(0,0,(u+1)/t.scaleX,(h+1)/t.scaleY),z.cache(0,0,(u+1)/z.scaleX,(h+1)/z.scaleY),l.addChild(t),l.addChild(z),e.animate(z,y[j],l.speed,null,p,[z,t]),e.animate(t,x[j],l.speed)):"reveal"==a?(t.cache(0,0,(u+1)/t.scaleX,(h+1)/t.scaleY),z.cache(0,0,(u+1)/z.scaleX,(h+1)/z.scaleY),l.addChild(t),l.addChild(z),e.animate(z,T[j],l.speed,null,p,[z,t])):"fade"==a?(t.cache(0,0,(u+1)/t.scaleX,(h+1)/t.scaleY),z.cache(0,0,(u+1)/z.scaleX,(h+1)/z.scaleY),t.alpha=1,l.addChild(t),l.addChild(z),e.animate(z,{alpha:0},l.speed,null,p,[z,t])):"black"==a?(t.cache(0,0,(u+1)/t.scaleX,(h+1)/t.scaleY),z.cache(0,0,(u+1)/z.scaleX,(h+1)/z.scaleY),t.alpha=1,l.addChild(t),l.addChild(z),d.alpha=0,l.addChild(d),e.animate(d,{alpha:1},l.speed/2,null,g,[d,z,t])):"clear"==a?(t.cache(0,0,(u+1)/t.scaleX,(h+1)/t.scaleY),z.cache(0,0,(u+1)/z.scaleX,(h+1)/z.scaleY),t.alpha=0,l.addChild(t),l.addChild(z),e.animate(z,{alpha:0},l.speed/2),e.animate(t,{alpha:1},l.speed/2,null,p,[z,t],l.speed/2)):"white"==a?(t.cache(0,0,(u+1)/t.scaleX,(h+1)/t.scaleY),z.cache(0,0,(u+1)/z.scaleX,(h+1)/z.scaleY),t.alpha=1,l.addChild(t),l.addChild(z),c.alpha=0,l.addChild(c),e.animate(c,{alpha:1},l.speed/2,null,g,[c,z,t])):(l.transitioning=!1,l.addChild(t),l.removeChild(z),w=!0),l.lastPage=z,l.page=t,zot(f)&&(f=!1),l.fromSwipe=f,l.dispatchEvent("page"),z=t,r.stage&&r.stage.update()}},this.resize=function(){u=r.getBounds().width,h=r.getBounds().height,"none"==o&&i==[]||a()},this.puff=function(e){for(var o=0;o<t.length;o++)l.addChild(t[o].page);l.addChild(z),e>0&&setTimeout(function(){l.settle()},e)},this.settle=function(){l.removeAllChildren(),l.addChild(z),l.dispatchEvent("puffed")},this.disable=function(){l.active=!1},this.enable=function(){l.active=!0},this.dispose=function(){return l.swipe.off("swipe",y),l.removeAllChildren(),t=null,!0}}else zog("zim controls - Pages():\nholder object must have bounds set")},e.extend(e.Pages,e.Container,"clone","zimContainer",!1),zot(e.ACTIONEVENT)&&(e.ACTIONEVENT="mousedown"),e.HotSpots=function(t,o,n){function i(t){var i=null;if(!Array.isArray(t.rect)){if(!(i=t.rect))return void zog("zim controls - HotSpots(): HotSpot "+t.page+" "+t.rect+" button does not exist");t.rect=[i.x,i.y,1,1]}(l=new e.HotSpot(t.page,t.rect[0],t.rect[1],t.rect[2],t.rect[3],t.call,o)).zimHSpage=t.page,l.button=i,c.push(l),l.on(d,r),i&&(l.spot.mouseEnabled=!1,l.spot.mouseChildren=!1,i.zimHScall=t.call,i.zimHSEvent=i.on(d,r,!0),n||(i.zimHSMDEvent=i.on("mousedown",function(e){e.stopImmediatePropagation()})),i.cursor="pointer")}function r(e){e.stopImmediatePropagation&&e.stopImmediatePropagation(),window.event&&(window.event.cancelBubble=!0),"function"==typeof e.currentTarget.zimHScall&&e.currentTarget.zimHScall(e)}var a;if(a=zob(e.HotSpots,arguments,"spots, local, mouseDowns",this))return a;if(z_d("72"),this.zimContainer_constructor(),this.type="HotSpots",!zot(t)&&Array.isArray(t)){zot(o)&&(o=!0),zot(n)&&(n=!1);for(var s,l,d="mousedown"==e.ACTIONEVENT?"mousedown":"click",c=[],u=0;u<t.length;u++)i(t[u]);this.addHotSpot=function(e,o,n){s={page:e,rect:o,call:n},t.push(s),i(s)},this.show=function(){for(var e=0;e<c.length;e++)(l=c[e]).button||l.show()},this.hide=function(){for(var e=0;e<c.length;e++)(l=c[e]).hide()},this.removeHotSpots=function(o,i){for(var a=t.length-1;a>=0;a--)s=t[a],l=c[a],i&&!Array.isArray(i)&&(i=[i.x,i.y,i.getBounds().width,i.getBounds().height]),(zot(o)&&zot(i)||zot(i)&&o==s.page||zot(o)&&e.arraysEqual(i,s.rect)||o==s.page&&e.arraysEqual(i,s.rect))&&(t.splice(a,1),l.button&&(l.button.off(d,l.button.zimHSEvent),l.button.zimHSEvent=null,n||(l.button.off("mousedown",l.button.zimHSMDEvent),l.button.zimHSMDEvent=null)),l.off(d,r),l.dispose(),c.splice(a,1))},this.dispose=function(){for(var e=0;e<c.length;e++)(l=c[e]).button&&(l.button.off(d,l.button.zimHSEvent),l.button.zimHSCall=null,l.button.zimHSEvent=null,n||(l.button.off("mousedown",l.button.zimHSMDEvent),l.button.zimHSMDEvent=null)),l.off(d,r),l.dispose();return!0}}else zog("zim controls - HotSpots():\nplease provide an array of HotSpot data")},e.extend(e.HotSpots,e.Container,"clone","zimContainer",!1),e.HotSpot=function(t,o,n,i,r,a,s){var l;if(l=zob(e.HotSpot,arguments,"obj, x, y, width, height, call, local",this))return l;if(z_d("73"),this.zimContainer_constructor(),this.type="HotSpot",!zot(t)&&t.addChild)if(t instanceof createjs.Container!=0)if(zot(o)||zot(n)||zot(i)||zot(r))zog("zim controls - HotSpot():\nPlease pass in x, y, width, height");else{zot(s)&&(s=!0),eventType="mousedown"==e.ACTIONEVENT?"mousedown":"click";var d=i,c=r,u=new createjs.Shape,h=new createjs.Shape;if(s)u.graphics.f("#999999").dr(o,n,d,c),h.graphics.f("#999999").dr(o,n,1,1);else{var f=t.globalToLocal(o,n),p=t.globalToLocal(o+d,n+c),m=p.x-f.x,g=p.y-f.y;u.graphics.f("#999999").dr(f.x,f.y,m,g),h.graphics.f("#999999").dr(f.x,f.y,1,1)}u.alpha=.4,u.mouseEnabled=!1,h.alpha=.01,h.cursor="pointer",this.spot=h;var z=h.on(eventType,function(e){"function"==typeof a&&a()});t.addChild(h),h.hitArea=u,this.show=function(){t.addChild(u)},this.hide=function(){t.removeChild(u)},this.dispose=function(){return h.off(eventType,z),t.removeChild(h),delete h,!0}}else zog("zim controls - HotSpot():\nObjects passed in should be Containers");else zog("zim controls - HotSpot():\nPlease pass in container object for obj")},e.extend(e.HotSpot,e.Container,"clone","zimContainer",!1),e.Manager=function(e){z_d("75");var t=this;this.items=[],this.add=function(e){Array.isArray(e)?t.items=t.items.concat(e):t.items.push(e)},this.remove=function(e){if(zot(e))t.items=[];else{Array.isArray(e)||(e=[e]);for(var o,n=0;n<e.length;n++){o=e[n];var i=t.items.indexOf(o);-1!=i&&t.items.splice(i,1)}}},this.resize=function(){if(t)for(var e=0;e<t.items.length;e++)t.items[e].resize?t.items[e].resize():t.items.splice(e)},this.dispose=function(){for(var e=t.items.length-1;e>=0;e--)t.items[e].dispose();return t.items=[],t=null,!0}},e.ResizeManager=function(){z_d("75.5"),e.Manager.call(this,"ResizeManager")},e.ResizeManager.prototype=new e.Manager,e.ResizeManager.prototype.constructor=e.ResizeManager,e.TransformManager=function(e){function t(e){n.hideAll(),n.show(e.target)}function o(){localStorage&&n.savePersist()}z_d("75.7"),zot(e)&&(e=!0);var n=this;this.items=[],this.add=function(o){if(Array.isArray(o)?n.items=n.items.concat(o):n.items.push(o),e){n.hideAll();for(var i,r=0;r<n.items.length;r++)(i=n.items[r]).transformControls&&i.transformControls.resize?(i.transformControls.dblclickOn(),i.transformshowEvent||(i.transformshowEvent=i.on("transformshow",t))):n.items.splice(r);n.show(n.items[0])}},this.remove=function(t){if(zot(t))n.items=[];else{Array.isArray(t)||(t=[t]);for(var o,r=0;r<t.length;r++){o=t[r],e&&o.transformshowEvent&&(o.off("transformshow",o.transformshowEvent),o.transformshowEvent=null),o.transformedEvent&&(o.off("transformed",o.transformedEvent),o.transformedEvent=null),o.transformControls.remove();var a=n.items.indexOf(o);-1!=a&&n.items.splice(a,1)}i&&n.savePersist()}},this.show=function(e){!zot(e)&&e.transformControls&&e.transformControls.show()},this.hide=function(e){!zot(e)&&e.transformControls&&e.transformControls.hide()},this.hideAll=function(){for(var e=0;e<n.items.length;e++)n.items[e].transformControls&&n.items[e].transformControls.resize?n.items[e].transformControls.hide():n.items.splice(e)},this.resize=function(){if(n){for(var e=0;e<n.items.length;e++)n.items[e].transformControls&&n.items[e].transformControls.resize?n.items[e].transformControls.resize():n.items.splice(e);i&&n.savePersist()}};var i,r="TransformManager persist(id) - sorry, must provide id";this.persist=function(e){if(zot(e)&&zon)zog(r);else{if(i=e,localStorage&&localStorage[i]){var t=JSON.parse(localStorage[i]);if(t.length==n.items.length)for(s=0;s<n.items.length;s++)t[s]&&n.items[s].transformControls.set(t[s])}for(var a,s=0;s<n.items.length;s++)(a=n.items[s]).transformedEvent||(a.transformedEvent=a.on("transformed",o))}},this.savePersist=function(){for(var e=[],t=0;t<n.items.length;t++)it=n.items[t],it.transformControls&&it.transformControls.record&&e.push(it.transformControls.record());localStorage[i]=JSON.stringify(e)},this.clearPersist=function(e){zot(e)&&zon?zog(r):localStorage&&localStorage.removeItem(e)},this.stopPersist=function(){for(var e=0;e<n.items.length;e++)it=n.items[e],it.transformedEvent&&(it.off("transformed",it.transformedEvent),it.transformedEvent=null)}},e.Guide=function(t,o,n,i,r){function a(t,o,n){var i=new e.Container;return i.shape=new createjs.Shape,i.shape.graphics.s(o).ss(1).f(t).r(0,0,g,z),i.shape.alpha=.9,i.addChild(i.shape),i.label=new createjs.Text("10","16px verdana",n),i.label.textAlign="center",i.label.textBaseline="middle",i.addChild(i.label),i.mouseChildren=!1,i.mouseEnabled=!1,i}function s(e){var i,r;e?(i=t.globalToLocal(e.rawX,e.rawY),j=i):i={x:j.x,y:j.y},n?o?(r=Math.round(Math.abs(i.x-T.x)/w*100),p.label.text="x:"+Math.max(0,Math.min(r,100))+"%",p.y=Math.max(b,Math.min(i.y,f))):(r=Math.round(Math.abs(i.y-T.y)/x*100),p.label.text="y:"+Math.max(0,Math.min(r,100))+"%",p.x=Math.max(v,Math.min(i.x,h))):o?(r=Math.round(Math.abs(i.x-T.x)),p.label.text="x:"+Math.max(0,Math.min(r,Math.round(w))),p.y=Math.max(b,Math.min(i.y,f))):(r=Math.round(Math.abs(i.y-T.y)),p.label.text="y:"+Math.max(0,Math.min(r,Math.round(x))),p.x=Math.max(v,Math.min(i.x,h))),y&&y.update()}function l(){M=!0,w=t.getBounds().width,x=t.getBounds().height;var n;o?(n="ew-resize",C=new createjs.Rectangle(0,0,w,0)):(n="ns-resize",C=new createjs.Rectangle(0,0,0,x)),e.noDrag(T),setTimeout(function(){e.drag(T,C,n,n,null,null,!0)},500),y.mouseMoveOutside=!0,y.enableMouseOver(10),h=w-2*g/3,f=x-z-z,T.uncache();var i=T.graphics;o?(i.c().s("rgba(0,255,255,.1)").ss(20).mt(0,0).lt(0,x),i.f().s("white").ss(2).mt(0,0).lt(0,x),i.s("#00c5af").sd([20,20]).mt(0,0).lt(0,x).sd(),T.cache(-10,0,20,x)):(i.c().s("rgba(255,0,255,.1)").ss(20).mt(0,0).lt(w,0),i.f().s("white").ss(2).mt(0,0).lt(w,0),i.s("#d61fa0").sd([20,20]).mt(0,0).lt(w,0).sd(),T.cache(0,-10,w,20)),o?p.x=w:p.y=x,m.addChild(p)}function d(e){e||(e=event),y&&(String.fromCharCode(e.keyCode)==i.toUpperCase()&&(m.visible=!m.visible,y.off("stagemousemove",u),m.visible&&(u=y.on("stagemousemove",s,m)),y.update()),String.fromCharCode(e.keyCode)==r.toUpperCase()&&(m.pixels=!m.pixels))}var c;if(c=zob(e.Guide,arguments,"obj, vertical, percent, hideKey, pixelKey",this))return c;if(z_d("76"),this.zimContainer_constructor(),this.type="Guide",zot(t)&&(t=zimDefaultFrame?zimDefaultFrame.stage:"stage"),zot(o)&&(o=!0),"stage"==t||t.addChild&&t.getBounds&&t.getBounds()){zot(n)&&(n=!0),zot(i)&&(i="G"),zot(r)&&(r="P");var u,h,f,p,m=this,g=80,z=26,v=g/6+g/2,b=2*z;o?((p=a("#00c5af","white","white")).shape.regX=g+g/6,p.shape.regY=z/2,p.label.x=-g/2-g/6):((p=a("#d61fa0","white","white")).shape.regX=g/2,p.shape.regY=z+z/4,p.label.y=3*-z/4);var y;"stage"!=t&&t.addChild(m);var w,x,T,C,k=e.added(m,function(){"stage"==t?(y=m.stage,t=y):y=t.stage,t.addChild(m),w=t.getBounds().width,x=t.getBounds().height,o?(p.y=x/2,p.label.text="y:"+(m.pixels?Math.round(70*w/100):"70%")):(p.x=w/2,p.label.text="x:"+(m.pixels?Math.round(70*x/100):"70%")),T=new createjs.Shape,m.addChild(T),o?T.x=.7*w:T.y=.7*x,M||(t.addChild(m),l()),y.off("stagemousemove",u),u=y.on("stagemousemove",s),y.update()}),M=!1,j={x:0,y:0};Object.defineProperty(this,"pixels",{get:function(){return!n},set:function(e){n=!e,m.resize()}}),window.addEventListener("keydown",d),this.resize=function(){return!!m&&(y&&(l(),s()),!0)},this.dispose=function(){return!!m&&(e.noDrag(T),clearInterval(k),m.removeAllChildren(),window.removeEventListener("keydown",d),m.parent&&m.parent.removeChild(m),m=null,!0)}}else zog("zim controls - Guide(): Please provide container with bounds for the obj (setBounds())")},e.extend(e.Guide,e.Container,"clone","zimContainer",!1),e.GuideManager=function(){z_d("77"),e.Manager.call(this,"GuideManager")},e.GuideManager.prototype=new e.Manager,e.GuideManager.prototype.constructor=e.GuideManager,e.Grid=function(t,o,n,i,r){function a(t,o,n){var i=new e.Container;return i.shape=new createjs.Shape,i.shape.graphics.s(o).ss(1).f(t).r(0,0,p,m),i.shape.alpha=.9,i.addChild(i.shape),i.label=new createjs.Text("10","16px verdana",n),i.label.textAlign="center",i.label.textBaseline="middle",i.addChild(i.label),i.mouseChildren=!1,i.mouseEnabled=!1,i}function s(e){var o;e?(o=t.globalToLocal(e.rawX,e.rawY),E=o):o={x:E.x,y:E.y},n?(g.label.text="x:"+Math.max(0,Math.min(Math.round(o.x/T*100),100))+"%",g.x=Math.max(y,Math.min(o.x,v)),z.label.text="y:"+Math.max(0,Math.min(Math.round(o.y/C*100),100))+"%",z.y=Math.max(w,Math.min(o.y,b))):(g.label.text="x:"+Math.max(0,Math.min(Math.round(o.x),Math.round(T))),g.x=Math.max(y,Math.min(o.x,v)),z.label.text="y:"+Math.max(0,Math.min(Math.round(o.y),Math.round(C))),z.y=Math.max(w,Math.min(o.y,b))),x&&x.update()}function l(){j=!0,t&&t.getBounds&&(T=t.getBounds().width,C=t.getBounds().height),x&&(x.mouseMoveOutside=!0,x.enableMouseOver(10)),v=T-2*p/3,b=C-m-m,k=new e.Container,h.addChild(k);var i=new createjs.Shape;k.addChild(i);var r=i.graphics;r.s(o).ss(1);var a=new createjs.Shape;if(k.addChild(a),n){for(s=1;s<22;s++)r.mt(s*T/20,0).lt(s*T/20,C);for(s=1;s<20;s++)r.mt(0,s*C/20).lt(T,s*C/20);i.alpha=.3,(r=a.graphics).s(o).ss(1);for(s=1;s<10;s++)r.mt(s*T/10,0).lt(s*T/10,C);for(s=1;s<10;s++)r.mt(0,s*C/10).lt(T,s*C/10)}else{for(s=0;s<T/f;s++)r.mt(s*f,0).lt(s*f,C);for(s=0;s<C/f;s++)r.mt(0,s*f).lt(T,s*f);i.alpha=.3,(r=a.graphics).s(o).ss(1);for(s=0;s<T/(10*f);s++)r.mt(s*(10*f),0).lt(s*(10*f),C);for(var s=0;s<C/(10*f);s++)r.mt(0,s*(10*f)).lt(T,s*(10*f))}r.s("#FFFFFF").ss(8),r.mt(T/2,C/2-40).lt(T/2,C/2+40),r.mt(T/2-40,C/2).lt(T/2+40,C/2),r.s("#000000").ss(4),r.mt(T/2,C/2-40).lt(T/2,C/2+40),r.mt(T/2-40,C/2).lt(T/2+40,C/2),r.s(o).ss(3),r.dr(0,0,T,C),a.alpha=.5,k.cache(0,0,T,C),h.addChild(g),h.addChild(z),x&&x.update()}function d(e){e||(e=event),x&&(String.fromCharCode(e.keyCode)==i.toUpperCase()&&(h.visible=!h.visible,x.off("stagemousemove",u),h.visible&&(u=x.on("stagemousemove",s,h)),x.update()),String.fromCharCode(e.keyCode)==r.toUpperCase()&&(h.removeChild(k),k=null,h.pixels=!h.pixels))}var c;if(c=zob(e.Grid,arguments,"obj, color, percent, hideKey, pixelKey",this))return c;if(z_d("78"),this.zimContainer_constructor(),this.type="Grid",zot(t)&&(t=zimDefaultFrame?zimDefaultFrame.stage:"stage"),zot(o)&&(o="black"),"stage"==t||t.addChild&&t.getBounds&&t.getBounds()){zot(n)&&(n=!0),zot(i)&&(i="G"),zot(r)&&(r="P");var u,h=this,f=10;this.mouseChildren=!1,this.mouseEnabled=!1;var p=80,m=26,g=a("#dddddd",o,"#333333");g.shape.regX=p/2,g.shape.regY=-m/4,g.label.y=3*m/4;var z=a("#dddddd",o,"#333333");z.shape.regX=-p/6,z.shape.regY=m/2,z.label.x=p/2+p/6;var v,b,y=p/6+p/2,w=2*m;g.x=y,z.y=w,g.label.text="x:0",z.label.text="y:0";var x;"stage"!=t&&t.addChild(h);var T,C,k,M=e.added(h,function(){"stage"==t?(x=h.stage,t=x):x=t.stage,j||(l(),t.addChild(h)),x.off("stagemousemove",u),u=x.on("stagemousemove",s),x.update()}),j=!1,E={x:0,y:0};Object.defineProperty(this,"pixels",{get:function(){return!n},set:function(e){n=!e,h.resize()}}),window.addEventListener("keydown",d),this.resize=function(){return!!h&&(h.removeChild(k),k=null,x&&(l(),s(),setTimeout(function(){h.removeChild(k),k=null,l()},200)),!0)},this.dispose=function(){return clearInterval(M),h.removeAllChildren(),window.removeEventListener("keydown",d),h.parent&&h.parent.removeChild(h),h=null,!0}}else zog("zim controls - Grid(): Please provide container with bounds for the obj (setBounds())")},e.extend(e.Grid,e.Container,"clone","zimContainer",!1),e.GridManager=function(){z_d("79"),e.Manager.call(this,"GridManager")},e.GridManager.prototype=new e.Manager,e.GridManager.prototype.constructor=e.GridManager,e.Layout=function(t,o,n,i,r,a,s,l){function d(){for(var e=0,t=0;t<o.length;t++)(m=o[t]).given=0,0==m[v]&&(e+=m.object.getBounds()[v]);for(t=0;t<o.length;t++)0==(m=o[t])[v]&&(m.given=m.object.getBounds()[v]/e*T)}function c(e){e||(e=event),a&&String.fromCharCode(e.keyCode)==l.toUpperCase()&&(a.visible=!a.visible,a.stage&&a.stage.update())}var u;if(u=zob(e.Layout,arguments,"holder, regions, lastMargin, backgroundColor, vertical, regionShape, scalingObject, hideKey",this))return u;if(z_d("80"),this.cjsEventDispatcher_constructor(),!zot(t)&&t.getBounds)if((s=zot(s)?t:s).getBounds&&s.getBounds()){var h=s.getBounds();t.setBounds(0,0,h.width,h.height),zot(n)&&(n=0),zot(r)&&(r=!0),zot(i)&&(i=""),zot(l)&&(l="B");var f=new createjs.Shape,p=this;this.active=!0,this.regions=o;var m,g=0,z="minWidth",v="width",b="height",y="marginLeft",w="maxHeight";r&&(z="minHeight",v="height",b="width",y="marginTop",w="maxWidth","y","x");for(var x=0;x<o.length;x++){if(!(m=o[x]).object||!m.object.getBounds())return void zog("zim controls - Layout(): each region object must have an object with setBounds() set");m[z]||(m[z]=0),m[v]||(m[v]=0),m.backgroundColor||(m.backgroundColor=""),m.given=0,m.maxGiven=0,m[y]||(m[y]=0),m[w]||(m[w]=100),r?(m.align||(m.align="middle"),m.valign||(0==x?m.valign="top":x==o.length-1?m.valign="bottom":m.valign="middle",1==o.length&&(m.valign="middle"))):(m.valign||(m.valign="top"),m.align||(0==x?m.align="left":x==o.length-1?m.align="right":m.align="middle",1==o.length&&(m.align="middle"))),m[v]&&(m[z]=0),g+=m[v]+m[y]}if((g+=n)>100)zog("zim controls - Layout(): cannot fit regions into 100% bounds");else{var T=100-g;d(),this.resize=function(){if(p.active){h=s.getBounds(),t.setBounds(0,0,h.width,h.height),f.graphics.clear(),""!=i&&f.graphics.f(i).r(0,0,h.width,h.height);for(S=0;S<o.length;S++)(m=o[S]).maxGiven=0,m.marginGiven=0;for(var l,c,u,x=!0,C=T;x;){c=0,x=!1,l=!0;for(S=0;S<o.length;S++)(m=o[S]).given>0&&0==m.maxGiven&&(P=m.object.getBounds()[v],(O=m.object.getBounds()[b])/P*(m.given*h[v]/100)>(u=m[w]*h[b]/100)?(m.maxGiven=P/O*u*100/h[v],c+=m.given-m.maxGiven,C-=m.maxGiven):l=!1);if(l)break;totalPrimaries=0;for(S=0;S<o.length;S++)0==(m=o[S])[v]&&0==m.maxGiven&&(totalPrimaries+=m.object.getBounds()[v]);for(S=0;S<o.length;S++)0==(m=o[S])[v]&&0==m.maxGiven&&(m.given=m.object.getBounds()[v]/totalPrimaries*C)}var k=!0;if(m=o[0],m.maxGiven>0?m.maxGiven<m[z]&&(m[v]=m[z],k=!1):m.given>0&&m.given<m[z]&&(m[v]=m[z],k=!1),m=o[o.length-1],m.maxGiven>0?m.maxGiven<m[z]&&(m[v]=m[z],k=!1):m.given>0&&m.given<m[z]&&(m[v]=m[z],k=!1),!k){g=0;for(S=0;S<o.length;S++)m=o[S],g+=m[v]+m[y];return(g+=n)>100?void zog("zim display - Layout(): cannot fit regions into 100% bounds"):(T=100-g,d(),void p.resize())}for(var M=!0,j=0,E=0,S=0;S<o.length;S++)j+=(m=o[S])[y],m[v]>0?E+=m[v]:m.maxGiven>0?E+=m.maxGiven:m.given>0&&(E+=m.given),0==m[v]&&(M=!1);if(M||l){var A=100-E-(j+=n);if(j-=n+o[0][y],0!=A&&0!=j)for(S=0;S<o.length;S++)0!=S&&((m=o[S]).marginGiven=m[y]/j*(j+A))}var P,O,D,I,B,L=0,X=0;if(a&&a.graphics){var Y=a.graphics;Y.c()}for(S=0;S<o.length;S++)(m=o[S]).marginGiven>0?L+=m.marginGiven*h[v]/100:L+=m[y]*h[v]/100,P=(P=m[v]>0?m[v]:m.maxGiven>0?m.maxGiven:m.given>0?m.given:0)*h[v]/100,O=m[w]*h[b]/100,X=(h[b]-O)/2,D=r?e.fit(m.object,X,L,O,P):e.fit(m.object,L,X,P,O),"top"==m.valign?m.object.y=D.bY:"bottom"==m.valign&&(m.object.y=D.bY+D.bHeight-D.height),"left"==m.align?m.object.x=D.bX:"right"==m.align&&(m.object.x=D.bX+D.bWidth-D.width),a&&a.graphics&&(Y.s("white").ss(2).r(D.bX,D.bY,D.bWidth,D.bHeight),Y.s("#ff8203").sd([20,20]).r(D.bX,D.bY,D.bWidth,D.bHeight).sd()),B=I=0,0!=L&&L+P!=h[v]||(r?B=1:I=1),O==h[b]&&(r?I=1:B=1),""!=m.backgroundColor&&f.graphics.f(m.backgroundColor).r(D.bX,D.bY,D.bWidth+I,D.bHeight+B),L+=P}},this.resize(),a&&t.addChild(a),t.addChildAt(f,0),window.addEventListener("keydown",c),this.disable=function(){p.active=!1,window.removeEventListener("keydown",c),a&&(a.alpha=0)},this.enable=function(){p.active=!0,window.addEventListener("keydown",c),p.resize(),a&&(a.alpha=1)},this.removeShape=function(){a&&(a.graphics.clear(),t.removeChild(a),a=null,a=!1),window.removeEventListener("keydown",c)},this.addShape=function(e,o){p.removeShape(),a=e,window.addEventListener("keydown",c),t.addChild(a),p.resize()},this.dispose=function(){return p.removeShape(),!0}}}else zog("zim controls - Layout(): holder must have bounds set or provide a scalingObject with bounds");else zog("zim controls - Layout(): please provide an object with bounds set that holds the objects being laid out")},e.extend(e.Layout,createjs.EventDispatcher,null,"cjsEventDispatcher",!1),e.LayoutManager=function(){z_d("81");var e=this;this.items=[],this.add=function(t){e.items.push(t)},this.resize=function(){for(var t=0;t<e.items.length;t++)e.items[t].resize()},this.disable=function(){for(var t=0;t<e.items.length;t++)e.items[t].disable()},this.enable=function(){for(var t=0;t<e.items.length;t++)e.items[t].enable()},this.dispose=function(){for(var t=0;t<e.items.length;t++)e.items[t].removeShape();return!0}},e.Parallax=function(t,o,n,i){var r;if(r=zob(e.Parallax,arguments,"layers, damp, auto, stage",this))return r;if(z_d("68"),zot(i))if(t&&t[0]&&t[0].obj&&t[0].obj.stage)i=t[0].obj.stage;else{if(!zimDefaultFrame)return;i=zimDefaultFrame.stage}n=!!zot(n);var a=i.getBounds().width,s=i.getBounds().height,l=this,d=zot(o)?.1:o;this.addLayer=function(t){if(!(zot(t.obj)||zot(t.prop)||zot(t.propChange))){var o={obj:t.obj,prop:t.prop};o[o.prop]=t.propChange,zot(t.input)&&(t.input="mouseX"),o.input=t.input,o.split=zot(t.split)?!("mouseX"!=t.input||!n):t.split;var i=zot(t.inMin)?0:t.inMin,r=zot(t.inMax)?"mouseX"==t.input||"scrollX"==t.input?a:s:t.inMax,l=zot(t.factor)?1:t.factor,u=!zot(t.integer)&&t.integer;return o["p_"+o.prop]=new e.ProportionDamp(i,r,0,o[o.prop],d,l,u),"scale"==o.prop?o["s_"+o.prop]=o.obj.scaleX:"frame"==o.prop?o["s_"+o.prop]=o.obj.currentFrame:o["s_"+o.prop]=o.obj[o.prop],c.push(o),c.length-1}},this.removeLayer=function(e){if(!zot(e)){var t=c[e];t["p_"+t.prop].dispose(),c.splice(e,1)}},this.immediate=function(e){for(var t,o=0;o<c.length;o++)(t=c[o])["p_"+t.prop].immediate(e[o])},this.dispose=function(){return c=null,n&&e.Ticker.remove(h),!0},t=zot(t)?[]:t;for(var c=[],u=0;u<t.length;u++)this.addLayer(t[u]);if(n)var h=e.Ticker.add(function(e){l.step()},i);this.step=function(t){for(var o,n,r=0;r<c.length;r++)o=c[r],zot(t)?"mouseX"==o.input?n=i.mouseX:"mouseY"==o.input?n=i.mouseY:"scrollX"==o.input?n=e.scrollX():"scrollY"==o.input&&(n=e.scrollY()):n=t,"scale"==o.prop?o.obj.scaleX=o.obj.scaleY=o["s_"+o.prop]+o["p_"+o.prop].convert(n):"frame"==o.prop?o.obj.gotoAndStop(o["s_"+o.prop]+o["p_"+o.prop].convert(n)):(o.obj[o.prop]=o["s_"+o.prop]+o["p_"+o.prop].convert(n),o.split&&(o.obj[o.prop]-=o[o.prop]/2))},Object.defineProperty(l,"damp",{get:function(){return d},set:function(e){d=e;for(var t,o=0;o<c.length;o++)(t=c[o])["p_"+t.prop].damp=d}})},e.Scroller=function(t,o,n,i,r,a,s){var l;if(l=zob(e.Scroller,arguments,"backing, speed, direction, horizontal, gapFix, stage, container",this))return l;z_d("69"),this.cjsEventDispatcher_constructor();var d=this.backing1=t;if(!zot(d)&&d.getBounds){var c=this.backing2=t.clone();d.parent.addChild(c),zot(i)&&(i=!0),zot(r)&&(r=0);var u=this;this.speed=zot(o)?1:o;var h=this.baseSpeed=this.speed;this.direction=zot(n)?1:n;var f=i?d.scaleX:d.scaleY;if(d.getBounds())if(a||d.stage)if(a=a||d.stage,zot(s)&&(s=a),s.getBounds()){var p,m,g=d.getBounds().width*f-r,z=d.getBounds().height*f-r;i?c.x=g:c.y=z;var v=!1,b=e.Ticker.add(function(e){p||(p=s.getBounds().width,m=s.getBounds().height),0!=u.speed&&0!=u.direction&&(i?(d.x-=u.speed*u.direction,d.x<c.x?c.x=d.x+g:c.x=d.x-g,u.direction*u.speed>0?c.x<0&&d.x<c.x?d.x=c.x+g:d.x<0&&c.x<d.x&&(c.x=d.x+g):c.x>p&&c.x>d.x?c.x=d.x-g:d.x>p&&d.x>c.x&&(d.x=c.x-g)):(d.y-=u.speed*u.direction,d.y<c.y?c.y=d.y+z:c.y=d.y-z,u.direction*u.speed>0?c.y<0&&d.y<c.y?d.y=c.y+z:d.y<0&&c.y<d.y&&(c.y=d.y+z):c.y>m&&c.y>d.y?c.y=d.y-z:d.y>m&&d.y>c.y&&(d.y=c.y-z)))},a);this.paused=!1,this.pause=function(t,o){return zot(t)&&(t=!0),zot(o)&&(o=0),t?(h=u.speed,o>0?(v=!0,e.animate({target:u,obj:{pausingSpeed:0},ticker:!1,time:o,call:function(){u.speed=0,u.paused=!0,v=!1,u.dispatchEvent("pause")}})):(v=!1,u.speed=0,u.paused=!0,setTimeout(function(){u.dispatchEvent("pause")},10))):(v=!1,o>0?e.animate({target:u,obj:{pausingSpeed:h},ticker:!1,time:o,call:function(){u.speed=h,u.paused=!1,v=!1}}):(u.speed=h,u.paused=!1)),u},Object.defineProperty(u,"percentSpeed",{get:function(){return 0==u.baseSpeed?NaN:u.speed/u.baseSpeed*100},set:function(e){v||u.paused||(u.speed=u.baseSpeed*e/100)}}),Object.defineProperty(u,"pausingSpeed",{get:function(){return 0==u.baseSpeed?NaN:u.speed/u.baseSpeed*100},set:function(e){u.speed=u.baseSpeed*e/100}}),this.dispose=function(){return zon&&zog("bye from Scroller"),e.Ticker.remove(b),!0}}else zog("zim display - Scroller(): please setBounds() on container or stage if no container");else zog("zim display - Scroller(): please pass in stage parameter or add backing objects to stage to start");else zog("zim display - Scroller(): please setBounds() on backing objects")}},e.extend(e.Scroller,createjs.EventDispatcher,null,"cjsEventDispatcher"),e.Dynamo=function(t,o,n,i,r,a,s){function l(){if(f=requestAnimationFrame(l),p=c[u].s,0!=v.speed&&0!=p&&(g=1e3/Math.abs(v.speed)*p,(m=Date.now())-b>g)){b=m;var e=v.frame+(v.speed>0||!s?1:-1),o=!1;e>=c.length&&(o=!0,e=0),e<0&&(o=!0,e=c.length-1),v.frame=e,o&&v.dispatchEvent("loop"),v.dispatchEvent("change"),a&&t.stage&&t.stage.update(),zot(z)||z!=v.frame||(y=!1,v.speed=0,v.paused=!0,v.dispatchEvent("pause"))}}var d;if(d=zob(e.Dynamo,arguments,"sprite, speed, label, startFrame, endFrame, update, reversable",this))return d;z_d("69.2"),this.cjsEventDispatcher_constructor();var c=this.frames=t.parseFrames(n,i,r,!0);if(0!=c.length){this.totalFrames=c.length;var u=0;zot(o)&&(o=30),zot(s)&&(s=!0);var h=this.baseSpeed=this.speed=o;zot(a)&&(a=!1);var f,p,m,g,z,v=this,b=Date.now(),y=!1;l(),this.paused=!1,this.pause=function(t,o,n){return zot(t)&&(t=!0),zot(o)&&(o=0),t?(h=v.speed,zot(n)?o>0?(y=!0,e.animate({target:v,obj:{pausingSpeed:0},ticker:!1,time:o,call:function(){y=!1,v.speed=0,v.paused=!0,v.dispatchEvent("pause")}})):(y=!1,v.speed=0,v.paused=!0,setTimeout(function(){v.dispatchEvent("pause")},10)):(y=!0,z=n)):(z=null,o>0?(y=!0,e.animate({target:v,obj:{pausingSpeed:h},ticker:!1,time:o,call:function(){y=!1,v.speed=h,v.paused=!1}})):(y=!1,v.speed=h,v.paused=!1)),v},Object.defineProperty(v,"frame",{get:function(){return u},set:function(e){u=Math.round(e)%c.length;var o=c[u];zot(o)||(t.frame=o.f)}}),Object.defineProperty(v,"percentSpeed",{get:function(){return 0==v.baseSpeed?NaN:v.speed/v.baseSpeed*100},set:function(e){y||v.paused||(v.speed=v.baseSpeed*e/100)}}),Object.defineProperty(v,"pausingSpeed",{get:function(){return 0==v.baseSpeed?NaN:v.speed/v.baseSpeed*100},set:function(e){v.speed=v.baseSpeed*e/100}}),this.dispose=function(){cancelAnimationFrame(f)}}},e.extend(e.Dynamo,createjs.EventDispatcher,null,"cjsEventDispatcher"),e.Accelerator=function(e){z_d("69.3"),this.cjsEventDispatcher_constructor();var t=this;this.paused=!1,this.items=[],this.paused=!1,this._percentSpeed=100,this.add=function(e){var o;o=Array.isArray(e)?e:[e];for(var n=0;n<o.length;n++)t.items.indexOf(o[n])<0&&o[n].pause&&t.items.push(o[n]);return t},e&&this.add(e),this.remove=function(e){var o;o=Array.isArray(e)?e:[e];for(var n,i=0;i<o.length;i++)(n=t.items.indexOf(o[i]))>=0&&t.items.splice(n,1);return t},this.pause=function(e,o,n){function i(o){for(var n=0;n<t.items.length;n++)1!=r[n]&&t.items[n].pause(e)}zot(e)&&(e=!0);var r=[];if(e){zot(n)||(o=null);for(var a=!1,s=0;s<t.items.length;s++)(zot(o)||!zot(n)||t.items[s].totalFrames)&&(!t.items[s].totalFrames||zot(o)&&zot(n))||(t.items[s].pause(!0,o,n),a=!0,r[s]=1,t.items[s].on("pause",function(){t.paused||(i(!0),t.paused=!0,t.dispatchEvent("pause"))},null,!0));a||(i(),t.paused=!0,setTimeout(function(){t.dispatchEvent("pause")},10))}else t.paused=!1,i()},Object.defineProperty(t,"percentSpeed",{get:function(){return t._percentSpeed},set:function(e){t._percentSpeed=e;for(var o=0;o<t.items.length;o++)t.items[o].percentSpeed=e}}),this.dispose=function(){for(var e=0;e<t.items.length;e++)t.items[e].dispose();return!0}},e.extend(e.Accelerator,createjs.EventDispatcher,null,"cjsEventDispatcher"),e.Swiper=function(t,o,n,i,r,a,s,l,d){function c(){m=r?z.mouseX:z.mouseY,g=v.target[v.property],v.dispatchEvent("swipedown")}function u(){var e=m-(r?z.mouseX:z.mouseY);y=g-e*i,zot(a)||(y=Math.max(y,a)),zot(s)||(y=Math.min(y,s)),v.desiredValue=y,v.dispatchEvent("swipemove")}function h(){b.canvas?(b.off("stagemousedown",w),b.off("stagemousemove",x),b.off("stagemouseup",T)):(b.off("mousedown",w),b.off("pressmove",x),b.off("pressup",T)),e.Ticker.remove(k)}function f(){b.canvas?b.on("stagemousedown",w):(b.on("mousedown",w),b.on("pressmove",x),b.on("pressup",T)),e.Ticker.add(k,z)}var p;if(p=zob(e.Swiper,arguments,"swipeOn, target, property, sensitivity, horizontal, min, max, damp, integer",this))return p;if(z_d("69.5"),this.cjsEventDispatcher_constructor(),!zot(t)&&t.getStage&&t.stage){if(!zot(o)){zot(i)&&(i=1),zot(r)&&(r=!0),zot(l)&&(l=.1),zot(d)&&(d=!1);var m,g,z,v=this,b=t,y=v.desiredValue=o[n];this.target=o,this.property=n;var w,x,T;b.canvas?(w=b.on("stagemousedown",function(){c(),x=b.on("stagemousemove",u),T=b.on("stagemouseup",function(){b.off("stagemousemove",x),b.off("stagemouseup",T),v.dispatchEvent("swipeup")})}),z=b):(z=b.stage,w=b.on("mousedown",c),x=b.on("pressmove",u),T=b.on("pressup",function(){v.dispatchEvent("swipeup")}));var C=new e.Damp(v.target[v.property]),k=e.Ticker.add(function(){v.target[v.property]=d?Math.round(C.convert(y)):C.convert(y)},z);this.immediate=function(e){C.immediate(e),v.target[v.property]=d?Math.round(e):e,v.desiredValue=y=e};var M=!0;Object.defineProperty(v,"enabled",{get:function(){return M},set:function(e){M!=e&&(e?f():h(),M=Boolean(e))}}),this.dispose=function(){h(),C=null}}}else zog("zim.Swiper() - please provide container on stage")},e.extend(e.Swiper,createjs.EventDispatcher,null,"cjsEventDispatcher",!1),e.MotionController=function(t,o,n,i,r,a,s,l,d,c,u,h,f,p,m,g){function z(e){var t,o="keydown"==n?e.keyCode:e.buttonCode;for(H=0;H<4;H++)if(s[H].indexOf(o)>-1){if(l||"both"!=j.axis||(L.dirX=L.dirY=0),L["dir"+I[H]]=B[H],O[H]=1,0==(t=D.indexOf(H)))return;return t>0&&D.splice(t,1),void D.unshift(H)}}function v(e){var t,o="keydown"==n?e.keyCode:e.buttonCode;for(H=0;H<4;H++)if(s[H].indexOf(o)>-1){if(O[H]=0,(t=D.indexOf(H))>=0&&D.splice(t,1),"both"!=j.axis||l)L["dir"+I[H]]=-O[2*Math.floor(H/2)]+O[2*Math.floor(H/2)+1];else if(D.length>0){L["dir"+I[H]]=0;var i=D[0];L["dir"+I[i]]=B[i]}else L.dirX=L.dirY=0;return}}function b(e){W.rotation+=e.dirX*j.turnSpeed,j.rotation=W.rotation,W.speedX=Math.sin(W.rotation*Math.PI/180)*j.speed*-e.dirY,W.speedY=-Math.cos(W.rotation*Math.PI/180)*j.speed*-e.dirY,j.x+=W.speedX,j.y+=W.speedY}function y(){var e=x(j.x-j.target.x,j.y-j.target.y);if(E=e.speedX,S=e.speedY,u)if(j.rotation=e.angle,zot(j.rotation))j.rotation=j.target.rotation;else{j.rotation+=A;var t=w(j.rotation),o=j.target.rotation=w(j.target.rotation);Math.abs(t-o)>180&&(o>t?o-=360:t-=360),j.dampR.immediate(o),j.target.rotation=o,j.rotation=t}}function w(e){return(e%360+360)%360}function x(e,t){var o,n=j.speed,i=j.speed,r=Math.sqrt(Math.pow(e,2)+Math.pow(t,2));return r>0&&(n=Math.abs(e)/r*j.speed,i=Math.abs(t)/r*j.speed,o=90-180*Math.atan2(e,t)/Math.PI),{speedX:n,speedY:i,angle:o}}function T(){"keydown"==n?(frame.on("keydown",X),frame.on("keyup",_),e.Ticker.add(F,M)):"gamebutton"==n?(N.on("buttondown",Y),N.on("buttonup",R),e.Ticker.add(F,M)):"gamestick"==n?N.on("data",G):"swipe"==n?(Z.enabled=!0,U.enabled=!0,Z.on("swipemove",V)):"mousedown"!=n&&"mousemove"!=n||M.on("stage"+n,mouseEvent),e.Ticker.add($,M)}function C(){"keydown"==n?(frame.off("keydown",X),frame.off("keyup",_),e.Ticker.remove(F)):"gamebutton"==n?(N.off("buttondown",Y),N.off("buttonup",R),e.Ticker.remove(F)):"gamestick"==n?N.off("data",G):"swipe"==n?(Z.enabled=!1,U.enabled=!1,Z.off("swipemove",V)):"mousedown"!=n&&"mousemove"!=n||M.off("stage"+n,mouseEvent),e.Ticker.remove($)}var k;if(k=zob(e.MotionController,arguments,"container, target, type, speed, axis, rect, map, diagonal, damp, flip, rotate, constant, firstPerson, turnSpeed, moveThreshold, stickThreshold",this))return k;if(z_d("69.7"),this.cjsEventDispatcher_constructor(),!zot(t)&&t.getStage)if(zot(t.stage))zog("zim Controller(): The Container must be on the stage");else{var M=t.stage;zot(o)&&(o=new e.Container(1,1)),zot(i)&&(i=7),(zot(n)||"mousemove"!=n&&"keydown"!=n&&"gamebutton"!=n&&"gamestick"!=n&&"swipe"!=n&&"manual"!=n)&&(n="mousedown"),zot(r)&&(r="both"),"keydown"==n&&zot(s)&&(s=[[65,37],[68,39],[87,38],[83,40]]),"gamebutton"==n&&zot(s)&&(s=f?[14,15,e.GamePad.RT,e.GamePad.LT]:[14,15,12,13]),"gamestick"==n&&zot(s)&&(s=f?[[0,2],[0,2],[1],[1]]:[0,0,1,1]),"gamestick"==n&&zot(s)&&(s=[0,0,1,1]),zot(l)&&(l=!0),"horizontal"!=r&&"vertical"!=r||(l=!1),zot(d)&&(d="keydown"==n||"gamebutton"==n?1:.1),zot(f)&&(f=!1),zot(p)&&(p=.4*i),zot(m)&&(m=4),zot(g)&&(g=.2);var j=this;this.dirX=0,this.dirY=0,this.speed=i,this.turnSpeed=p,this.axis=r,this.target=o,this.moveThreshold=m,this.stickThreshold=g;var E=j.speed,S=j.speed,A=0;j.rotation=0,j.x=this.target.x,j.y=this.target.y;var P=j.scaleX=o.scaleX;j.scaleY=o.scaleY;if("keydown"==n||"gamebutton"==n){for(H=0;H<4;H++)Array.isArray(s[H])||(s[H]=[s[H]]);var O=[0,0,0,0],D=[],I=["X","X","Y","Y"],B=[-1,1,-1,1],L={dirX:0,dirY:0};if("keydown"==n)var X=frame.on("keydown",z);else var Y=(N=j.gamepad=new e.GamePad).on("buttondown",z);if(zot(h))if("keydown"==n)var _=frame.on("keyup",v);else var R=N.on("buttonup",v);var W={rotation:0,speedX:j.speed,speedY:j.speed},F=e.Ticker.add(function(){if(f)b(L);else{var e=j.speed,t=j.speed;if("both"==j.axis&&0!=L.dirX&&0!=L.dirY){var o=x(L.dirX,L.dirY);e=o.speedX,t=o.speedY}"horizontal"!=j.axis&&"both"!=j.axis||(j.x+=e*L.dirX),"vertical"!=j.axis&&"both"!=j.axis||(j.y+=t*L.dirY),y()}},M)}else if("mousedown"==n||"mousemove"==n)mouseEvent=M.on("stage"+n,function(){var e=t.globalToLocal(M.mouseX,M.mouseY);j.x=e.x,j.y=e.y,y()});else if("gamestick"==n){for(var N=this.gamepad=new e.GamePad,H=0;H<4;H++)Array.isArray(s[H])||(s[H]=[s[H]]);var W={rotation:0,speedX:j.speed,speedY:j.speed},G=N.on("data",function(e){for(var t={dirX:0,dirY:0},o=0;o<s[0].length;o++){n=e.axes[s[0][o]];if(Math.abs(n)>j.stickThreshold){t.dirX=n;break}}for(o=0;o<s[2].length;o++){var n=e.axes[s[2][o]];if(Math.abs(n)>j.stickThreshold){t.dirY=n;break}}f?b(t):(j.x+=j.speed*t.dirX,j.y+=j.speed*t.dirY,y())})}else if("swipe"==n)var Z=new e.Swiper(M,j,"x",.8),U=new e.Swiper(M,j,"y",.8,!1),V=Z.on("swipemove",function(){y()});var q=this.x=this.target.x,K=this.y=this.target.y;this.dampX=new e.Damp(q,d),this.dampY=new e.Damp(K,d),this.dampR=new e.Damp(this.target.rotation,d);var Q=0,J=0,$=e.Ticker.add(function(){if(a&&(j.x=e.constrain(j.x,a.x,a.x+a.width),j.y=e.constrain(j.y,a.y,a.y+a.height)),"horizontal"!=j.axis&&"both"!=j.axis||(j.dirX=e.sign(j.x-q),Math.abs(j.x-q)<E?q=j.x:q+=j.dirX*E,j.target.x=j.dampX.convert(q)),"vertical"!=j.axis&&"both"!=j.axis||(j.dirY=e.sign(j.y-K),Math.abs(j.y-K)<S?K=j.y:K+=e.sign(j.y-K)*S,j.target.y=j.dampY.convert(K)),j.dirX!=Q||j.dirY!=J){var t=new createjs.Event("change");if(j.dirX!=Q){n=["left",null,"right"];t.dir=n[j.dirX+1],Q=j.dirX,"horizontal"!=c&&"both"!=c||(j.scaleX=o.scaleX=j.dirX?Math.abs(o.scaleX)*j.dirX:o.scaleX,A=0!=P&&-1==Math.round(j.scaleX/P)?180:0)}else{var n=["up",null,"down"];t.dir=n[j.dirY+1],J=j.dirY,"vertical"!=c&&"both"!=c||(j.scaleY=o.scaleY=j.dirY?Math.abs(o.scaleY)*j.dirY:o.scaleY)}j.dispatchEvent(t)}j.movingX=Math.abs(q-j.target.x)>j.moveThreshold,j.movingY=Math.abs(K-j.target.y)>j.moveThreshold,j.moving=j.movingX||j.movingY,u&&!zot(j.rotation)&&(j.target.rotation=j.dampR.convert(j.rotation))},M);this.immediate=function(e,t,o){!zot(e)&&j.dampX&&(j.dampX.immediate(e),j.x=j.target.x=q=e,Z&&Z.immediate(e)),!zot(t)&&j.dampY&&(j.dampY.immediate(t),j.y=j.target.y=K=t,U&&U.immediate(t)),!zot(o)&&j.dampR&&(j.dampR.immediate(o),j.rotation=j.target.rotation=o)},this.convert=function(e,t){zot(e)||(j.x=e),zot(t)||(j.y=t),y()};var ee=!0;Object.defineProperty(j,"enabled",{get:function(){return ee},set:function(e){ee!=e&&(e?T():C(),ee=Boolean(e))}}),this.dispose=function(){C(),N&&N.dispose(),Z&&Z.dispose(),U&&Z.dispose()}}else zog("zim Controller(): Please pass in a reference to a container as first parameter")},e.extend(e.MotionController,createjs.EventDispatcher,"enabled","cjsEventDispatcher"),e.GamePad=function(){function e(e){function r(){if(n=requestAnimationFrame(r),i.data=navigator.getGamepads()[i.currentIndex],i.data){for(var e=i.buttons=[],t=0;t<i.data.buttons.length;t++)if(e[t]=i.data.buttons[t].pressed,e[t]!=i.lastData[t]){if(i.lastData[t]=e[t],e[t])a=new createjs.Event("buttondown");else var a=new createjs.Event("buttonup");a.buttonCode=t,a.button=o[t],i.dispatchEvent(a)}(a=new createjs.Event("data")).axes=i.axes=i.data.axes,a.buttons=i.buttons,i.dispatchEvent(a)}}i.connected=!0,t("gamepadconnected",e);var a=navigator.getGamepads()[i.currentIndex];i.lastData=[];for(var s=0;s<a.buttons.length;s++)i.lastData[s]=a.buttons[s].pressed;r()}function t(e,t){var o=new createjs.Event(e);o.index=t.gamepad.index,o.id=t.gamepad.id,o.buttons=t.gamepad.buttons,o.axes=t.gamepad.axes,i.dispatchEvent(o)}if(z_d("69.8"),this.cjsEventDispatcher_constructor(),!navigator.getGamepads)return this.error=!0,void(zon&&zog("zim.GamePad() - no browswer support"));var n;window.addEventListener("gamepadconnected",e),this.currentIndex=0;var i=this,r=setInterval(function(){navigator.getGamepads&&navigator.getGamepads()[0]&&(i.connected||e(),clearInterval(r))},500),a=window.addEventListener("gamepaddisconnected",function(e){e.gamepad.index==i.currentIndex&&(cancelAnimationFrame(n),connected=!1,i.dispatchEvent("gamepaddisconnected"))});this.dispose=function(){window.removeEventListener("gamepadconnected",e),window.addEventListener("gamepaddisconnected",a),cancelAnimationFrame(n),clearInterval(r),i.connected=!1}};for(var o=["A","B","X","Y","LB","RB","LT","RT","BACK","START","LS","RS","DPAD_UP","DPAD_DOWN","DPAD_LEFT","DPAD_RIGHT"],n=0;n<o.length;n++)e.GamePad[o[n]]=n;var i=["LSX","LSY","RSX","RSY"];for(n=0;n<i.length;n++)e.GamePad[i[n]]=n;return e.extend(e.GamePad,createjs.EventDispatcher,null,"cjsEventDispatcher"),e.Emitter=function(t,o,n,i,r,a,s,l,d,c,u,h,f,p,m,g,z,v,b,y,w,x,T,C,k,M,j,E,S,A){function P(e){if(L.events&&O("fizzed",e),(e.trace?e.getChildAt(0).endSpurt:e.endSpurt)&&(O("spurtFizzed",e),L.spurting=!1),L.pool&&"end"!=e.pooled)return e.pooled?void(e.visible=!1):(e.pooled=!0,_.push(e),void(e.visible=!1));L.removeChild(e),L.trace&&e.uncache(),e=null}function O(e,t){var o=new createjs.Event(e);o.particle=t.trace?t.getChildAt(0):t,L.dispatchEvent(o)}function D(e){zot(L.spurtCount)&&zot(L.spurtNum)||++L.spurtCount>=L.spurtNum&&I(e)}function I(e){L.pause(),L.spurtCount=L.spurtNum=null,O("spurted",e),e.endSpurt=!0}var B;if(B=zob(e.Emitter,arguments,"obj, width, height, interval, num, life, fade, shrink, decayTime, decayStart, trace, traceFadeTime, traceShiftX, traceShiftY, angle, force, gravity, wind, layers, animation, random, horizontal, vertical, sink, sinkForce, cache, events, startPaused, pool, poolMin",this))return B;z_d("69.9"),zot(t)&&(t=[]),zot(o)&&(o=300),zot(n)&&(n=300),zot(i)&&(i=20),"number"==typeof i&&(i=Math.max(10,i)),zot(r)&&(r=1),zot(u)&&(u=!1),zot(h)&&(h=d),zot(f)&&(f=0),zot(p)&&(p=0),zot(a)&&(a=1e3),zot(s)&&(s=!0),zot(l)&&(l=!u),zot(d)&&(d=1e3),zot(m)&&(m={min:0,max:360}),zot(g)&&(g=5),zot(z)&&(z=9.8),zot(v)&&(v=0),zot(b)&&(b="top"),zot(o)&&(o=100),zot(n)&&(n=100),zot(x)&&(x=!1),zot(T)&&(T=!1),!zot(C)&&zot(k)&&(k=10),zot(j)&&(j=!1),zot(E)&&(E=!1),zot(S)&&(S=!0),zot(A)&&(A=0),this.zimContainer_constructor(o,n),this.type="Emitter";var L=this;L.obj=t,L.interval=i,L.num=r,L.life=a,L.fade=s,L.shrink=l,L.decayTime=d,L.decayStart=c,L.trace=u,L.traceFadeTime=h,L.traceShiftX=f,L.traceShiftY=p,L.angle=m,L.force=g,L.gravity=z,L.wind=v,L.layers=b,L.animation=y,L.random=w,L.horizontal=x,L.vertical=T,L.sink=C,L.sinkForce=k,L.events=j,L.startPaused=E,L.pool=S,L.poolMin=A,L.particlesEmitted=0;var X,Y,_=[],R=0,W=0;e.added(L,function(i){Y=i,zot(M)&&(M=!Y.isWebGL&&e.mobile()),M&&(Y.snapToPixelEnabled=!0),Y&&(x||T||L.centerReg(),L.zimInterval=e.interval(L.interval,function(){function i(e,t){return e-t}if(L.startPaused)L.pause();else if(!((t=Array.isArray(L.obj)?L.obj:[L.obj]).length<=0)){var r,a;Array.isArray(L.interval)?(L.interval.sort(i),r=L.interval[0]):r=L.interval.constructor=={}.constructor?L.interval.min:L.interval,Array.isArray(L.num)?(L.num.sort(i),a=L.num[L.num.length-1]):a=L.num.constructor=={}.constructor?L.num.max:L.num,e.loop(zik(L.num),function(){if(L.decayTime>0){var i={};L.shrink&&(i.scale=0),L.fade&&(i.alpha=0)}if(L.pool&&_.length>0&&W>=Math.max(L.poolMin,(L.life/r+5)*a))(s=_[R++%_.length]).visible=!0,(c=s.trace?s.getChildAt(0):s).emitShape&&(d=c.template,c.graphics.c().s(d.s?zik(d.s):null).ss(d.ss?zik(d.ss):null).sd(d.sd?zik(d.sd):null,d.offset?zik(d.offset):null)),s.trace&&s.updateCache(),"top"==L.layers?c.emitShape?s.addTo(L):s.centerReg(L):c.emitShape?s.addTo(L,!0,"bottom"==L.layers?0:e.rand(L.numChildren)):s.centerReg(L,"bottom"==L.layers?0:e.rand(L.numChildren)),s.alpha=1,s.scaleX=1,s.scaleY=1,c.alpha=c.originalAlpha,c.scaleX=c.originalScaleX,c.scaleY=c.originalScaleY,c.endSpurt=!1;else{W++;var s;L.trace&&((s=new e.Container(o,n)).trace=!0);var l=zik(e.shuffle(t)[0]);if("shape"==l.type){var d=l;(c=new e.Shape(1,1)).emitShape=!0,c.template=d,c.graphics.s(d.s?zik(d.s):null).ss(d.ss?zik(d.ss):null).sd(d.sd?zik(d.sd):null,d.offset?zik(d.offset):null),L.trace?c.addTo(s):"top"==L.layers?c.addTo(L):c.addTo(L,"bottom"==L.layers?0:e.rand(L.numChildren))}else{var c=l.clone();c.centerReg||zimify(c),L.trace?c.centerReg(s).pos(-1e3,-1e3):"top"==L.layers?c.centerReg(L):c.centerReg(L,"bottom"==L.layers?0:e.rand(L.numChildren))}L.trace&&("top"==L.layers?s.addTo(L):s.addTo(L,"bottom"==L.layers?0:e.rand(L.numChildren)),s.cache(f,p,o,n)),L.trace||(s=c),s.particle=c,c.originalAlpha=c.alpha,c.originalScaleX=c.scaleX,c.originalScaleY=c.scaleY}L.currentParticle=c,L.particlesEmitted++,s.particleNormal=!0,s.particleDecaying=!1,s.particleFizzing=!1;var u=zik(L.angle),h=zik(L.force),m=h*Math.cos(u*Math.PI/180),g=h*Math.sin(u*Math.PI/180);c.info={position:{x:o/2,y:n/2},velocity:{x:m,y:g}},L.horizontal&&(c.info.position={x:e.rand(0,o),y:L.vertical?n/2:0}),L.vertical&&(c.info.position={x:L.horizontal?o/2:0,y:e.rand(0,n)}),c.emitShape?c.graphics.mt(c.info.position.x,c.info.position.y):c.pos(c.info.position.x,c.info.position.y),L.random&&e.loop(L.random,function(e,t){val=zik(t),"scale"==e?c.sca(val):("x"==e?c.info.position.x=L.horizontal||L.vertical?val:val+o/2:"y"==e&&(c.info.position.y=L.horizontal||L.vertical?val:val+n/2),c[e]=val,c.emitShape&&c.pos(0,0))}),M&&!c.emitShape&&c.cache(c.getBounds().x-10,c.getBounds().y-10,c.getBounds().width+20,c.getBounds().height+20);var z=!c.emitShape&&L.shrink;if(L.decayTime>0&&(L.fade||z||L.trace&&L.traceFadeTime>0)){if(L.trace&&L.traceFadeTime>0&&s.animate({obj:{alpha:0},time:L.traceFadeTime,wait:L.life-L.traceFadeTime,waitedCall:function(e){e.particleNormal=!1,e.particleFizzing=!0},call:P,override:!1,id:"decay"}),L.fade||z){var v={};L.fade&&(v.alpha=0),z&&(v.scaleX=0,v.scaleY=0),c.animate({obj:v,time:L.decayTime,wait:zot(L.decayStart)?L.life-L.decayTime:L.decayStart,waitedCall:function(e){e.parent!=L&&(e=e.parent),e.particleNormal=!1,e.particleDecaying=!0},call:function(t){L.events&&O("decayed",t),t.endSpurt&&O("spurtDecayed",t),L.trace&&L.traceFadeTime>0||(zot(L.decayStart)||L.decayStart+L.decayTime>L.life?P(t.parent.trace?t.parent:t):function(){var t=s;e.timeout(L.life-(L.decayStart+L.decayTime),function(){P(t)})}())},override:!1,id:"decay"})}}else L.life>0&&function(){var t=s;t.timeOut=e.timeout(L.life,function(){P(t)})}();if(L.events&&O("emitted",s),D(c),L.animation){var b=zik(L.animation);zot(b.override)&&(b.override=!1),c.animate(e.copy(b))}})}},null,!0),X=L.emitterTicker=e.Ticker.add(function(){e.loop(L,function(t){if(t.trace){var o=t;t=t.getChildAt(0)}var n=t.info,i=0,r=0;if(!zot(L.sink)){var a=L.localToGlobal(n.position.x,n.position.y);if(L.sink.parent&&L.sink.parent.localToGlobal)var s=L.sink.parent.localToGlobal(L.sink.x,L.sink.y);else s=new createjs.Point(zik(L.sink.x),zik(L.sink.y));var l=e.angle(a.x,a.y,s.x,s.y),i=L.sinkForce*Math.cos(l*Math.PI/180),r=L.sinkForce*Math.sin(l*Math.PI/180)}var d=L.wind+i,c=L.gravity+r;n.velocity.x+=d*frameRate,n.velocity.y+=c*frameRate,n.position.x+=n.velocity.x*frameRate*100,n.position.y+=n.velocity.y*frameRate*100,t.emitShape?t.graphics.lt(n.position.x,n.position.y):(t.x=n.position.x,t.y=n.position.y),L.trace&&o&&o.updateCache(t.emitShape?null:"source-over")})},Y),frameRate=1/e.Ticker.framerate)}),Object.defineProperty(L,"interval",{get:function(){return i},set:function(e){i=e,L.zimInterval&&(L.zimInterval.time=i)}}),this.spurting=!1,this.spurt=function(t,o,n){var i;if(i=zob(L.spurt,arguments,"num, time, restart"))return i;zot(o)||(e.timeout(zik(o),function(){I(L.currentParticle)}),L.spurting=!0),zot(t)||(L.spurtNum=zik(t),L.spurtCount=0,L.spurting=!0),L.pause(!1,n,null,!0)},this.clearPool=function(){e.loop(L,function(e){e.pooled="end",e.visible||L.removeChild(e)},!0),W=0,R=0,_=[]},L.startPaused||(this.paused=!1),this.pause=function(t,o,n,i){if(L.startPaused=null,zot(t)&&(t=!0),zot(o)&&(o=!1),zot(n)&&(n=!1),t){if(L.paused)return L;n&&(X&&e.Ticker.remove(X),e.loop(L,function(e){e.pauseAnimate(),e.trace&&e.getChildAt(0).pauseAnimate(),e.timeOut&&e.timeOut.pause()})),L.zimInterval.pause(),L.paused=!0}else{if(!L.paused)return L;o&&(e.loop(L,function(e){e.stopAnimate(),e.timeOut&&e.timeOut.clear(),e.trace&&e.getChildAt(0).pauseAnimate()}),L.removeAllChildren()),Y&&X&&!e.Ticker.has(Y,X)&&(e.Ticker.add(X,Y),e.loop(L,function(e){e.pauseAnimate(!1),e.timeOut&&e.timeOut.pause(!1),e.trace&&e.getChildAt(0).pauseAnimate(!1)})),L.zimInterval.pause(!1,i),L.paused=!1}return L},this.resize=function(e,t){zot(e)||(o=e),zot(t)||(n=t),L.setBounds(0,0,o,n),x||T||L.centerReg(),L.clearPool()},this.clone=function(){var t;return t=Array.isArray(L.obj)||L.obj.constructor=={}.constructor?e.copy(L.obj):L.obj.clone?L.obj.clone():L.obj,L.cloneProps(new e.Emitter(t,o,n,L.interval,L.num,L.life,L.fade,L.shrink,L.decayTime,L.decayStart,L.trace,L.traceFadeTime,L.traceShiftX,L.traceShiftY,L.angle,L.force,L.gravity,L.wind,L.layers,L.animation,e.copy(L.random),L.horizontal,L.vertical,L.sink,L.sinkForce,M,L.events,E,L.pool,L.poolMin))},this.dispose=function(){return X&&e.Ticker.remove(X),e.loop(L,function(e){e.stopAnimate()}),L.zimInterval.clear(),!0}},e.extend(e.Emitter,e.Container,"clone","zimContainer",!1),e.SoundWave=function(t,o,n,i,r,a,s,l,d,c){function u(t){if(t.connect(m),"mic"!=o&&m.connect(p.destination),m.fftSize=2*e.SoundWave.bufferLength,(v=Math.floor(n*e.SoundWave.bufferLength/_num))<1)zog("ZIM SoundWave: include param is too small or num param is too big");else{var i=m.frequencyBinCount,r=new Uint8Array(i);f.calculate=function(){m.getByteFrequencyData(r);var t=r.map(s);if(1==v)return t;for(var i=[],a=0,l=0;l<=n*e.SoundWave.bufferLength;l++)a+=t[l],0!=l&&l%v==0&&(i.push(Math.max(0,(a/v-f.baseline)*f.magnify-f.reduce)),a=0);return"mic"!=o&&(i[0]*=.75,i[1]*=.85,i[2]*=.9,i[i.length-2]*=.8,i[i.length-1]*=.75),i[i.length-1]*=1.3,i[i.length-2]*=1.2,i[i.length-3]*=1.1,i},setTimeout(function(){f.dispatchEvent("ready")},50)}}var h;if(h=zob(e.SoundWave,arguments,"num, input, include, smoothing, min, max, operation, baseline, magnify, reduce",this))return h;z_d("69.95"),zot(t)&&(t=120),zot(o)&&(o="mic"),zot(n)&&(n=.1171875),zot(i)&&(i=.85),zot(r)&&(r="mic"==o?-80:-100),zot(a)&&(a="mic"==o?-40:-10),zot(s)&&(s=function(t,o){return t*(.5+1*o/Math.pow(e.SoundWave.bufferLength,.95))}),zot(l)&&(l="mic"==o?0:30),zot(d)&&(d="mic"==o?1:10),zot(c)&&(c=0),e.SoundWave.bufferLength=1024,_num=t;var f=this;f.baseline=l,f.magnify=d,f.reduce=c;var p=new(window.AudioContext||window.webkitAudioContext),m=f.analyser=p.createAnalyser();if(m.minDecibels=r,m.maxDecibels=a,m.smoothingTimeConstant=i,Object.defineProperty(this,"smoothing",{get:function(){return m.smoothingTimeConstant},set:function(e){m.smoothingTimeConstant=e}}),Object.defineProperty(this,"num",{get:function(){return _num},set:function(t){_num=t,(v=Math.floor(n*e.SoundWave.bufferLength/_num))<1&&zog("ZIM SoundWave: num is too big")}}),"mic"==o)return navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,void(navigator.getUserMedia?navigator.getUserMedia({audio:!0},function(e){u(f.source=p.createMediaStreamSource(e))},function(e){zog("ZIM SoundWave: Error occured: "+e)}):zog("ZIM SoundWave: Sorry, mic not supported"));if(o.type&&"sound"==o.type)zog("ZIM SoundWave: pass in the result of a zim.asset('somesound').play() for the input");else{if(o.playbackResource)var g=o.playbackResource,z=p.createMediaElementSource(g);else var g=o,z=p.createMediaElementSource(g);u(z);var v}},e.extend(e.SoundWave,createjs.EventDispatcher,null,"cjsEventDispatcher",!1),zon&&zog("ZIM FRAME"),e.Frame=function(t,o,n,i,r,a,s,l,d,c,u,h,f,p,m,g,z,v,b){function y(){if(!X){if(X=!0,-1==E.indexOf(t)){if(O=t,zot(zid(O)))return void zog("zim.Frame - scaling: HTML tag with id="+t+" must exist");D=this.tag=zid(O),t=zot(o)||zot(n)?"tag":"inline","myCanvas"==c&&(c=O+"Canvas")}zot(o)&&(o=500),zot(n)&&(n=500),zot(b)||(M.outerColor=b),w(),x(),j?(s&&setTimeout(function(){window.scrollTo(0,0)},50),setTimeout(function(){T(),M.dispatchEvent("ready"),L=!0,C()},100),h>100&&setTimeout(function(){T(),C()},h)):(M.dispatchEvent("ready"),L=!0,C())}}function w(){var o=M.canvas=document.createElement("canvas");o.setAttribute("id",c),o.setAttribute("tabindex",0),"full"==t||"tag"==t?(o.setAttribute("width",e.windowWidth()),o.setAttribute("height",e.windowHeight())):(o.setAttribute("width",I),o.setAttribute("height",B)),"tag"==t||"inline"==t?D.appendChild(o):document.body.appendChild(o),zot(i)||(o.style.backgroundColor=i),"full"!=t&&"fit"!=t&&"outside"!=t||(o.style.position="absolute",document.body.style.overflow="hidden")}function x(){T(),-1==E.indexOf(t)||v||(M.zil=zil()),S=p?new createjs.StageGL(c,m):new createjs.Stage(c),!zot(i)&&p&&S.setClearColor(e.convertColor(i)),S.setBounds(0,0,I,B),S.width=I,S.height=B,r&&S.enableMouseOver(10),a&&createjs.Touch.enable(S,!1,v),v&&(S.preventSelection=!1),g&&(S.nextStage=g.stage),z&&(S.nextStage=z)}function T(){var o,n,i=zid(c),r=e.windowWidth(),a=e.windowHeight();if((A=M.orientation=r>a?"horizontal":"vertical")!=P&&(P=A,M.dispatchEvent("orientation")),j&&s&&setTimeout(function(){window.scrollTo(0,0)},100),i){if("fit"==t)M.scale=r/a>=I/B?a/B:r/I;else if("outside"==t)M.scale=r/a>=I/B?r/I:a/B;else{if("full"==t)return i.style.left=i.style.top="0px",i.width=I=r,i.height=B=a,void(S&&(S.setBounds(0,0,I,B),S.width=I,S.height=B,p&&S.updateViewport(I,B)));if("tag"==t)return I=D.offsetWidth,B=D.offsetHeight,S&&(S.setBounds(0,0,I,B),S.width=I,S.height=B,p&&S.updateViewport(I,B)),D.style.overflow="hidden",i.width=I,i.height=B,void(i.style.left=i.style.top="0px");if("inline"==t)return S&&(S.setBounds(0,0,I,B),S.width=I,S.height=B,p&&S.updateViewport(I,B)),void(i.style.left=i.style.top="0px")}n=B*M.scale,o=I*M.scale,i.style.width=o+"px",i.style.height=n+"px",M.x="left"==l?0:"right"==l?r-o:(r-o)/2,M.y="top"==d?0:"bottom"==d?a-n:(a-n)/2,i.style.left=M.x+"px",i.style.top=M.y+"px"}}function C(){L&&(M.dispatchEvent("resize"),e.OPTIMIZE||!zns&&OPTIMIZE||!S||"full"!=t||S.update())}var k;if(k=zob(e.Frame,arguments,"scaling, width, height, color, rollover, touch, scrollTop, align, valign, canvasID, rollPerSecond, delay, canvasCheck, gpu, gpuObj, nextFrame, nextStage, allowDefault, outerColor",this))return k;z_d("83"),this.cjsEventDispatcher_constructor();var M=this;if("undefined"==typeof zimDefaultFrame&&(zimDefaultFrame=this),zot(f)&&(f=!0),!!window.HTMLCanvasElement||!f){var j=e.mobile();zot(t)&&(t="full"),zot(r)&&(r=!j),zot(a)&&(a=!0),zot(s)&&(s=!0),zot(l)&&(l="center"),zot(d)&&(d="center"),zot(c)&&(c="myCanvas"),zot(u)&&(u=20),zot(h)&&(h=0),zot(p)&&(p=!1),zot(v)&&(v=!1);var E=["fit","outside","full"];this.scale=1,this.x=0,this.y=0;var S,A,P,O,D,I=o,B=n,L=!1,X=!1;"interactive"===document.readyState||"complete"===document.readyState?setTimeout(function(){y()},200):document.addEventListener("DOMContentLoaded",y);var Y,_=!1,R="full"==t&&"undefined"!=typeof InstallTrigger;window.addEventListener("resize",function(){R?_||(_=!0,Y=e.Ticker.update,e.Ticker.update=!1,setTimeout(function(){_=!1,S==zimDefaultFrame.stage&&(e.Ticker.update=Y)},40),setTimeout(function(){T(),C()},20)):(T(),C(),h>0&&j&&setTimeout(function(){T(),C()},h))}),this.loadAssetsCount=0,this.assets={},this.loadAssets=function(t,o,n,i){function r(){var e=Date.now();i=Math.max(0,i-(e-y)),setTimeout(function(){--M.loadAssetsCount<=0&&(M.isLoading=!1),p.isLoading=!1,p.dispatchEvent(w),M.dispatchEvent(w)},i)}if(!zot(t)&&(zot(n)&&(n=!1),Array.isArray(t)||(t=[t]),0!=t.length)){zot(i)&&(i=0);var a,s,l=!1,d=[],c=/\.([^.]+)$/i,u=[],h=[],f=0;for(v=0;v<t.length;v++)(a=t[v]).constructor=={}.constructor?a.src.match(/fonts\.googleapis\.com/)?h.push(a):u.push(a):(f++,s=a.match(c),createjs.Sound.SUPPORTED_EXTENSIONS.indexOf(s[1])>=0&&(l=!0),d.push({src:a}));M.loadAssetsCount++,M.isLoading=!0;var p=new e.Queue;if(p.isLoading=!0,p.loadAssetsCount=0,u.length>0){for(var m,g,z=[],v=0;v<u.length;v++)m={src:"url("+((g=u[v]).src.match(/^http/i)?"":o||"")+g.src+")"+(g.type?" format('"+g.type+"')":""),family:g.font},g.weight&&(m.weight=g.weight),g.style&&(m.style=g.style),z.push(m);(b=new createjs.FontLoader({src:z},!0)).on("complete",function(e){0==--p.loadAssetsCount&&r()}),b.load(),p.loadAssetsCount++}if(h.length>0){p.loadAssetsCount++;for(var b,v=0;v<h.length;v++)m={src:(g=h[v]).src,type:"fontcss"},(b=new createjs.FontLoader(m,!0)).on("complete",function(e){0==--p.loadAssetsCount&&r()}),b.load()}var y=Date.now(),w=new createjs.Event("complete");if(f>0){p.loadAssetsCount++;var x=p.preload=M.preload=new createjs.LoadQueue(n,o);l&&x.installPlugin(createjs.Sound),x.on("progress",function(e){p.dispatchEvent(e),M.dispatchEvent(e)}),x.on("error",function(e){p.dispatchEvent(e),M.dispatchEvent(e)}),x.on("fileload",function(t){var o,n=t.item,i=t.item.type;n.id.match(c);o=M.assets[n.id]=i&&"sound"==i?{type:"sound",id:n.id,play:function(e){var t=createjs.Sound.play(n.id,e);return t.getStage=function(){return S},t}}:"image"==i?new e.Bitmap(t.result,t.result.width,t.result.height,n.id):t.result;var r=new createjs.Event("assetload");r.item=n,r.asset=o,p.dispatchEvent(t),M.dispatchEvent(r)}),M.preloadEvent=x.on("complete",function(e){w=e,0==--p.loadAssetsCount&&r()}),x.loadManifest(d)}return p}},this.asset=function(e){if(!zot(e))return M.assets[e]||{play:function(){if(zon)return zog("zim.Frame - asset("+e+") not found"),{}}}},Object.defineProperty(M,"stage",{get:function(){return S},set:function(e){zog("zim.Frame(): stage is read only - see remakeCanvas(), perhaps")}}),Object.defineProperty(M,"width",{get:function(){return I},set:function(e){zog("zim.Frame(): width is read only - see remakeCanvas(), perhaps")}}),Object.defineProperty(M,"height",{get:function(){return B},set:function(e){zog("zim.Frame(): height is read only - see remakeCanvas(), perhaps")}}),Object.defineProperty(this,"color",{get:function(){return i},set:function(t){i=t,zot(t)?zid(c).style.backgroundColor="default":(zid(c).style.backgroundColor=i,!zot(i)&&p&&S.setClearColor(e.convertColor(i)))}});var W;Object.defineProperty(this,"outerColor",{get:function(){return W},set:function(e){W=e,zet("body").css({backgroundColor:W})}});var F=new createjs.Event("keydown");this.eventRemove=F.remove,window.addEventListener("keydown",function(e){e.remove=M.eventRemove,M.altKey=e.altKey,M.ctrlKey=e.ctrlKey,M.metaKey=e.metaKey,M.shiftKey=e.shiftKey,M.dispatchEvent(e)}),window.addEventListener("keyup",function(e){M.altKey=e.altKey,M.ctrlKey=e.ctrlKey,M.metaKey=e.metaKey,M.shiftKey=e.shiftKey,e.remove=M.eventRemove,M.dispatchEvent(e)}),this.remakeCanvas=function(e,o){"full"!=t&&(zot(e)&&(e=I),zot(o)&&(o=B),zid(c)&&zid(c).parentNode.removeChild(zid(c)),I=e,B=o,w(),x())},this.dispose=function(){return window.removeEventListener("resize",T),S.removeAllChildren(),S.removeAllEventListeners(),zid(c)&&zid(c).parentNode.removeChild(zid(c)),S=null,M=null,!0},this.orange="#f58e25",this.green="#acd241",this.pink="#e472c4",this.blue="#50c4b7",this.brown="#d1a170",this.yellow="#ebcb35",this.purple="#993399",this.red="#fb4758",this.silver="#999999",this.tin="#777777",this.grey="#555555",this.gray="#555555",this.lighter="#eeeeee",this.light="#cccccc",this.dark="#333333",this.darker="#111111",this.black="#000000",this.white="#FFFFFF",this.clear="rgba(0,0,0,0)",this.faint="rgba(0,0,0,.01)",this.makeCircles=function(t){zot(t)&&(t=100);var o=[M.orange,M.green,M.pink,M.blue,M.brown,M.dark],n=new e.Shape,i=n.graphics;n.radius=t;for(var r=0;r<o.length;r++)i.f(o[r]).dc(0,0,n.radius/o.length*(o.length-r));return n.setBounds(-n.radius,-n.radius,2*n.radius,2*n.radius),n}}else setTimeout(function(){M.dispatchEvent("failed")},100)},e.extend(e.Frame,createjs.EventDispatcher,null,"cjsEventDispatcher",!1),e.Queue=function(){this.cjsEventDispatcher_constructor(),this.isLoading=!0},e.extend(e.Queue,createjs.EventDispatcher,null,"cjsEventDispatcher"),e.DISTILL=!1,e.distillery=[],e.distill=function(){!window.zns&&e&&(e.DISTILL||window.DISTILL)&&e.distillery.push("83.3","83.35"),zog("zim.distill() - go to http://zimjs.com/code/distill and enter the following:"),zog(e.distillery.length>0?e.distillery.join(" "):"must set zim.DISTILL = true;")},e}(zim||{}))||{});window.zns||zimplify();
